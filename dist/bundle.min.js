/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/ts/factory/cube.ts":
/*!********************************!*\
  !*** ./src/ts/factory/cube.ts ***!
  \********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
var cube_1 = __importDefault(__webpack_require__(/*! ../widgets/cube */ "./src/ts/widgets/cube.ts"));
var point_1 = __importDefault(__webpack_require__(/*! ./point */ "./src/ts/factory/point.ts"));
var CubeFactory = /** @class */ (function () {
    function CubeFactory() {
    }
    CubeFactory.create = function (relationPos, pos) {
        if (pos === void 0) { pos = point_1.default.createMin(); }
        return new cube_1.default(relationPos, pos);
    };
    return CubeFactory;
}());
exports.default = CubeFactory;


/***/ }),

/***/ "./src/ts/factory/gameWindow.ts":
/*!**************************************!*\
  !*** ./src/ts/factory/gameWindow.ts ***!
  \**************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __spreadArrays = (this && this.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
var gameWindow_1 = __webpack_require__(/*! ../game/window/concrete/gameWindow */ "./src/ts/game/window/concrete/gameWindow.ts");
var GameWindowFactory = /** @class */ (function () {
    function GameWindowFactory() {
    }
    GameWindowFactory.create = function (type) {
        var _a;
        var args = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            args[_i - 1] = arguments[_i];
        }
        //輸入的類別名稱為store紀錄的屬性時生成對應的Tetris
        var gameWindow = new ((_a = gameWindow_1.Types[type]).bind.apply(_a, __spreadArrays([void 0], args)))();
        return gameWindow;
    };
    return GameWindowFactory;
}());
exports.default = GameWindowFactory;


/***/ }),

/***/ "./src/ts/factory/point.ts":
/*!*********************************!*\
  !*** ./src/ts/factory/point.ts ***!
  \*********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
var point_1 = __importDefault(__webpack_require__(/*! ../util/point */ "./src/ts/util/point.ts"));
var PointFactory = /** @class */ (function () {
    function PointFactory() {
    }
    PointFactory.create = function (x, y) {
        return new point_1.default(x, y);
    };
    PointFactory.createByPoint = function (p) {
        var x = p.x, y = p.y;
        return new point_1.default(x, y);
    };
    PointFactory.createMin = function () {
        return new point_1.default(Number.MIN_SAFE_INTEGER, Number.MIN_SAFE_INTEGER);
    };
    return PointFactory;
}());
exports.default = PointFactory;


/***/ }),

/***/ "./src/ts/factory/tetris.ts":
/*!**********************************!*\
  !*** ./src/ts/factory/tetris.ts ***!
  \**********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
var tetrises_1 = __webpack_require__(/*! ../widgets/concrete/tetrises */ "./src/ts/widgets/concrete/tetrises.ts");
var point_1 = __importDefault(__webpack_require__(/*! ./point */ "./src/ts/factory/point.ts"));
var TetrisFactory = /** @class */ (function () {
    function TetrisFactory() {
    }
    TetrisFactory.create = function (tetrisType) {
        //輸入的類別名稱為store紀錄的屬性時生成對應的Tetris
        var tetris = new tetrises_1.Types[tetrisType]();
        return tetris;
    };
    TetrisFactory.createRandom = function (sceneColumn) {
        var tetris = TetrisFactory.randomPickTetris();
        var x = Math.floor(sceneColumn / 2 - tetris.width / 2);
        tetris.randomRotateShape();
        tetris.originPos = point_1.default.create(x, 0);
        return tetris;
    };
    TetrisFactory.randomPickTetris = function () {
        var types = Object.keys(tetrises_1.Types);
        var random = Math.floor(Math.random() * types.length);
        var pick = types[random];
        return TetrisFactory.create(pick);
    };
    return TetrisFactory;
}());
exports.default = TetrisFactory;


/***/ }),

/***/ "./src/ts/game/action/concrete/keyboard.ts":
/*!*************************************************!*\
  !*** ./src/ts/game/action/concrete/keyboard.ts ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.actions = void 0;
var behaviorResolver_1 = __importDefault(__webpack_require__(/*! ../../behaviorResolver */ "./src/ts/game/behaviorResolver.ts"));
var moveLeft = function (event, context) {
    if (event.key === "ArrowLeft") {
        context.currTetris.left();
    }
};
var moveRight = function (event, context) {
    if (event.key === "ArrowRight") {
        context.currTetris.right();
    }
};
var rotate = function (event, context) {
    if (event.key === "ArrowUp") {
        context.currTetris.rotate();
    }
};
var hold = function (event, context) {
    if (event.key === "c" && context.canHold) {
        context.canHold = false;
        if (context.holdTetris) {
            var tempCurr = context.currTetris;
            context.currTetris = context.holdTetris;
            context.currTetris.posInitialize();
            context.holdTetris = tempCurr;
            context.tetrises = context.tetrises.filter(function (tetris) { return tetris !== context.holdTetris; });
            context.tetrises.push(context.currTetris);
        }
        else {
            context.holdTetris = context.currTetris;
            behaviorResolver_1.default.updateCurrAndPrepare(context);
            context.tetrises = context.tetrises.filter(function (tetris) { return tetris !== context.holdTetris; });
            context.currTetris.posInitialize();
            context.holdTetris.posInitialize();
        }
        context.holdWindow.render([context.holdTetris]);
    }
};
var softDrop = function (event, context) {
    if (event.key === "ArrowDown") {
        if (!context.softDown) {
            context.downTimer.ms = context.downTimer.ms - context.speedIncrease;
            context.softDown = true;
        }
    }
};
var restoreSoftDrop = function (event, context) {
    if (event.key === "ArrowDown") {
        if (context.softDown) {
            context.downTimer.ms = context.downTimer.ms + context.speedIncrease;
            context.softDown = false;
        }
    }
};
var hardDrop = function (event, context) {
    if (event.key === " ") {
        context.downTimer.ms = 0;
    }
};
var actions = {
    keydown: [moveLeft, moveRight, rotate, softDrop, hardDrop, hold],
    keyup: [restoreSoftDrop],
};
exports.actions = actions;


/***/ }),

/***/ "./src/ts/game/behaviorResolver.ts":
/*!*****************************************!*\
  !*** ./src/ts/game/behaviorResolver.ts ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
var tetris_1 = __importDefault(__webpack_require__(/*! ../factory/tetris */ "./src/ts/factory/tetris.ts"));
var tetris_2 = __webpack_require__(/*! ../widgets/tetris */ "./src/ts/widgets/tetris.ts");
var cubeEliminator_1 = __importDefault(__webpack_require__(/*! ./cubeEliminator */ "./src/ts/game/cubeEliminator.ts"));
var GameBehaviorResolver = /** @class */ (function () {
    function GameBehaviorResolver() {
    }
    GameBehaviorResolver.clearCubes = function (context) {
        context.downTimer.stop();
        var clearY = cubeEliminator_1.default.clear(context.gameWindow.width, context.gameWindow.height, context.tetrises);
        context.tetrises.forEach(function (tetris) {
            tetris.cubes.forEach(function (cube) {
                //下降量
                var down = clearY.filter(function (y) { return y > cube.pos.y; }).length;
                cube.pos = cube.pos.plusY(down);
            });
        });
        context.downTimer.start();
    };
    GameBehaviorResolver.updateCurrAndPrepare = function (context) {
        context.currTetris = context.prepareTetrises.shift();
        context.tetrises.push(context.currTetris);
        context.prepareTetrises.push(tetris_1.default.createRandom(context.gameWindow.width));
        GameBehaviorResolver.renderPrepareWindow(context);
    };
    GameBehaviorResolver.windowInit = function (context) {
        context.gameWindow.clear();
        context.gameWindow.renderGrid();
        context.prepareWindow.forEach(function (w) { return w.clear(); });
        context.holdWindow.clear();
    };
    GameBehaviorResolver.renderPrepareWindow = function (context) {
        context.prepareWindow.forEach(function (w, i) {
            w.render([context.prepareTetrises[i]]);
        });
    };
    GameBehaviorResolver.upCurrTetris = function (context) {
        var currTetris = context.currTetris;
        var shape = currTetris.currentShape;
        var width = currTetris.width, height = currTetris.height;
        //上移量 = _currShape第一行與有定義的第一行之距離
        for (var r = 0; r < height; r++) {
            for (var c = 0; c < width; c++) {
                if (shape[r][c] === tetris_2.ShapeValue.DEFINED) {
                    currTetris.pos = currTetris.pos.subtractY(r);
                    break;
                }
            }
        }
        //上移_currShape之高度 - 1
        for (var r = 0; r < height - 1; r++) {
            currTetris.up();
        }
    };
    GameBehaviorResolver.currTetrisDown = function (context) {
        context.currTetris.down();
        context.isDown = true;
    };
    GameBehaviorResolver.nextTick = function (context) {
        //未發生碰撞
        if (!context.collision.isCollision(context.currTetris, context.tetrises)) {
            context.currTetris.update(); //更新現在位置
            return;
        }
        //collision
        if (context.isDown) {
            //復原timer間隔
            context.downTimer.ms = context.downInterval;
            //gameover(發生碰撞且tetris的cubes的y都小於0)
            if (context.currTetris.cubes.filter(function (cube) { return cube.pos.y >= 0; }).length === 0) {
                context.gameWindow.renderTetris(context.tetrises);
                context.gameover = true;
                return;
            }
            //消除方塊
            GameBehaviorResolver.clearCubes(context);
            //產生新方塊
            GameBehaviorResolver.updateCurrAndPrepare(context);
            context.softDown = false;
            context.canHold = true;
            //剛產生就發生碰撞
            if (context.collision.isCollisionTetris(context.currTetris, context.tetrises)) {
                GameBehaviorResolver.upCurrTetris(context); //上移
                context.currTetris.update(); //更新現在位置
                context.gameWindow.renderTetris(context.tetrises);
            }
        }
        context.currTetris.back();
    };
    return GameBehaviorResolver;
}());
exports.default = GameBehaviorResolver;


/***/ }),

/***/ "./src/ts/game/collision.ts":
/*!**********************************!*\
  !*** ./src/ts/game/collision.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.BoundaryType = void 0;
var BoundaryType;
(function (BoundaryType) {
    BoundaryType[BoundaryType["Top"] = 0] = "Top";
    BoundaryType[BoundaryType["Bottom"] = 1] = "Bottom";
    BoundaryType[BoundaryType["Left"] = 2] = "Left";
    BoundaryType[BoundaryType["Right"] = 3] = "Right";
})(BoundaryType = exports.BoundaryType || (exports.BoundaryType = {}));
var Collision = /** @class */ (function () {
    function Collision(boundary, ignore) {
        if (ignore === void 0) { ignore = []; }
        this._boundary = boundary;
        this._ignore = ignore;
    }
    Collision.prototype.isCollisionTetris = function (target, tetrises) {
        for (var i = 0; i < tetrises.length; i++) {
            var currTetris = tetrises[i];
            if (currTetris !== target) {
                for (var j = 0; j < target.nextCubes.length; j++) {
                    if (currTetris.findCubeByPos(target.nextCubes[j].pos)) {
                        return true;
                    }
                }
            }
        }
        return false;
    };
    Collision.prototype.isCollisionBoundary = function (target) {
        var _a = this._boundary, top = _a.top, bottom = _a.bottom, left = _a.left, right = _a.right;
        for (var i = 0; i < target.nextCubes.length; i++) {
            var _b = target.nextCubes[i].pos, x = _b.x, y = _b.y;
            if ((x < left && !this._ignore.includes(BoundaryType.Left)) ||
                (x > right && !this._ignore.includes(BoundaryType.Right)) ||
                (y < top && !this._ignore.includes(BoundaryType.Top)) ||
                (y > bottom && !this._ignore.includes(BoundaryType.Bottom))) {
                return true;
            }
        }
        return false;
    };
    Collision.prototype.isCollision = function (target, tetrises) {
        return this.isCollisionBoundary(target) || this.isCollisionTetris(target, tetrises);
    };
    return Collision;
}());
exports.default = Collision;


/***/ }),

/***/ "./src/ts/game/context.ts":
/*!********************************!*\
  !*** ./src/ts/game/context.ts ***!
  \********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


// import Tetris from "../widgets/tetris";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
// export default interface GameContext {
//     currTetris : Tetris;
//     tetrises : Tetris[] ;
//     prepareTetrises : Tetris[];
//     holdTetris : Tetris | null ;
//     softDown : boolean;
//     isDown : boolean;
//     canHold : boolean; 
//     gameover: boolean
// }
var tetris_1 = __importDefault(__webpack_require__(/*! ../factory/tetris */ "./src/ts/factory/tetris.ts"));
var timer_1 = __importDefault(__webpack_require__(/*! ../util/timer */ "./src/ts/util/timer.ts"));
var collision_1 = __importStar(__webpack_require__(/*! ./collision */ "./src/ts/game/collision.ts"));
var GameContext = /** @class */ (function () {
    function GameContext(gameWindow, prepareWindow, holdWindow, downUpdate) {
        var _this = this;
        this.downInterval = 450;
        this.renderInterval = 50;
        this.speedIncrease = 400;
        this.tetrises = [];
        this.prepareTetrises = [];
        this.holdTetris = null;
        this.softDown = false;
        this.isDown = false;
        this.canHold = true;
        this.gameover = false;
        this.gameWindow = gameWindow;
        this.prepareWindow = prepareWindow;
        this.holdWindow = holdWindow;
        this.currTetris = tetris_1.default.createRandom(this.gameWindow.width);
        this.tetrises.push(this.currTetris);
        for (var i = 0; i < this.prepareWindow.length; i++) {
            this.prepareTetrises.push(tetris_1.default.createRandom(this.gameWindow.width));
        }
        this.downTimer = new timer_1.default(function () {
            downUpdate();
        }, this.downInterval);
        this.renderTimer = new timer_1.default(function () {
            ;
            _this.gameWindow.render(_this.tetrises);
        }, this.renderInterval);
        this.collision = new collision_1.default({
            top: 0,
            bottom: gameWindow.height - 1,
            left: 0,
            right: gameWindow.width - 1
        }, [
            collision_1.BoundaryType.Top
        ]);
    }
    return GameContext;
}());
exports.default = GameContext;


/***/ }),

/***/ "./src/ts/game/cubeEliminator.ts":
/*!***************************************!*\
  !*** ./src/ts/game/cubeEliminator.ts ***!
  \***************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
var array_1 = __importDefault(__webpack_require__(/*! ../helper/array */ "./src/ts/helper/array.ts"));
var CubeEliminator = /** @class */ (function () {
    function CubeEliminator() {
    }
    CubeEliminator.clear = function (sceneWidth, sceneHeight, tetrises) {
        var clearY = CubeEliminator.clearableCubes(sceneWidth, sceneHeight, tetrises);
        CubeEliminator.removeClearableTetris(tetrises);
        return clearY;
    };
    //回傳這次應clear的y座標
    CubeEliminator.clearableCubes = function (sceneWidth, sceneHeight, tetrises) {
        var count = array_1.default.create2D(sceneHeight);
        var clearY = [];
        tetrises.forEach(function (tetris) {
            tetris.cubes.forEach(function (cube) {
                //若cube沒被清除則加入
                if (!cube.isClear && cube.pos.y >= 0) {
                    count[cube.pos.y].push(cube);
                }
            });
        });
        count.forEach(function (row, r) {
            //該列都有元素
            if (row.length === sceneWidth) {
                row.forEach(function (cube) {
                    cube.isClear = true;
                });
                clearY.push(r);
            }
        });
        return clearY;
    };
    CubeEliminator.removeClearableTetris = function (tetrises) {
        tetrises.forEach(function (target) {
            var existCubes = target.cubes.filter(function (cube) {
                return cube.isClear === false;
            });
            //cube.isClear 全是 false
            if (existCubes.length === 0) {
                //移除該tetris
                tetrises = tetrises.filter(function (tetris) { return tetris !== target; });
            }
        });
    };
    return CubeEliminator;
}());
exports.default = CubeEliminator;


/***/ }),

/***/ "./src/ts/game/game.ts":
/*!*****************************!*\
  !*** ./src/ts/game/game.ts ***!
  \*****************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
var context_1 = __importDefault(__webpack_require__(/*! ./context */ "./src/ts/game/context.ts"));
var behaviorResolver_1 = __importDefault(__webpack_require__(/*! ./behaviorResolver */ "./src/ts/game/behaviorResolver.ts"));
var keyboard_1 = __webpack_require__(/*! ./action/concrete/keyboard */ "./src/ts/game/action/concrete/keyboard.ts");
var Game = /** @class */ (function () {
    function Game(gameWindow, prepareWindow, holdWindow) {
        var _this = this;
        this.userKeyDownBehavior = function (event) {
            keyboard_1.actions.keydown.forEach(function (action) {
                action(event, _this._context);
            });
            behaviorResolver_1.default.nextTick(_this._context);
        };
        this.userKeyUpBehavior = function (event) {
            keyboard_1.actions.keyup.forEach(function (action) {
                action(event, _this._context);
            });
            behaviorResolver_1.default.nextTick(_this._context);
        };
        this.update = function () {
            behaviorResolver_1.default.currTetrisDown(_this._context);
            behaviorResolver_1.default.nextTick(_this._context);
            if (_this._context.gameover) {
                _this.stop();
                alert("gameover");
            }
            _this._context.isDown = false;
        };
        this._context = new context_1.default(gameWindow, prepareWindow, holdWindow, this.update);
    }
    Game.prototype.registerUserBehavior = function () {
        document.addEventListener("keydown", this.userKeyDownBehavior);
        document.addEventListener("keyup", this.userKeyUpBehavior);
    };
    Game.prototype.removeUserBehavior = function () {
        document.removeEventListener("keydown", this.userKeyDownBehavior);
        document.removeEventListener("keyup", this.userKeyUpBehavior);
    };
    Game.prototype.start = function () {
        if (this._context.gameover) {
            this.initialize();
        }
        this._context.downTimer.start();
        this._context.renderTimer.start();
        behaviorResolver_1.default.renderPrepareWindow(this._context);
        this.registerUserBehavior();
    };
    Game.prototype.stop = function () {
        this._context.downTimer.stop();
        this._context.renderTimer.stop();
        this.removeUserBehavior();
    };
    Game.prototype.initialize = function () {
        var _a = this._context, gameWindow = _a.gameWindow, prepareWindow = _a.prepareWindow, holdWindow = _a.holdWindow;
        this._context = new context_1.default(gameWindow, prepareWindow, holdWindow, this.update);
        behaviorResolver_1.default.windowInit(this._context);
        this.removeUserBehavior();
    };
    return Game;
}());
exports.default = Game;


/***/ }),

/***/ "./src/ts/game/window/concrete/gameWindow.ts":
/*!***************************************************!*\
  !*** ./src/ts/game/window/concrete/gameWindow.ts ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Types = exports.HoldWindow = exports.PrepareWindow = exports.MainWindow = void 0;
var gameWindow_1 = __importDefault(__webpack_require__(/*! ../gameWindow */ "./src/ts/game/window/gameWindow.ts"));
var MainWindow = /** @class */ (function (_super) {
    __extends(MainWindow, _super);
    function MainWindow() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    MainWindow.prototype.renderTetris = function (tetrises) {
        var _this = this;
        this._context.strokeStyle = "#555555";
        tetrises.forEach(function (tetris) {
            tetris.cubes.forEach(function (cube) {
                if (!cube.isClear) {
                    var p = cube.pos;
                    _this._context.beginPath();
                    var x = p.x * _this._unit;
                    var y = p.y * _this._unit;
                    _this._context.rect(x, y, _this._unit, _this._unit);
                    _this._context.fillStyle = tetris.color;
                    _this._context.fill();
                    _this._context.stroke();
                }
            });
        });
    };
    MainWindow.prototype.resize = function () {
        var width = this.width * this._unit;
        var height = this.height * this._unit;
        this._canvas.setAttribute("width", width.toString());
        this._canvas.setAttribute("height", height.toString());
    };
    MainWindow.prototype.renderDefine = function (tetrises) {
        this.renderTetris(tetrises);
        this.renderGrid();
    };
    MainWindow.prototype.initialize = function () {
        this.resize();
        this.renderGrid();
    };
    return MainWindow;
}(gameWindow_1.default));
exports.MainWindow = MainWindow;
var NotGridWindow = /** @class */ (function (_super) {
    __extends(NotGridWindow, _super);
    function NotGridWindow(canvas, unit) {
        return _super.call(this, canvas, 0, 0, unit) || this;
    }
    NotGridWindow.prototype.renderTetris = function (tetrises) {
        var _this = this;
        var tetris = tetrises[0];
        this._context.strokeStyle = "#555555";
        tetris.cubes.forEach(function (cube) {
            var tp = tetris.pos;
            var p = cube.pos;
            _this._context.beginPath();
            //偏移
            var x = (p.x - tp.x) * _this._unit;
            var y = (p.y - tp.y) * _this._unit;
            _this._context.rect(x, y, _this._unit, _this._unit);
            _this._context.fillStyle = tetris.color;
            _this._context.fill();
            _this._context.stroke();
        });
    };
    NotGridWindow.prototype.resize = function (tetris) {
        var width = tetris.originWidth * this._unit;
        var height = tetris.originHeight * this._unit;
        this._canvas.setAttribute("width", width.toString());
        this._canvas.setAttribute("height", height.toString());
    };
    NotGridWindow.prototype.renderDefine = function (tetrises) {
        this.resize(tetrises[0]);
        this.renderTetris(tetrises);
    };
    return NotGridWindow;
}(gameWindow_1.default));
var PrepareWindow = /** @class */ (function (_super) {
    __extends(PrepareWindow, _super);
    function PrepareWindow() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return PrepareWindow;
}(NotGridWindow));
exports.PrepareWindow = PrepareWindow;
var HoldWindow = /** @class */ (function (_super) {
    __extends(HoldWindow, _super);
    function HoldWindow() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return HoldWindow;
}(NotGridWindow));
exports.HoldWindow = HoldWindow;
exports.Types = { MainWindow: MainWindow, PrepareWindow: PrepareWindow, HoldWindow: HoldWindow };


/***/ }),

/***/ "./src/ts/game/window/gameWindow.ts":
/*!******************************************!*\
  !*** ./src/ts/game/window/gameWindow.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
var GameWindow = /** @class */ (function () {
    function GameWindow(canvas, width, height, unit) {
        this._canvas = canvas;
        this._context = canvas.getContext("2d");
        this._width = width;
        this._height = height;
        this._unit = unit;
    }
    Object.defineProperty(GameWindow.prototype, "width", {
        get: function () {
            return this._width;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameWindow.prototype, "height", {
        get: function () {
            return this._height;
        },
        enumerable: false,
        configurable: true
    });
    GameWindow.prototype.renderGrid = function () {
        this._context.strokeStyle = "#777777";
        for (var y = 0; y < this.height; y++) {
            this._context.beginPath();
            this._context.moveTo(0, y * this._unit + this._unit);
            this._context.lineTo(this.width * this._unit, y * this._unit + this._unit);
            this._context.stroke();
        }
        for (var x = 0; x < this.width; x++) {
            this._context.beginPath();
            this._context.moveTo(x * this._unit + this._unit, 0);
            this._context.lineTo(x * this._unit + this._unit, this._canvas.height);
            this._context.stroke();
        }
    };
    GameWindow.prototype.render = function (tetrises) {
        this.clear();
        this.renderDefine(tetrises);
    };
    GameWindow.prototype.clear = function () {
        this._context.clearRect(0, 0, this._canvas.width, this._canvas.height);
    };
    return GameWindow;
}());
exports.default = GameWindow;


/***/ }),

/***/ "./src/ts/helper/array.ts":
/*!********************************!*\
  !*** ./src/ts/helper/array.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
var ArrayHelper = /** @class */ (function () {
    function ArrayHelper() {
    }
    ArrayHelper.create2D = function (row, col, fill) {
        var arr = [];
        for (var r = 0; r < row; r++) {
            arr.push([]);
            if (col) {
                if (fill) {
                    arr[r] = new Array(col).fill(fill);
                }
            }
        }
        return arr;
    };
    return ArrayHelper;
}());
exports.default = ArrayHelper;


/***/ }),

/***/ "./src/ts/main.ts":
/*!************************!*\
  !*** ./src/ts/main.ts ***!
  \************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
var gameWindow_1 = __importDefault(__webpack_require__(/*! ./factory/gameWindow */ "./src/ts/factory/gameWindow.ts"));
var gameWindow_2 = __webpack_require__(/*! ./game/window/concrete/gameWindow */ "./src/ts/game/window/concrete/gameWindow.ts");
var game_1 = __importDefault(__webpack_require__(/*! ./game/game */ "./src/ts/game/game.ts"));
// 禁止特定按鍵觸發頁面滾動
window.addEventListener("keydown", function (event) {
    var disableKey = ["ArrowUp", "ArrowDown", "ArrowLeft", "ArrowRight", " "];
    if (disableKey.includes(event.key)) {
        event.preventDefault();
    }
});
var canvas = document.querySelector("#gameWindow");
var prepareCanvas = document.querySelectorAll("#next-area > .canvas-wrapper > canvas");
var hold = document.querySelector("#hold");
var start = document.querySelector("#start");
var stop = document.querySelector("#stop");
var reset = document.querySelector("#reset");
var unit = 20;
var unit2 = 13;
var gameWindow = gameWindow_1.default.create(gameWindow_2.MainWindow.name, canvas, 14, 24, unit);
var prepareWindows = [];
prepareCanvas.forEach(function (c) {
    c.setAttribute("height", (unit2 * 4).toString());
    c.setAttribute("height", (unit2 * 4).toString());
    prepareWindows.push(gameWindow_1.default.create(gameWindow_2.PrepareWindow.name, c, unit2));
});
hold.setAttribute("height", (unit2 * 4).toString());
hold.setAttribute("height", (unit2 * 4).toString());
var holdWindow = gameWindow_1.default.create(gameWindow_2.HoldWindow.name, hold, unit2);
gameWindow.initialize();
var game = new game_1.default(gameWindow, prepareWindows, holdWindow);
start.addEventListener("click", function () {
    game.start();
    start.style.color = "white";
    stop.style.color = "#888888";
    reset.style.color = "#888888";
});
stop.addEventListener("click", function () {
    game.stop();
    stop.style.color = "white";
    start.style.color = "#888888";
    reset.style.color = "#888888";
});
reset.addEventListener("click", function (event) {
    game.stop();
    game.initialize();
    reset.style.color = "white";
    start.style.color = "#888888";
    stop.style.color = "#888888";
});
window.addEventListener("keydown", function (event) {
    if (event.key === "p") {
        stop.click();
    }
    if (event.key === "Enter") {
        start.click();
    }
    if (event.key === "r") {
        reset.click();
    }
});


/***/ }),

/***/ "./src/ts/util/point.ts":
/*!******************************!*\
  !*** ./src/ts/util/point.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
var Point = /** @class */ (function () {
    function Point(x, y) {
        this._x = x;
        this._y = y;
    }
    Object.defineProperty(Point.prototype, "x", {
        get: function () {
            return this._x;
        },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(Point.prototype, "y", {
        get: function () {
            return this._y;
        },
        enumerable: false,
        configurable: true
    });
    Point.prototype.plus = function (p) {
        var x = this._x + p.x;
        var y = this._y + p.y;
        return new Point(x, y);
    };
    Point.prototype.plusWith = function (x, y) {
        return new Point(this._x + x, this._y + y);
    };
    Point.prototype.subtract = function (p) {
        var x = this._x - p.x;
        var y = this._y - p.y;
        return new Point(x, y);
    };
    Point.prototype.subtractWith = function (x, y) {
        return new Point(this._x - x, this._y - y);
    };
    Point.prototype.plusX = function (x) {
        return new Point(this._x + x, this.y);
    };
    Point.prototype.plusY = function (y) {
        return new Point(this.x, this._y + y);
    };
    Point.prototype.subtractX = function (x) {
        return new Point(this._x - x, this.y);
    };
    Point.prototype.subtractY = function (y) {
        return new Point(this.x, this._y - y);
    };
    Point.prototype.equal = function (p) {
        return this.x === p.x && this.y === p.y;
    };
    return Point;
}());
exports.default = Point;


/***/ }),

/***/ "./src/ts/util/timer.ts":
/*!******************************!*\
  !*** ./src/ts/util/timer.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
var Timer = /** @class */ (function () {
    function Timer(handle, ms) {
        this._timerID = null;
        this._ms = ms;
        this._handle = handle;
    }
    Object.defineProperty(Timer.prototype, "ms", {
        get: function () {
            return this._ms;
        },
        set: function (val) {
            this._ms = val;
            this.stop();
            this.start();
        },
        enumerable: false,
        configurable: true
    });
    Timer.prototype.start = function () {
        if (!this._timerID) {
            this._timerID = setInterval(this._handle, this._ms);
        }
    };
    Timer.prototype.stop = function () {
        if (this._timerID) {
            clearInterval(this._timerID);
            this._timerID = null;
        }
    };
    return Timer;
}());
exports.default = Timer;


/***/ }),

/***/ "./src/ts/widgets/concrete/tetrises.ts":
/*!*********************************************!*\
  !*** ./src/ts/widgets/concrete/tetrises.ts ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Types = exports.ZTetris = exports.TTetris = exports.STetris = exports.OTetris = exports.LTetris = exports.JTetris = exports.ITetris = void 0;
var tetris_1 = __importDefault(__webpack_require__(/*! ../tetris */ "./src/ts/widgets/tetris.ts"));
var ITetris = /** @class */ (function (_super) {
    __extends(ITetris, _super);
    function ITetris() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ITetris.prototype.colorDefine = function () {
        return "#42b0f5";
    };
    ITetris.prototype.shapeDefine = function () {
        return [
            [0, 0, 0, 0],
            [1, 1, 1, 1],
            [0, 0, 0, 0],
            [0, 0, 0, 0],
        ];
    };
    return ITetris;
}(tetris_1.default));
exports.ITetris = ITetris;
var JTetris = /** @class */ (function (_super) {
    __extends(JTetris, _super);
    function JTetris() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    JTetris.prototype.colorDefine = function () {
        return "#3874ff";
    };
    JTetris.prototype.shapeDefine = function () {
        return [
            [1, 0, 0],
            [1, 1, 1],
            [0, 0, 0],
        ];
    };
    return JTetris;
}(tetris_1.default));
exports.JTetris = JTetris;
var LTetris = /** @class */ (function (_super) {
    __extends(LTetris, _super);
    function LTetris() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    LTetris.prototype.colorDefine = function () {
        return "#ff8e24";
    };
    LTetris.prototype.shapeDefine = function () {
        return [
            [0, 0, 1],
            [1, 1, 1],
            [0, 0, 0],
        ];
    };
    return LTetris;
}(tetris_1.default));
exports.LTetris = LTetris;
var OTetris = /** @class */ (function (_super) {
    __extends(OTetris, _super);
    function OTetris() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    OTetris.prototype.colorDefine = function () {
        return "#fff242";
    };
    OTetris.prototype.shapeDefine = function () {
        return [
            [1, 1],
            [1, 1],
        ];
    };
    return OTetris;
}(tetris_1.default));
exports.OTetris = OTetris;
var STetris = /** @class */ (function (_super) {
    __extends(STetris, _super);
    function STetris() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    STetris.prototype.colorDefine = function () {
        return "#00de3f";
    };
    STetris.prototype.shapeDefine = function () {
        return [
            [0, 1, 1],
            [1, 1, 0],
            [0, 0, 0],
        ];
    };
    return STetris;
}(tetris_1.default));
exports.STetris = STetris;
var TTetris = /** @class */ (function (_super) {
    __extends(TTetris, _super);
    function TTetris() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    TTetris.prototype.colorDefine = function () {
        return "#e557f7";
    };
    TTetris.prototype.shapeDefine = function () {
        return [
            [0, 1, 0],
            [1, 1, 1],
            [0, 0, 0],
        ];
    };
    return TTetris;
}(tetris_1.default));
exports.TTetris = TTetris;
var ZTetris = /** @class */ (function (_super) {
    __extends(ZTetris, _super);
    function ZTetris() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ZTetris.prototype.colorDefine = function () {
        return "#ff1f1f";
    };
    ZTetris.prototype.shapeDefine = function () {
        return [
            [1, 1, 0],
            [0, 1, 1],
            [0, 0, 0],
        ];
    };
    return ZTetris;
}(tetris_1.default));
exports.ZTetris = ZTetris;
exports.Types = {
    ITetris: ITetris,
    JTetris: JTetris,
    LTetris: LTetris,
    OTetris: OTetris,
    STetris: STetris,
    TTetris: TTetris,
    ZTetris: ZTetris
};


/***/ }),

/***/ "./src/ts/widgets/cube.ts":
/*!********************************!*\
  !*** ./src/ts/widgets/cube.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
var Cube = /** @class */ (function () {
    function Cube(relationPos, pos) {
        this.isClear = false;
        this.relationPos = relationPos;
        this.pos = pos;
    }
    return Cube;
}());
exports.default = Cube;


/***/ }),

/***/ "./src/ts/widgets/tetris.ts":
/*!**********************************!*\
  !*** ./src/ts/widgets/tetris.ts ***!
  \**********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ShapeValue = void 0;
var cube_1 = __importDefault(__webpack_require__(/*! ../factory/cube */ "./src/ts/factory/cube.ts"));
var point_1 = __importDefault(__webpack_require__(/*! ../factory/point */ "./src/ts/factory/point.ts"));
var array_1 = __importDefault(__webpack_require__(/*! ../helper/array */ "./src/ts/helper/array.ts"));
var ShapeValue;
(function (ShapeValue) {
    ShapeValue[ShapeValue["UNDEFINED"] = -1] = "UNDEFINED";
    ShapeValue[ShapeValue["DEFINED"] = 1] = "DEFINED";
    ShapeValue[ShapeValue["EMPTY"] = 0] = "EMPTY";
})(ShapeValue = exports.ShapeValue || (exports.ShapeValue = {}));
var Tetris = /** @class */ (function () {
    function Tetris() {
        this._originPos = point_1.default.createMin();
        this._pos = point_1.default.createMin();
        this._nextPos = point_1.default.createMin();
        this._cubes = [];
        this._color = this.colorDefine();
        this._originShape = this.shapeDefine();
        this._nextShape = this._originShape.slice();
        this._currentShape = this._originShape.slice();
    }
    Object.defineProperty(Tetris.prototype, "width", {
        get: function () {
            return this._currentShape[0].length;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Tetris.prototype, "height", {
        get: function () {
            return this._currentShape.length;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Tetris.prototype, "pos", {
        get: function () {
            return this._pos;
        },
        set: function (value) {
            this._pos = value;
            this._cubes = this.generateCubes(this.pos, this._currentShape);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Tetris.prototype, "originPos", {
        get: function () {
            return this._originPos;
        },
        set: function (p) {
            if (this.originPos.x === Number.MIN_SAFE_INTEGER && this.originPos.y === Number.MIN_SAFE_INTEGER) {
                this._originPos = point_1.default.createByPoint(p);
                this.pos = point_1.default.createByPoint(p);
                this._nextPos = point_1.default.createByPoint(p);
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Tetris.prototype, "originWidth", {
        get: function () {
            return this._originShape[0].length;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Tetris.prototype, "originHeight", {
        get: function () {
            return this._originShape.length;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Tetris.prototype, "cubes", {
        get: function () {
            return this._cubes;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Tetris.prototype, "nextCubes", {
        get: function () {
            return this.generateCubes(this._nextPos, this._nextShape);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Tetris.prototype, "color", {
        get: function () {
            return this._color;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Tetris.prototype, "currentShape", {
        get: function () {
            return this._currentShape.slice();
        },
        enumerable: false,
        configurable: true
    });
    Tetris.prototype.generateCubes = function (pos, shape) {
        var cubes = [];
        shape.forEach(function (row, r) {
            row.forEach(function (element, c) {
                if (element === ShapeValue.DEFINED) {
                    var relationPos = point_1.default.create(c, r);
                    var position = relationPos.plus(pos);
                    cubes.push(cube_1.default.create(relationPos, position));
                }
            });
        });
        return cubes;
    };
    Tetris.prototype.findCubeByPos = function (pos, isClear) {
        if (isClear === void 0) { isClear = false; }
        var cube = this._cubes.find(function (cube) {
            return cube.pos.equal(pos) && cube.isClear === isClear;
        });
        return cube;
    };
    Tetris.prototype.findCube = function (cube) {
        return this._cubes.find(function (el) { return el === cube; });
    };
    Tetris.prototype.randomRotateShape = function () {
        var rotateTimes = Math.floor(Math.random() * 4);
        for (var i = 0; i < rotateTimes; i++) {
            this.rotate();
        }
        this._currentShape = this._nextShape.slice();
    };
    Tetris.prototype.rotate = function () {
        var row = this.height;
        var col = this.width;
        var newShape = array_1.default.create2D(col, row, ShapeValue.EMPTY);
        var newRow = 0;
        for (var r = 0; r < row; r++) {
            newRow = 0;
            for (var c = 0; c < col; c++) {
                var val = this._currentShape[r][c];
                newShape[newRow][row - r - 1] = val;
                if (val === ShapeValue.DEFINED) {
                    var originCube = this.findCubeByPos(point_1.default.create(c, r));
                    if (originCube) {
                        var newCube = cube_1.default.create(point_1.default.create(r, newRow));
                        //tetris左上角之座標 + 偏移量
                        newCube.pos = this.pos.plusWith(r, c);
                    }
                }
                newRow++;
            }
        }
        this._nextShape = newShape;
    };
    Tetris.prototype.left = function () {
        this._nextPos = this.pos.subtractX(1);
    };
    Tetris.prototype.right = function () {
        this._nextPos = this.pos.plusX(1);
    };
    Tetris.prototype.up = function () {
        this._nextPos = this.pos.subtractY(1);
    };
    Tetris.prototype.down = function () {
        this._nextPos = this.pos.plusY(1);
    };
    Tetris.prototype.update = function () {
        this._currentShape = this._nextShape.slice();
        this.pos = point_1.default.createByPoint(this._nextPos);
    };
    Tetris.prototype.back = function () {
        this._nextShape = this._currentShape.slice();
        this._nextPos = point_1.default.createByPoint(this.pos);
    };
    Tetris.prototype.posInitialize = function () {
        this.pos = point_1.default.createByPoint(this.originPos);
        this._nextPos = point_1.default.createByPoint(this.originPos);
    };
    return Tetris;
}());
exports.default = Tetris;


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		var execOptions = { id: moduleId, module: module, factory: __webpack_modules__[moduleId], require: __webpack_require__ };
/******/ 		__webpack_require__.i.forEach(function(handler) { handler(execOptions); });
/******/ 		module = execOptions.module;
/******/ 		execOptions.factory.call(module.exports, module, module.exports, execOptions.require);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = __webpack_module_cache__;
/******/ 	
/******/ 	// expose the module execution interceptor
/******/ 	__webpack_require__.i = [];
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/get javascript update chunk filename */
/******/ 	(() => {
/******/ 		// This function allow to reference all chunks
/******/ 		__webpack_require__.hu = (chunkId) => {
/******/ 			// return url for filenames based on template
/******/ 			return "" + chunkId + "." + __webpack_require__.h() + ".hot-update.js";
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/get update manifest filename */
/******/ 	(() => {
/******/ 		__webpack_require__.hmrF = () => ("main." + __webpack_require__.h() + ".hot-update.json");
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/getFullHash */
/******/ 	(() => {
/******/ 		__webpack_require__.h = () => ("7055d9a42d9cdcb8e16c")
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/load script */
/******/ 	(() => {
/******/ 		var inProgress = {};
/******/ 		var dataWebpackPrefix = "Tetris:";
/******/ 		// loadScript function to load a script via script tag
/******/ 		__webpack_require__.l = (url, done, key, chunkId) => {
/******/ 			if(inProgress[url]) { inProgress[url].push(done); return; }
/******/ 			var script, needAttach;
/******/ 			if(key !== undefined) {
/******/ 				var scripts = document.getElementsByTagName("script");
/******/ 				for(var i = 0; i < scripts.length; i++) {
/******/ 					var s = scripts[i];
/******/ 					if(s.getAttribute("src") == url || s.getAttribute("data-webpack") == dataWebpackPrefix + key) { script = s; break; }
/******/ 				}
/******/ 			}
/******/ 			if(!script) {
/******/ 				needAttach = true;
/******/ 				script = document.createElement('script');
/******/ 		
/******/ 				script.charset = 'utf-8';
/******/ 				script.timeout = 120;
/******/ 				if (__webpack_require__.nc) {
/******/ 					script.setAttribute("nonce", __webpack_require__.nc);
/******/ 				}
/******/ 				script.setAttribute("data-webpack", dataWebpackPrefix + key);
/******/ 				script.src = url;
/******/ 			}
/******/ 			inProgress[url] = [done];
/******/ 			var onScriptComplete = (prev, event) => {
/******/ 				// avoid mem leaks in IE.
/******/ 				script.onerror = script.onload = null;
/******/ 				clearTimeout(timeout);
/******/ 				var doneFns = inProgress[url];
/******/ 				delete inProgress[url];
/******/ 				script.parentNode && script.parentNode.removeChild(script);
/******/ 				doneFns && doneFns.forEach((fn) => (fn(event)));
/******/ 				if(prev) return prev(event);
/******/ 			}
/******/ 			;
/******/ 			var timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);
/******/ 			script.onerror = onScriptComplete.bind(null, script.onerror);
/******/ 			script.onload = onScriptComplete.bind(null, script.onload);
/******/ 			needAttach && document.head.appendChild(script);
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hot module replacement */
/******/ 	(() => {
/******/ 		var currentModuleData = {};
/******/ 		var installedModules = __webpack_require__.c;
/******/ 		
/******/ 		// module and require creation
/******/ 		var currentChildModule;
/******/ 		var currentParents = [];
/******/ 		
/******/ 		// status
/******/ 		var registeredStatusHandlers = [];
/******/ 		var currentStatus = "idle";
/******/ 		
/******/ 		// while downloading
/******/ 		var blockingPromises;
/******/ 		
/******/ 		// The update info
/******/ 		var currentUpdateApplyHandlers;
/******/ 		var queuedInvalidatedModules;
/******/ 		
/******/ 		// eslint-disable-next-line no-unused-vars
/******/ 		__webpack_require__.hmrD = currentModuleData;
/******/ 		
/******/ 		__webpack_require__.i.push(function (options) {
/******/ 			var module = options.module;
/******/ 			var require = createRequire(options.require, options.id);
/******/ 			module.hot = createModuleHotObject(options.id, module);
/******/ 			module.parents = currentParents;
/******/ 			module.children = [];
/******/ 			currentParents = [];
/******/ 			options.require = require;
/******/ 		});
/******/ 		
/******/ 		__webpack_require__.hmrC = {};
/******/ 		__webpack_require__.hmrI = {};
/******/ 		
/******/ 		function createRequire(require, moduleId) {
/******/ 			var me = installedModules[moduleId];
/******/ 			if (!me) return require;
/******/ 			var fn = function (request) {
/******/ 				if (me.hot.active) {
/******/ 					if (installedModules[request]) {
/******/ 						var parents = installedModules[request].parents;
/******/ 						if (parents.indexOf(moduleId) === -1) {
/******/ 							parents.push(moduleId);
/******/ 						}
/******/ 					} else {
/******/ 						currentParents = [moduleId];
/******/ 						currentChildModule = request;
/******/ 					}
/******/ 					if (me.children.indexOf(request) === -1) {
/******/ 						me.children.push(request);
/******/ 					}
/******/ 				} else {
/******/ 					console.warn(
/******/ 						"[HMR] unexpected require(" +
/******/ 							request +
/******/ 							") from disposed module " +
/******/ 							moduleId
/******/ 					);
/******/ 					currentParents = [];
/******/ 				}
/******/ 				return require(request);
/******/ 			};
/******/ 			var createPropertyDescriptor = function (name) {
/******/ 				return {
/******/ 					configurable: true,
/******/ 					enumerable: true,
/******/ 					get: function () {
/******/ 						return require[name];
/******/ 					},
/******/ 					set: function (value) {
/******/ 						require[name] = value;
/******/ 					}
/******/ 				};
/******/ 			};
/******/ 			for (var name in require) {
/******/ 				if (Object.prototype.hasOwnProperty.call(require, name) && name !== "e") {
/******/ 					Object.defineProperty(fn, name, createPropertyDescriptor(name));
/******/ 				}
/******/ 			}
/******/ 			fn.e = function (chunkId) {
/******/ 				return trackBlockingPromise(require.e(chunkId));
/******/ 			};
/******/ 			return fn;
/******/ 		}
/******/ 		
/******/ 		function createModuleHotObject(moduleId, me) {
/******/ 			var hot = {
/******/ 				// private stuff
/******/ 				_acceptedDependencies: {},
/******/ 				_declinedDependencies: {},
/******/ 				_selfAccepted: false,
/******/ 				_selfDeclined: false,
/******/ 				_selfInvalidated: false,
/******/ 				_disposeHandlers: [],
/******/ 				_main: currentChildModule !== moduleId,
/******/ 				_requireSelf: function () {
/******/ 					currentParents = me.parents.slice();
/******/ 					currentChildModule = moduleId;
/******/ 					__webpack_require__(moduleId);
/******/ 				},
/******/ 		
/******/ 				// Module API
/******/ 				active: true,
/******/ 				accept: function (dep, callback) {
/******/ 					if (dep === undefined) hot._selfAccepted = true;
/******/ 					else if (typeof dep === "function") hot._selfAccepted = dep;
/******/ 					else if (typeof dep === "object" && dep !== null)
/******/ 						for (var i = 0; i < dep.length; i++)
/******/ 							hot._acceptedDependencies[dep[i]] = callback || function () {};
/******/ 					else hot._acceptedDependencies[dep] = callback || function () {};
/******/ 				},
/******/ 				decline: function (dep) {
/******/ 					if (dep === undefined) hot._selfDeclined = true;
/******/ 					else if (typeof dep === "object" && dep !== null)
/******/ 						for (var i = 0; i < dep.length; i++)
/******/ 							hot._declinedDependencies[dep[i]] = true;
/******/ 					else hot._declinedDependencies[dep] = true;
/******/ 				},
/******/ 				dispose: function (callback) {
/******/ 					hot._disposeHandlers.push(callback);
/******/ 				},
/******/ 				addDisposeHandler: function (callback) {
/******/ 					hot._disposeHandlers.push(callback);
/******/ 				},
/******/ 				removeDisposeHandler: function (callback) {
/******/ 					var idx = hot._disposeHandlers.indexOf(callback);
/******/ 					if (idx >= 0) hot._disposeHandlers.splice(idx, 1);
/******/ 				},
/******/ 				invalidate: function () {
/******/ 					this._selfInvalidated = true;
/******/ 					switch (currentStatus) {
/******/ 						case "idle":
/******/ 							currentUpdateApplyHandlers = [];
/******/ 							Object.keys(__webpack_require__.hmrI).forEach(function (key) {
/******/ 								__webpack_require__.hmrI[key](
/******/ 									moduleId,
/******/ 									currentUpdateApplyHandlers
/******/ 								);
/******/ 							});
/******/ 							setStatus("ready");
/******/ 							break;
/******/ 						case "ready":
/******/ 							Object.keys(__webpack_require__.hmrI).forEach(function (key) {
/******/ 								__webpack_require__.hmrI[key](
/******/ 									moduleId,
/******/ 									currentUpdateApplyHandlers
/******/ 								);
/******/ 							});
/******/ 							break;
/******/ 						case "prepare":
/******/ 						case "check":
/******/ 						case "dispose":
/******/ 						case "apply":
/******/ 							(queuedInvalidatedModules = queuedInvalidatedModules || []).push(
/******/ 								moduleId
/******/ 							);
/******/ 							break;
/******/ 						default:
/******/ 							// ignore requests in error states
/******/ 							break;
/******/ 					}
/******/ 				},
/******/ 		
/******/ 				// Management API
/******/ 				check: hotCheck,
/******/ 				apply: hotApply,
/******/ 				status: function (l) {
/******/ 					if (!l) return currentStatus;
/******/ 					registeredStatusHandlers.push(l);
/******/ 				},
/******/ 				addStatusHandler: function (l) {
/******/ 					registeredStatusHandlers.push(l);
/******/ 				},
/******/ 				removeStatusHandler: function (l) {
/******/ 					var idx = registeredStatusHandlers.indexOf(l);
/******/ 					if (idx >= 0) registeredStatusHandlers.splice(idx, 1);
/******/ 				},
/******/ 		
/******/ 				//inherit from previous dispose call
/******/ 				data: currentModuleData[moduleId]
/******/ 			};
/******/ 			currentChildModule = undefined;
/******/ 			return hot;
/******/ 		}
/******/ 		
/******/ 		function setStatus(newStatus) {
/******/ 			currentStatus = newStatus;
/******/ 			for (var i = 0; i < registeredStatusHandlers.length; i++)
/******/ 				registeredStatusHandlers[i].call(null, newStatus);
/******/ 		}
/******/ 		
/******/ 		function trackBlockingPromise(promise) {
/******/ 			switch (currentStatus) {
/******/ 				case "ready":
/******/ 					setStatus("prepare");
/******/ 					blockingPromises.push(promise);
/******/ 					waitForBlockingPromises(function () {
/******/ 						setStatus("ready");
/******/ 					});
/******/ 					return promise;
/******/ 				case "prepare":
/******/ 					blockingPromises.push(promise);
/******/ 					return promise;
/******/ 				default:
/******/ 					return promise;
/******/ 			}
/******/ 		}
/******/ 		
/******/ 		function waitForBlockingPromises(fn) {
/******/ 			if (blockingPromises.length === 0) return fn();
/******/ 			var blocker = blockingPromises;
/******/ 			blockingPromises = [];
/******/ 			return Promise.all(blocker).then(function () {
/******/ 				return waitForBlockingPromises(fn);
/******/ 			});
/******/ 		}
/******/ 		
/******/ 		function hotCheck(applyOnUpdate) {
/******/ 			if (currentStatus !== "idle") {
/******/ 				throw new Error("check() is only allowed in idle status");
/******/ 			}
/******/ 			setStatus("check");
/******/ 			return __webpack_require__.hmrM().then(function (update) {
/******/ 				if (!update) {
/******/ 					setStatus(applyInvalidatedModules() ? "ready" : "idle");
/******/ 					return null;
/******/ 				}
/******/ 		
/******/ 				setStatus("prepare");
/******/ 		
/******/ 				var updatedModules = [];
/******/ 				blockingPromises = [];
/******/ 				currentUpdateApplyHandlers = [];
/******/ 		
/******/ 				return Promise.all(
/******/ 					Object.keys(__webpack_require__.hmrC).reduce(function (
/******/ 						promises,
/******/ 						key
/******/ 					) {
/******/ 						__webpack_require__.hmrC[key](
/******/ 							update.c,
/******/ 							update.r,
/******/ 							update.m,
/******/ 							promises,
/******/ 							currentUpdateApplyHandlers,
/******/ 							updatedModules
/******/ 						);
/******/ 						return promises;
/******/ 					},
/******/ 					[])
/******/ 				).then(function () {
/******/ 					return waitForBlockingPromises(function () {
/******/ 						if (applyOnUpdate) {
/******/ 							return internalApply(applyOnUpdate);
/******/ 						} else {
/******/ 							setStatus("ready");
/******/ 		
/******/ 							return updatedModules;
/******/ 						}
/******/ 					});
/******/ 				});
/******/ 			});
/******/ 		}
/******/ 		
/******/ 		function hotApply(options) {
/******/ 			if (currentStatus !== "ready") {
/******/ 				return Promise.resolve().then(function () {
/******/ 					throw new Error("apply() is only allowed in ready status");
/******/ 				});
/******/ 			}
/******/ 			return internalApply(options);
/******/ 		}
/******/ 		
/******/ 		function internalApply(options) {
/******/ 			options = options || {};
/******/ 		
/******/ 			applyInvalidatedModules();
/******/ 		
/******/ 			var results = currentUpdateApplyHandlers.map(function (handler) {
/******/ 				return handler(options);
/******/ 			});
/******/ 			currentUpdateApplyHandlers = undefined;
/******/ 		
/******/ 			var errors = results
/******/ 				.map(function (r) {
/******/ 					return r.error;
/******/ 				})
/******/ 				.filter(Boolean);
/******/ 		
/******/ 			if (errors.length > 0) {
/******/ 				setStatus("abort");
/******/ 				return Promise.resolve().then(function () {
/******/ 					throw errors[0];
/******/ 				});
/******/ 			}
/******/ 		
/******/ 			// Now in "dispose" phase
/******/ 			setStatus("dispose");
/******/ 		
/******/ 			results.forEach(function (result) {
/******/ 				if (result.dispose) result.dispose();
/******/ 			});
/******/ 		
/******/ 			// Now in "apply" phase
/******/ 			setStatus("apply");
/******/ 		
/******/ 			var error;
/******/ 			var reportError = function (err) {
/******/ 				if (!error) error = err;
/******/ 			};
/******/ 		
/******/ 			var outdatedModules = [];
/******/ 			results.forEach(function (result) {
/******/ 				if (result.apply) {
/******/ 					var modules = result.apply(reportError);
/******/ 					if (modules) {
/******/ 						for (var i = 0; i < modules.length; i++) {
/******/ 							outdatedModules.push(modules[i]);
/******/ 						}
/******/ 					}
/******/ 				}
/******/ 			});
/******/ 		
/******/ 			// handle errors in accept handlers and self accepted module load
/******/ 			if (error) {
/******/ 				setStatus("fail");
/******/ 				return Promise.resolve().then(function () {
/******/ 					throw error;
/******/ 				});
/******/ 			}
/******/ 		
/******/ 			if (queuedInvalidatedModules) {
/******/ 				return internalApply(options).then(function (list) {
/******/ 					outdatedModules.forEach(function (moduleId) {
/******/ 						if (list.indexOf(moduleId) < 0) list.push(moduleId);
/******/ 					});
/******/ 					return list;
/******/ 				});
/******/ 			}
/******/ 		
/******/ 			setStatus("idle");
/******/ 			return Promise.resolve(outdatedModules);
/******/ 		}
/******/ 		
/******/ 		function applyInvalidatedModules() {
/******/ 			if (queuedInvalidatedModules) {
/******/ 				if (!currentUpdateApplyHandlers) currentUpdateApplyHandlers = [];
/******/ 				Object.keys(__webpack_require__.hmrI).forEach(function (key) {
/******/ 					queuedInvalidatedModules.forEach(function (moduleId) {
/******/ 						__webpack_require__.hmrI[key](
/******/ 							moduleId,
/******/ 							currentUpdateApplyHandlers
/******/ 						);
/******/ 					});
/******/ 				});
/******/ 				queuedInvalidatedModules = undefined;
/******/ 				return true;
/******/ 			}
/******/ 		}
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		var scriptUrl;
/******/ 		if (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + "";
/******/ 		var document = __webpack_require__.g.document;
/******/ 		if (!scriptUrl && document) {
/******/ 			if (document.currentScript)
/******/ 				scriptUrl = document.currentScript.src
/******/ 			if (!scriptUrl) {
/******/ 				var scripts = document.getElementsByTagName("script");
/******/ 				if(scripts.length) scriptUrl = scripts[scripts.length - 1].src
/******/ 			}
/******/ 		}
/******/ 		// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration
/******/ 		// or pass an empty string ("") and set the __webpack_public_path__ variable from your code to use your own logic.
/******/ 		if (!scriptUrl) throw new Error("Automatic publicPath is not supported in this browser");
/******/ 		scriptUrl = scriptUrl.replace(/#.*$/, "").replace(/\?.*$/, "").replace(/\/[^\/]+$/, "/");
/******/ 		__webpack_require__.p = scriptUrl;
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// Promise = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"main": 0
/******/ 		};
/******/ 		
/******/ 		
/******/ 		// no chunk on demand loading
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		var currentUpdatedModulesList;
/******/ 		var waitingUpdateResolves = {};
/******/ 		function loadUpdateChunk(chunkId) {
/******/ 			return new Promise((resolve, reject) => {
/******/ 				waitingUpdateResolves[chunkId] = resolve;
/******/ 				// start update chunk loading
/******/ 				var url = __webpack_require__.p + __webpack_require__.hu(chunkId);
/******/ 				// create error before stack unwound to get useful stacktrace later
/******/ 				var error = new Error();
/******/ 				var loadingEnded = (event) => {
/******/ 					if(waitingUpdateResolves[chunkId]) {
/******/ 						waitingUpdateResolves[chunkId] = undefined
/******/ 						var errorType = event && (event.type === 'load' ? 'missing' : event.type);
/******/ 						var realSrc = event && event.target && event.target.src;
/******/ 						error.message = 'Loading hot update chunk ' + chunkId + ' failed.\n(' + errorType + ': ' + realSrc + ')';
/******/ 						error.name = 'ChunkLoadError';
/******/ 						error.type = errorType;
/******/ 						error.request = realSrc;
/******/ 						reject(error);
/******/ 					}
/******/ 				};
/******/ 				__webpack_require__.l(url, loadingEnded);
/******/ 			});
/******/ 		}
/******/ 		
/******/ 		self["webpackHotUpdateTetris"] = (chunkId, moreModules, runtime) => {
/******/ 			for(var moduleId in moreModules) {
/******/ 				if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 					currentUpdate[moduleId] = moreModules[moduleId];
/******/ 					if(currentUpdatedModulesList) currentUpdatedModulesList.push(moduleId);
/******/ 				}
/******/ 			}
/******/ 			if(runtime) currentUpdateRuntime.push(runtime);
/******/ 			if(waitingUpdateResolves[chunkId]) {
/******/ 				waitingUpdateResolves[chunkId]();
/******/ 				waitingUpdateResolves[chunkId] = undefined;
/******/ 			}
/******/ 		};
/******/ 		
/******/ 		var currentUpdateChunks;
/******/ 		var currentUpdate;
/******/ 		var currentUpdateRemovedChunks;
/******/ 		var currentUpdateRuntime;
/******/ 		function applyHandler(options) {
/******/ 			if (__webpack_require__.f) delete __webpack_require__.f.jsonpHmr;
/******/ 			currentUpdateChunks = undefined;
/******/ 			function getAffectedModuleEffects(updateModuleId) {
/******/ 				var outdatedModules = [updateModuleId];
/******/ 				var outdatedDependencies = {};
/******/ 		
/******/ 				var queue = outdatedModules.map(function (id) {
/******/ 					return {
/******/ 						chain: [id],
/******/ 						id: id
/******/ 					};
/******/ 				});
/******/ 				while (queue.length > 0) {
/******/ 					var queueItem = queue.pop();
/******/ 					var moduleId = queueItem.id;
/******/ 					var chain = queueItem.chain;
/******/ 					var module = __webpack_require__.c[moduleId];
/******/ 					if (
/******/ 						!module ||
/******/ 						(module.hot._selfAccepted && !module.hot._selfInvalidated)
/******/ 					)
/******/ 						continue;
/******/ 					if (module.hot._selfDeclined) {
/******/ 						return {
/******/ 							type: "self-declined",
/******/ 							chain: chain,
/******/ 							moduleId: moduleId
/******/ 						};
/******/ 					}
/******/ 					if (module.hot._main) {
/******/ 						return {
/******/ 							type: "unaccepted",
/******/ 							chain: chain,
/******/ 							moduleId: moduleId
/******/ 						};
/******/ 					}
/******/ 					for (var i = 0; i < module.parents.length; i++) {
/******/ 						var parentId = module.parents[i];
/******/ 						var parent = __webpack_require__.c[parentId];
/******/ 						if (!parent) continue;
/******/ 						if (parent.hot._declinedDependencies[moduleId]) {
/******/ 							return {
/******/ 								type: "declined",
/******/ 								chain: chain.concat([parentId]),
/******/ 								moduleId: moduleId,
/******/ 								parentId: parentId
/******/ 							};
/******/ 						}
/******/ 						if (outdatedModules.indexOf(parentId) !== -1) continue;
/******/ 						if (parent.hot._acceptedDependencies[moduleId]) {
/******/ 							if (!outdatedDependencies[parentId])
/******/ 								outdatedDependencies[parentId] = [];
/******/ 							addAllToSet(outdatedDependencies[parentId], [moduleId]);
/******/ 							continue;
/******/ 						}
/******/ 						delete outdatedDependencies[parentId];
/******/ 						outdatedModules.push(parentId);
/******/ 						queue.push({
/******/ 							chain: chain.concat([parentId]),
/******/ 							id: parentId
/******/ 						});
/******/ 					}
/******/ 				}
/******/ 		
/******/ 				return {
/******/ 					type: "accepted",
/******/ 					moduleId: updateModuleId,
/******/ 					outdatedModules: outdatedModules,
/******/ 					outdatedDependencies: outdatedDependencies
/******/ 				};
/******/ 			}
/******/ 		
/******/ 			function addAllToSet(a, b) {
/******/ 				for (var i = 0; i < b.length; i++) {
/******/ 					var item = b[i];
/******/ 					if (a.indexOf(item) === -1) a.push(item);
/******/ 				}
/******/ 			}
/******/ 		
/******/ 			// at begin all updates modules are outdated
/******/ 			// the "outdated" status can propagate to parents if they don't accept the children
/******/ 			var outdatedDependencies = {};
/******/ 			var outdatedModules = [];
/******/ 			var appliedUpdate = {};
/******/ 		
/******/ 			var warnUnexpectedRequire = function warnUnexpectedRequire(module) {
/******/ 				console.warn(
/******/ 					"[HMR] unexpected require(" + module.id + ") to disposed module"
/******/ 				);
/******/ 			};
/******/ 		
/******/ 			for (var moduleId in currentUpdate) {
/******/ 				if (__webpack_require__.o(currentUpdate, moduleId)) {
/******/ 					var newModuleFactory = currentUpdate[moduleId];
/******/ 					/** @type {TODO} */
/******/ 					var result;
/******/ 					if (newModuleFactory) {
/******/ 						result = getAffectedModuleEffects(moduleId);
/******/ 					} else {
/******/ 						result = {
/******/ 							type: "disposed",
/******/ 							moduleId: moduleId
/******/ 						};
/******/ 					}
/******/ 					/** @type {Error|false} */
/******/ 					var abortError = false;
/******/ 					var doApply = false;
/******/ 					var doDispose = false;
/******/ 					var chainInfo = "";
/******/ 					if (result.chain) {
/******/ 						chainInfo = "\nUpdate propagation: " + result.chain.join(" -> ");
/******/ 					}
/******/ 					switch (result.type) {
/******/ 						case "self-declined":
/******/ 							if (options.onDeclined) options.onDeclined(result);
/******/ 							if (!options.ignoreDeclined)
/******/ 								abortError = new Error(
/******/ 									"Aborted because of self decline: " +
/******/ 										result.moduleId +
/******/ 										chainInfo
/******/ 								);
/******/ 							break;
/******/ 						case "declined":
/******/ 							if (options.onDeclined) options.onDeclined(result);
/******/ 							if (!options.ignoreDeclined)
/******/ 								abortError = new Error(
/******/ 									"Aborted because of declined dependency: " +
/******/ 										result.moduleId +
/******/ 										" in " +
/******/ 										result.parentId +
/******/ 										chainInfo
/******/ 								);
/******/ 							break;
/******/ 						case "unaccepted":
/******/ 							if (options.onUnaccepted) options.onUnaccepted(result);
/******/ 							if (!options.ignoreUnaccepted)
/******/ 								abortError = new Error(
/******/ 									"Aborted because " + moduleId + " is not accepted" + chainInfo
/******/ 								);
/******/ 							break;
/******/ 						case "accepted":
/******/ 							if (options.onAccepted) options.onAccepted(result);
/******/ 							doApply = true;
/******/ 							break;
/******/ 						case "disposed":
/******/ 							if (options.onDisposed) options.onDisposed(result);
/******/ 							doDispose = true;
/******/ 							break;
/******/ 						default:
/******/ 							throw new Error("Unexception type " + result.type);
/******/ 					}
/******/ 					if (abortError) {
/******/ 						return {
/******/ 							error: abortError
/******/ 						};
/******/ 					}
/******/ 					if (doApply) {
/******/ 						appliedUpdate[moduleId] = newModuleFactory;
/******/ 						addAllToSet(outdatedModules, result.outdatedModules);
/******/ 						for (moduleId in result.outdatedDependencies) {
/******/ 							if (__webpack_require__.o(result.outdatedDependencies, moduleId)) {
/******/ 								if (!outdatedDependencies[moduleId])
/******/ 									outdatedDependencies[moduleId] = [];
/******/ 								addAllToSet(
/******/ 									outdatedDependencies[moduleId],
/******/ 									result.outdatedDependencies[moduleId]
/******/ 								);
/******/ 							}
/******/ 						}
/******/ 					}
/******/ 					if (doDispose) {
/******/ 						addAllToSet(outdatedModules, [result.moduleId]);
/******/ 						appliedUpdate[moduleId] = warnUnexpectedRequire;
/******/ 					}
/******/ 				}
/******/ 			}
/******/ 			currentUpdate = undefined;
/******/ 		
/******/ 			// Store self accepted outdated modules to require them later by the module system
/******/ 			var outdatedSelfAcceptedModules = [];
/******/ 			for (var j = 0; j < outdatedModules.length; j++) {
/******/ 				var outdatedModuleId = outdatedModules[j];
/******/ 				if (
/******/ 					__webpack_require__.c[outdatedModuleId] &&
/******/ 					__webpack_require__.c[outdatedModuleId].hot._selfAccepted &&
/******/ 					// removed self-accepted modules should not be required
/******/ 					appliedUpdate[outdatedModuleId] !== warnUnexpectedRequire &&
/******/ 					// when called invalidate self-accepting is not possible
/******/ 					!__webpack_require__.c[outdatedModuleId].hot._selfInvalidated
/******/ 				) {
/******/ 					outdatedSelfAcceptedModules.push({
/******/ 						module: outdatedModuleId,
/******/ 						require: __webpack_require__.c[outdatedModuleId].hot._requireSelf,
/******/ 						errorHandler: __webpack_require__.c[outdatedModuleId].hot._selfAccepted
/******/ 					});
/******/ 				}
/******/ 			}
/******/ 		
/******/ 			var moduleOutdatedDependencies;
/******/ 		
/******/ 			return {
/******/ 				dispose: function () {
/******/ 					currentUpdateRemovedChunks.forEach(function (chunkId) {
/******/ 						delete installedChunks[chunkId];
/******/ 					});
/******/ 					currentUpdateRemovedChunks = undefined;
/******/ 		
/******/ 					var idx;
/******/ 					var queue = outdatedModules.slice();
/******/ 					while (queue.length > 0) {
/******/ 						var moduleId = queue.pop();
/******/ 						var module = __webpack_require__.c[moduleId];
/******/ 						if (!module) continue;
/******/ 		
/******/ 						var data = {};
/******/ 		
/******/ 						// Call dispose handlers
/******/ 						var disposeHandlers = module.hot._disposeHandlers;
/******/ 						for (j = 0; j < disposeHandlers.length; j++) {
/******/ 							disposeHandlers[j].call(null, data);
/******/ 						}
/******/ 						__webpack_require__.hmrD[moduleId] = data;
/******/ 		
/******/ 						// disable module (this disables requires from this module)
/******/ 						module.hot.active = false;
/******/ 		
/******/ 						// remove module from cache
/******/ 						delete __webpack_require__.c[moduleId];
/******/ 		
/******/ 						// when disposing there is no need to call dispose handler
/******/ 						delete outdatedDependencies[moduleId];
/******/ 		
/******/ 						// remove "parents" references from all children
/******/ 						for (j = 0; j < module.children.length; j++) {
/******/ 							var child = __webpack_require__.c[module.children[j]];
/******/ 							if (!child) continue;
/******/ 							idx = child.parents.indexOf(moduleId);
/******/ 							if (idx >= 0) {
/******/ 								child.parents.splice(idx, 1);
/******/ 							}
/******/ 						}
/******/ 					}
/******/ 		
/******/ 					// remove outdated dependency from module children
/******/ 					var dependency;
/******/ 					for (var outdatedModuleId in outdatedDependencies) {
/******/ 						if (__webpack_require__.o(outdatedDependencies, outdatedModuleId)) {
/******/ 							module = __webpack_require__.c[outdatedModuleId];
/******/ 							if (module) {
/******/ 								moduleOutdatedDependencies =
/******/ 									outdatedDependencies[outdatedModuleId];
/******/ 								for (j = 0; j < moduleOutdatedDependencies.length; j++) {
/******/ 									dependency = moduleOutdatedDependencies[j];
/******/ 									idx = module.children.indexOf(dependency);
/******/ 									if (idx >= 0) module.children.splice(idx, 1);
/******/ 								}
/******/ 							}
/******/ 						}
/******/ 					}
/******/ 				},
/******/ 				apply: function (reportError) {
/******/ 					// insert new code
/******/ 					for (var updateModuleId in appliedUpdate) {
/******/ 						if (__webpack_require__.o(appliedUpdate, updateModuleId)) {
/******/ 							__webpack_require__.m[updateModuleId] = appliedUpdate[updateModuleId];
/******/ 						}
/******/ 					}
/******/ 		
/******/ 					// run new runtime modules
/******/ 					for (var i = 0; i < currentUpdateRuntime.length; i++) {
/******/ 						currentUpdateRuntime[i](__webpack_require__);
/******/ 					}
/******/ 		
/******/ 					// call accept handlers
/******/ 					for (var outdatedModuleId in outdatedDependencies) {
/******/ 						if (__webpack_require__.o(outdatedDependencies, outdatedModuleId)) {
/******/ 							var module = __webpack_require__.c[outdatedModuleId];
/******/ 							if (module) {
/******/ 								moduleOutdatedDependencies =
/******/ 									outdatedDependencies[outdatedModuleId];
/******/ 								var callbacks = [];
/******/ 								var dependenciesForCallbacks = [];
/******/ 								for (var j = 0; j < moduleOutdatedDependencies.length; j++) {
/******/ 									var dependency = moduleOutdatedDependencies[j];
/******/ 									var acceptCallback =
/******/ 										module.hot._acceptedDependencies[dependency];
/******/ 									if (acceptCallback) {
/******/ 										if (callbacks.indexOf(acceptCallback) !== -1) continue;
/******/ 										callbacks.push(acceptCallback);
/******/ 										dependenciesForCallbacks.push(dependency);
/******/ 									}
/******/ 								}
/******/ 								for (var k = 0; k < callbacks.length; k++) {
/******/ 									try {
/******/ 										callbacks[k].call(null, moduleOutdatedDependencies);
/******/ 									} catch (err) {
/******/ 										if (options.onErrored) {
/******/ 											options.onErrored({
/******/ 												type: "accept-errored",
/******/ 												moduleId: outdatedModuleId,
/******/ 												dependencyId: dependenciesForCallbacks[k],
/******/ 												error: err
/******/ 											});
/******/ 										}
/******/ 										if (!options.ignoreErrored) {
/******/ 											reportError(err);
/******/ 										}
/******/ 									}
/******/ 								}
/******/ 							}
/******/ 						}
/******/ 					}
/******/ 		
/******/ 					// Load self accepted modules
/******/ 					for (var o = 0; o < outdatedSelfAcceptedModules.length; o++) {
/******/ 						var item = outdatedSelfAcceptedModules[o];
/******/ 						var moduleId = item.module;
/******/ 						try {
/******/ 							item.require(moduleId);
/******/ 						} catch (err) {
/******/ 							if (typeof item.errorHandler === "function") {
/******/ 								try {
/******/ 									item.errorHandler(err);
/******/ 								} catch (err2) {
/******/ 									if (options.onErrored) {
/******/ 										options.onErrored({
/******/ 											type: "self-accept-error-handler-errored",
/******/ 											moduleId: moduleId,
/******/ 											error: err2,
/******/ 											originalError: err
/******/ 										});
/******/ 									}
/******/ 									if (!options.ignoreErrored) {
/******/ 										reportError(err2);
/******/ 									}
/******/ 									reportError(err);
/******/ 								}
/******/ 							} else {
/******/ 								if (options.onErrored) {
/******/ 									options.onErrored({
/******/ 										type: "self-accept-errored",
/******/ 										moduleId: moduleId,
/******/ 										error: err
/******/ 									});
/******/ 								}
/******/ 								if (!options.ignoreErrored) {
/******/ 									reportError(err);
/******/ 								}
/******/ 							}
/******/ 						}
/******/ 					}
/******/ 		
/******/ 					return outdatedModules;
/******/ 				}
/******/ 			};
/******/ 		}
/******/ 		__webpack_require__.hmrI.jsonp = function (moduleId, applyHandlers) {
/******/ 			if (!currentUpdate) {
/******/ 				currentUpdate = {};
/******/ 				currentUpdateRuntime = [];
/******/ 				currentUpdateRemovedChunks = [];
/******/ 				applyHandlers.push(applyHandler);
/******/ 			}
/******/ 			if (!__webpack_require__.o(currentUpdate, moduleId)) {
/******/ 				currentUpdate[moduleId] = __webpack_require__.m[moduleId];
/******/ 			}
/******/ 		};
/******/ 		__webpack_require__.hmrC.jsonp = function (
/******/ 			chunkIds,
/******/ 			removedChunks,
/******/ 			removedModules,
/******/ 			promises,
/******/ 			applyHandlers,
/******/ 			updatedModulesList
/******/ 		) {
/******/ 			applyHandlers.push(applyHandler);
/******/ 			currentUpdateChunks = {};
/******/ 			currentUpdateRemovedChunks = removedChunks;
/******/ 			currentUpdate = removedModules.reduce(function (obj, key) {
/******/ 				obj[key] = false;
/******/ 				return obj;
/******/ 			}, {});
/******/ 			currentUpdateRuntime = [];
/******/ 			chunkIds.forEach(function (chunkId) {
/******/ 				if (
/******/ 					__webpack_require__.o(installedChunks, chunkId) &&
/******/ 					installedChunks[chunkId] !== undefined
/******/ 				) {
/******/ 					promises.push(loadUpdateChunk(chunkId, updatedModulesList));
/******/ 					currentUpdateChunks[chunkId] = true;
/******/ 				}
/******/ 			});
/******/ 			if (__webpack_require__.f) {
/******/ 				__webpack_require__.f.jsonpHmr = function (chunkId, promises) {
/******/ 					if (
/******/ 						currentUpdateChunks &&
/******/ 						!__webpack_require__.o(currentUpdateChunks, chunkId) &&
/******/ 						__webpack_require__.o(installedChunks, chunkId) &&
/******/ 						installedChunks[chunkId] !== undefined
/******/ 					) {
/******/ 						promises.push(loadUpdateChunk(chunkId));
/******/ 						currentUpdateChunks[chunkId] = true;
/******/ 					}
/******/ 				};
/******/ 			}
/******/ 		};
/******/ 		
/******/ 		__webpack_require__.hmrM = () => {
/******/ 			if (typeof fetch === "undefined") throw new Error("No browser support: need fetch API");
/******/ 			return fetch(__webpack_require__.p + __webpack_require__.hmrF()).then((response) => {
/******/ 				if(response.status === 404) return; // no update available
/******/ 				if(!response.ok) throw new Error("Failed to fetch update manifest " + response.statusText);
/******/ 				return response.json();
/******/ 			});
/******/ 		};
/******/ 		
/******/ 		// no deferred startup
/******/ 		
/******/ 		// no jsonp function
/******/ 		
/******/ 		// no deferred startup
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// module cache are used so entry inlining is disabled
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	var __webpack_exports__ = __webpack_require__("./src/ts/main.ts");
/******/ 	
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9UZXRyaXMvLi9zcmMvdHMvZmFjdG9yeS9jdWJlLnRzIiwid2VicGFjazovL1RldHJpcy8uL3NyYy90cy9mYWN0b3J5L2dhbWVXaW5kb3cudHMiLCJ3ZWJwYWNrOi8vVGV0cmlzLy4vc3JjL3RzL2ZhY3RvcnkvcG9pbnQudHMiLCJ3ZWJwYWNrOi8vVGV0cmlzLy4vc3JjL3RzL2ZhY3RvcnkvdGV0cmlzLnRzIiwid2VicGFjazovL1RldHJpcy8uL3NyYy90cy9nYW1lL2FjdGlvbi9jb25jcmV0ZS9rZXlib2FyZC50cyIsIndlYnBhY2s6Ly9UZXRyaXMvLi9zcmMvdHMvZ2FtZS9iZWhhdmlvclJlc29sdmVyLnRzIiwid2VicGFjazovL1RldHJpcy8uL3NyYy90cy9nYW1lL2NvbGxpc2lvbi50cyIsIndlYnBhY2s6Ly9UZXRyaXMvLi9zcmMvdHMvZ2FtZS9jb250ZXh0LnRzIiwid2VicGFjazovL1RldHJpcy8uL3NyYy90cy9nYW1lL2N1YmVFbGltaW5hdG9yLnRzIiwid2VicGFjazovL1RldHJpcy8uL3NyYy90cy9nYW1lL2dhbWUudHMiLCJ3ZWJwYWNrOi8vVGV0cmlzLy4vc3JjL3RzL2dhbWUvd2luZG93L2NvbmNyZXRlL2dhbWVXaW5kb3cudHMiLCJ3ZWJwYWNrOi8vVGV0cmlzLy4vc3JjL3RzL2dhbWUvd2luZG93L2dhbWVXaW5kb3cudHMiLCJ3ZWJwYWNrOi8vVGV0cmlzLy4vc3JjL3RzL2hlbHBlci9hcnJheS50cyIsIndlYnBhY2s6Ly9UZXRyaXMvLi9zcmMvdHMvbWFpbi50cyIsIndlYnBhY2s6Ly9UZXRyaXMvLi9zcmMvdHMvdXRpbC9wb2ludC50cyIsIndlYnBhY2s6Ly9UZXRyaXMvLi9zcmMvdHMvdXRpbC90aW1lci50cyIsIndlYnBhY2s6Ly9UZXRyaXMvLi9zcmMvdHMvd2lkZ2V0cy9jb25jcmV0ZS90ZXRyaXNlcy50cyIsIndlYnBhY2s6Ly9UZXRyaXMvLi9zcmMvdHMvd2lkZ2V0cy9jdWJlLnRzIiwid2VicGFjazovL1RldHJpcy8uL3NyYy90cy93aWRnZXRzL3RldHJpcy50cyIsIndlYnBhY2s6Ly9UZXRyaXMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vVGV0cmlzL3dlYnBhY2svcnVudGltZS9nZXQgamF2YXNjcmlwdCB1cGRhdGUgY2h1bmsgZmlsZW5hbWUiLCJ3ZWJwYWNrOi8vVGV0cmlzL3dlYnBhY2svcnVudGltZS9nZXQgdXBkYXRlIG1hbmlmZXN0IGZpbGVuYW1lIiwid2VicGFjazovL1RldHJpcy93ZWJwYWNrL3J1bnRpbWUvZ2V0RnVsbEhhc2giLCJ3ZWJwYWNrOi8vVGV0cmlzL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vVGV0cmlzL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vVGV0cmlzL3dlYnBhY2svcnVudGltZS9sb2FkIHNjcmlwdCIsIndlYnBhY2s6Ly9UZXRyaXMvd2VicGFjay9ydW50aW1lL2hvdCBtb2R1bGUgcmVwbGFjZW1lbnQiLCJ3ZWJwYWNrOi8vVGV0cmlzL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL1RldHJpcy93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly9UZXRyaXMvd2VicGFjay9zdGFydHVwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBYTtBQUNiO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0EsOENBQTZDLENBQUMsY0FBYyxFQUFDO0FBQzdELDZCQUE2QixtQkFBTyxDQUFDLGlEQUFpQjtBQUN0RCw4QkFBOEIsbUJBQU8sQ0FBQywwQ0FBUztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixtQ0FBbUM7QUFDaEU7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGVBQWU7Ozs7Ozs7Ozs7O0FDaEJGO0FBQ2I7QUFDQSxpREFBaUQsUUFBUTtBQUN6RCx3Q0FBd0MsUUFBUTtBQUNoRCx3REFBd0QsUUFBUTtBQUNo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QUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQSxHQUFHOztXQUVIO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLEdBQUc7V0FDSDtXQUNBO1dBQ0EsR0FBRztXQUNIO1dBQ0E7V0FDQTtXQUNBLEdBQUc7O1dBRUg7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBOztXQUVBO1dBQ0E7V0FDQSxnQkFBZ0IscUNBQXFDO1dBQ3JEO1dBQ0E7O1dBRUE7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQSxJQUFJO1dBQ0o7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTs7V0FFQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQSxFQUFFO1dBQ0Y7O1dBRUE7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7O1dBRUE7O1dBRUE7V0FDQTtXQUNBOztXQUVBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQSxJQUFJO1dBQ0o7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLEtBQUs7V0FDTDs7V0FFQTtXQUNBO1dBQ0EsSUFBSTtXQUNKLEdBQUc7V0FDSCxFQUFFO1dBQ0Y7O1dBRUE7V0FDQTtXQUNBO1dBQ0E7V0FDQSxHQUFHO1dBQ0g7V0FDQTtXQUNBOztXQUVBO1dBQ0E7O1dBRUE7O1dBRUE7V0FDQTtXQUNBLEVBQUU7V0FDRjs7V0FFQTtXQUNBO1dBQ0E7V0FDQSxHQUFHO1dBQ0g7O1dBRUE7V0FDQTtXQUNBO1dBQ0E7V0FDQSxHQUFHO1dBQ0g7O1dBRUE7V0FDQTs7V0FFQTtXQUNBO1dBQ0EsRUFBRTs7V0FFRjtXQUNBOztXQUVBO1dBQ0E7V0FDQTtXQUNBOztXQUVBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQSxtQkFBbUIsb0JBQW9CO1dBQ3ZDO1dBQ0E7V0FDQTtXQUNBO1dBQ0EsRUFBRTs7V0FFRjtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0EsR0FBRztXQUNIOztXQUVBO1dBQ0E7V0FDQTtXQUNBO1dBQ0EsSUFBSTtXQUNKO1dBQ0EsR0FBRztXQUNIOztXQUVBO1dBQ0E7V0FDQTs7V0FFQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQSxJQUFJO1dBQ0osR0FBRztXQUNIO1dBQ0E7V0FDQTtXQUNBLEM7Ozs7O1dDdFdBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLGtDOzs7OztXQ2ZBOztXQUVBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTs7O1dBR0E7O1dBRUE7O1dBRUE7O1dBRUE7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQSxFQUFFO1dBQ0Y7O1dBRUE7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7O1dBRUE7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7O1dBRUE7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLEdBQUc7V0FDSDtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQSxrQkFBa0IsMkJBQTJCO1dBQzdDO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQSxLQUFLO1dBQ0w7V0FDQTs7V0FFQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTs7V0FFQTtXQUNBLGlCQUFpQixjQUFjO1dBQy9CO1dBQ0E7V0FDQTtXQUNBOztXQUVBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7O1dBRUE7V0FDQTtXQUNBO1dBQ0E7V0FDQTs7V0FFQTtXQUNBO1dBQ0E7V0FDQSxjQUFjLEtBQUs7V0FDbkI7V0FDQTtXQUNBO1dBQ0EsSUFBSTtXQUNKO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQSxjQUFjLFlBQVk7V0FDMUI7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBOztXQUVBO1dBQ0E7V0FDQSxnQkFBZ0IsNEJBQTRCO1dBQzVDO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0EsSUFBSTtXQUNKO1dBQ0E7O1dBRUE7O1dBRUE7V0FDQTtXQUNBO1dBQ0E7V0FDQSxJQUFJO1dBQ0o7O1dBRUE7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBOztXQUVBOztXQUVBO1dBQ0E7V0FDQSxlQUFlLDRCQUE0QjtXQUMzQztXQUNBO1dBQ0E7O1dBRUE7V0FDQTs7V0FFQTtXQUNBOztXQUVBO1dBQ0E7O1dBRUE7V0FDQSxlQUFlLDRCQUE0QjtXQUMzQztXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBOztXQUVBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQSxpQkFBaUIsdUNBQXVDO1dBQ3hEO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0EsR0FBRztXQUNIO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBOztXQUVBO1dBQ0Esa0JBQWtCLGlDQUFpQztXQUNuRDtXQUNBOztXQUVBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLHFCQUFxQix1Q0FBdUM7V0FDNUQ7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0EscUJBQXFCLHNCQUFzQjtXQUMzQztXQUNBO1dBQ0EsUUFBUTtXQUNSO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLFVBQVU7V0FDVjtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7O1dBRUE7V0FDQSxrQkFBa0Isd0NBQXdDO1dBQzFEO1dBQ0E7V0FDQTtXQUNBO1dBQ0EsS0FBSztXQUNMO1dBQ0E7V0FDQTtXQUNBLE9BQU87V0FDUDtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQSxTQUFTO1dBQ1Q7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0EsTUFBTTtXQUNOO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQSxRQUFRO1dBQ1I7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7O1dBRUE7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLEVBQUUsSUFBSTtXQUNOO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLEVBQUU7V0FDRjtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBOztXQUVBO1dBQ0E7V0FDQTtXQUNBLHFDQUFxQztXQUNyQztXQUNBO1dBQ0EsRUFBRTtXQUNGOztXQUVBOztXQUVBOztXQUVBLHNCOzs7OztVQ2hlQTtVQUNBO1VBQ0E7VUFDQSIsImZpbGUiOiJidW5kbGUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGN1YmVfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vd2lkZ2V0cy9jdWJlXCIpKTtcclxudmFyIHBvaW50XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vcG9pbnRcIikpO1xyXG52YXIgQ3ViZUZhY3RvcnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDdWJlRmFjdG9yeSgpIHtcclxuICAgIH1cclxuICAgIEN1YmVGYWN0b3J5LmNyZWF0ZSA9IGZ1bmN0aW9uIChyZWxhdGlvblBvcywgcG9zKSB7XHJcbiAgICAgICAgaWYgKHBvcyA9PT0gdm9pZCAwKSB7IHBvcyA9IHBvaW50XzEuZGVmYXVsdC5jcmVhdGVNaW4oKTsgfVxyXG4gICAgICAgIHJldHVybiBuZXcgY3ViZV8xLmRlZmF1bHQocmVsYXRpb25Qb3MsIHBvcyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEN1YmVGYWN0b3J5O1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBDdWJlRmFjdG9yeTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX3NwcmVhZEFycmF5cyA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheXMpIHx8IGZ1bmN0aW9uICgpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBnYW1lV2luZG93XzEgPSByZXF1aXJlKFwiLi4vZ2FtZS93aW5kb3cvY29uY3JldGUvZ2FtZVdpbmRvd1wiKTtcclxudmFyIEdhbWVXaW5kb3dGYWN0b3J5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gR2FtZVdpbmRvd0ZhY3RvcnkoKSB7XHJcbiAgICB9XHJcbiAgICBHYW1lV2luZG93RmFjdG9yeS5jcmVhdGUgPSBmdW5jdGlvbiAodHlwZSkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v6Ly45YWl55qE6aGe5Yil5ZCN56ix54K6c3RvcmXntIDpjITnmoTlsazmgKfmmYLnlJ/miJDlsI3mh4nnmoRUZXRyaXNcclxuICAgICAgICB2YXIgZ2FtZVdpbmRvdyA9IG5ldyAoKF9hID0gZ2FtZVdpbmRvd18xLlR5cGVzW3R5cGVdKS5iaW5kLmFwcGx5KF9hLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpO1xyXG4gICAgICAgIHJldHVybiBnYW1lV2luZG93O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBHYW1lV2luZG93RmFjdG9yeTtcclxufSgpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gR2FtZVdpbmRvd0ZhY3Rvcnk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBwb2ludF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi91dGlsL3BvaW50XCIpKTtcclxudmFyIFBvaW50RmFjdG9yeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFBvaW50RmFjdG9yeSgpIHtcclxuICAgIH1cclxuICAgIFBvaW50RmFjdG9yeS5jcmVhdGUgPSBmdW5jdGlvbiAoeCwgeSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgcG9pbnRfMS5kZWZhdWx0KHgsIHkpO1xyXG4gICAgfTtcclxuICAgIFBvaW50RmFjdG9yeS5jcmVhdGVCeVBvaW50ID0gZnVuY3Rpb24gKHApIHtcclxuICAgICAgICB2YXIgeCA9IHAueCwgeSA9IHAueTtcclxuICAgICAgICByZXR1cm4gbmV3IHBvaW50XzEuZGVmYXVsdCh4LCB5KTtcclxuICAgIH07XHJcbiAgICBQb2ludEZhY3RvcnkuY3JlYXRlTWluID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgcG9pbnRfMS5kZWZhdWx0KE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLCBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFBvaW50RmFjdG9yeTtcclxufSgpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gUG9pbnRGYWN0b3J5O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgdGV0cmlzZXNfMSA9IHJlcXVpcmUoXCIuLi93aWRnZXRzL2NvbmNyZXRlL3RldHJpc2VzXCIpO1xyXG52YXIgcG9pbnRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9wb2ludFwiKSk7XHJcbnZhciBUZXRyaXNGYWN0b3J5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVGV0cmlzRmFjdG9yeSgpIHtcclxuICAgIH1cclxuICAgIFRldHJpc0ZhY3RvcnkuY3JlYXRlID0gZnVuY3Rpb24gKHRldHJpc1R5cGUpIHtcclxuICAgICAgICAvL+i8uOWFpeeahOmhnuWIpeWQjeeoseeCunN0b3Jl57SA6YyE55qE5bGs5oCn5pmC55Sf5oiQ5bCN5oeJ55qEVGV0cmlzXHJcbiAgICAgICAgdmFyIHRldHJpcyA9IG5ldyB0ZXRyaXNlc18xLlR5cGVzW3RldHJpc1R5cGVdKCk7XHJcbiAgICAgICAgcmV0dXJuIHRldHJpcztcclxuICAgIH07XHJcbiAgICBUZXRyaXNGYWN0b3J5LmNyZWF0ZVJhbmRvbSA9IGZ1bmN0aW9uIChzY2VuZUNvbHVtbikge1xyXG4gICAgICAgIHZhciB0ZXRyaXMgPSBUZXRyaXNGYWN0b3J5LnJhbmRvbVBpY2tUZXRyaXMoKTtcclxuICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3Ioc2NlbmVDb2x1bW4gLyAyIC0gdGV0cmlzLndpZHRoIC8gMik7XHJcbiAgICAgICAgdGV0cmlzLnJhbmRvbVJvdGF0ZVNoYXBlKCk7XHJcbiAgICAgICAgdGV0cmlzLm9yaWdpblBvcyA9IHBvaW50XzEuZGVmYXVsdC5jcmVhdGUoeCwgMCk7XHJcbiAgICAgICAgcmV0dXJuIHRldHJpcztcclxuICAgIH07XHJcbiAgICBUZXRyaXNGYWN0b3J5LnJhbmRvbVBpY2tUZXRyaXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHR5cGVzID0gT2JqZWN0LmtleXModGV0cmlzZXNfMS5UeXBlcyk7XHJcbiAgICAgICAgdmFyIHJhbmRvbSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHR5cGVzLmxlbmd0aCk7XHJcbiAgICAgICAgdmFyIHBpY2sgPSB0eXBlc1tyYW5kb21dO1xyXG4gICAgICAgIHJldHVybiBUZXRyaXNGYWN0b3J5LmNyZWF0ZShwaWNrKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVGV0cmlzRmFjdG9yeTtcclxufSgpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gVGV0cmlzRmFjdG9yeTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5hY3Rpb25zID0gdm9pZCAwO1xyXG52YXIgYmVoYXZpb3JSZXNvbHZlcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi8uLi9iZWhhdmlvclJlc29sdmVyXCIpKTtcclxudmFyIG1vdmVMZWZ0ID0gZnVuY3Rpb24gKGV2ZW50LCBjb250ZXh0KSB7XHJcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkFycm93TGVmdFwiKSB7XHJcbiAgICAgICAgY29udGV4dC5jdXJyVGV0cmlzLmxlZnQoKTtcclxuICAgIH1cclxufTtcclxudmFyIG1vdmVSaWdodCA9IGZ1bmN0aW9uIChldmVudCwgY29udGV4dCkge1xyXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJBcnJvd1JpZ2h0XCIpIHtcclxuICAgICAgICBjb250ZXh0LmN1cnJUZXRyaXMucmlnaHQoKTtcclxuICAgIH1cclxufTtcclxudmFyIHJvdGF0ZSA9IGZ1bmN0aW9uIChldmVudCwgY29udGV4dCkge1xyXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJBcnJvd1VwXCIpIHtcclxuICAgICAgICBjb250ZXh0LmN1cnJUZXRyaXMucm90YXRlKCk7XHJcbiAgICB9XHJcbn07XHJcbnZhciBob2xkID0gZnVuY3Rpb24gKGV2ZW50LCBjb250ZXh0KSB7XHJcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcImNcIiAmJiBjb250ZXh0LmNhbkhvbGQpIHtcclxuICAgICAgICBjb250ZXh0LmNhbkhvbGQgPSBmYWxzZTtcclxuICAgICAgICBpZiAoY29udGV4dC5ob2xkVGV0cmlzKSB7XHJcbiAgICAgICAgICAgIHZhciB0ZW1wQ3VyciA9IGNvbnRleHQuY3VyclRldHJpcztcclxuICAgICAgICAgICAgY29udGV4dC5jdXJyVGV0cmlzID0gY29udGV4dC5ob2xkVGV0cmlzO1xyXG4gICAgICAgICAgICBjb250ZXh0LmN1cnJUZXRyaXMucG9zSW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICBjb250ZXh0LmhvbGRUZXRyaXMgPSB0ZW1wQ3VycjtcclxuICAgICAgICAgICAgY29udGV4dC50ZXRyaXNlcyA9IGNvbnRleHQudGV0cmlzZXMuZmlsdGVyKGZ1bmN0aW9uICh0ZXRyaXMpIHsgcmV0dXJuIHRldHJpcyAhPT0gY29udGV4dC5ob2xkVGV0cmlzOyB9KTtcclxuICAgICAgICAgICAgY29udGV4dC50ZXRyaXNlcy5wdXNoKGNvbnRleHQuY3VyclRldHJpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb250ZXh0LmhvbGRUZXRyaXMgPSBjb250ZXh0LmN1cnJUZXRyaXM7XHJcbiAgICAgICAgICAgIGJlaGF2aW9yUmVzb2x2ZXJfMS5kZWZhdWx0LnVwZGF0ZUN1cnJBbmRQcmVwYXJlKGNvbnRleHQpO1xyXG4gICAgICAgICAgICBjb250ZXh0LnRldHJpc2VzID0gY29udGV4dC50ZXRyaXNlcy5maWx0ZXIoZnVuY3Rpb24gKHRldHJpcykgeyByZXR1cm4gdGV0cmlzICE9PSBjb250ZXh0LmhvbGRUZXRyaXM7IH0pO1xyXG4gICAgICAgICAgICBjb250ZXh0LmN1cnJUZXRyaXMucG9zSW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICBjb250ZXh0LmhvbGRUZXRyaXMucG9zSW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb250ZXh0LmhvbGRXaW5kb3cucmVuZGVyKFtjb250ZXh0LmhvbGRUZXRyaXNdKTtcclxuICAgIH1cclxufTtcclxudmFyIHNvZnREcm9wID0gZnVuY3Rpb24gKGV2ZW50LCBjb250ZXh0KSB7XHJcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkFycm93RG93blwiKSB7XHJcbiAgICAgICAgaWYgKCFjb250ZXh0LnNvZnREb3duKSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQuZG93blRpbWVyLm1zID0gY29udGV4dC5kb3duVGltZXIubXMgLSBjb250ZXh0LnNwZWVkSW5jcmVhc2U7XHJcbiAgICAgICAgICAgIGNvbnRleHQuc29mdERvd24gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxudmFyIHJlc3RvcmVTb2Z0RHJvcCA9IGZ1bmN0aW9uIChldmVudCwgY29udGV4dCkge1xyXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJBcnJvd0Rvd25cIikge1xyXG4gICAgICAgIGlmIChjb250ZXh0LnNvZnREb3duKSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQuZG93blRpbWVyLm1zID0gY29udGV4dC5kb3duVGltZXIubXMgKyBjb250ZXh0LnNwZWVkSW5jcmVhc2U7XHJcbiAgICAgICAgICAgIGNvbnRleHQuc29mdERvd24gPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbnZhciBoYXJkRHJvcCA9IGZ1bmN0aW9uIChldmVudCwgY29udGV4dCkge1xyXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCIgXCIpIHtcclxuICAgICAgICBjb250ZXh0LmRvd25UaW1lci5tcyA9IDA7XHJcbiAgICB9XHJcbn07XHJcbnZhciBhY3Rpb25zID0ge1xyXG4gICAga2V5ZG93bjogW21vdmVMZWZ0LCBtb3ZlUmlnaHQsIHJvdGF0ZSwgc29mdERyb3AsIGhhcmREcm9wLCBob2xkXSxcclxuICAgIGtleXVwOiBbcmVzdG9yZVNvZnREcm9wXSxcclxufTtcclxuZXhwb3J0cy5hY3Rpb25zID0gYWN0aW9ucztcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHRldHJpc18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9mYWN0b3J5L3RldHJpc1wiKSk7XHJcbnZhciB0ZXRyaXNfMiA9IHJlcXVpcmUoXCIuLi93aWRnZXRzL3RldHJpc1wiKTtcclxudmFyIGN1YmVFbGltaW5hdG9yXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vY3ViZUVsaW1pbmF0b3JcIikpO1xyXG52YXIgR2FtZUJlaGF2aW9yUmVzb2x2ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBHYW1lQmVoYXZpb3JSZXNvbHZlcigpIHtcclxuICAgIH1cclxuICAgIEdhbWVCZWhhdmlvclJlc29sdmVyLmNsZWFyQ3ViZXMgPSBmdW5jdGlvbiAoY29udGV4dCkge1xyXG4gICAgICAgIGNvbnRleHQuZG93blRpbWVyLnN0b3AoKTtcclxuICAgICAgICB2YXIgY2xlYXJZID0gY3ViZUVsaW1pbmF0b3JfMS5kZWZhdWx0LmNsZWFyKGNvbnRleHQuZ2FtZVdpbmRvdy53aWR0aCwgY29udGV4dC5nYW1lV2luZG93LmhlaWdodCwgY29udGV4dC50ZXRyaXNlcyk7XHJcbiAgICAgICAgY29udGV4dC50ZXRyaXNlcy5mb3JFYWNoKGZ1bmN0aW9uICh0ZXRyaXMpIHtcclxuICAgICAgICAgICAgdGV0cmlzLmN1YmVzLmZvckVhY2goZnVuY3Rpb24gKGN1YmUpIHtcclxuICAgICAgICAgICAgICAgIC8v5LiL6ZmN6YePXHJcbiAgICAgICAgICAgICAgICB2YXIgZG93biA9IGNsZWFyWS5maWx0ZXIoZnVuY3Rpb24gKHkpIHsgcmV0dXJuIHkgPiBjdWJlLnBvcy55OyB9KS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBjdWJlLnBvcyA9IGN1YmUucG9zLnBsdXNZKGRvd24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb250ZXh0LmRvd25UaW1lci5zdGFydCgpO1xyXG4gICAgfTtcclxuICAgIEdhbWVCZWhhdmlvclJlc29sdmVyLnVwZGF0ZUN1cnJBbmRQcmVwYXJlID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcclxuICAgICAgICBjb250ZXh0LmN1cnJUZXRyaXMgPSBjb250ZXh0LnByZXBhcmVUZXRyaXNlcy5zaGlmdCgpO1xyXG4gICAgICAgIGNvbnRleHQudGV0cmlzZXMucHVzaChjb250ZXh0LmN1cnJUZXRyaXMpO1xyXG4gICAgICAgIGNvbnRleHQucHJlcGFyZVRldHJpc2VzLnB1c2godGV0cmlzXzEuZGVmYXVsdC5jcmVhdGVSYW5kb20oY29udGV4dC5nYW1lV2luZG93LndpZHRoKSk7XHJcbiAgICAgICAgR2FtZUJlaGF2aW9yUmVzb2x2ZXIucmVuZGVyUHJlcGFyZVdpbmRvdyhjb250ZXh0KTtcclxuICAgIH07XHJcbiAgICBHYW1lQmVoYXZpb3JSZXNvbHZlci53aW5kb3dJbml0ID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcclxuICAgICAgICBjb250ZXh0LmdhbWVXaW5kb3cuY2xlYXIoKTtcclxuICAgICAgICBjb250ZXh0LmdhbWVXaW5kb3cucmVuZGVyR3JpZCgpO1xyXG4gICAgICAgIGNvbnRleHQucHJlcGFyZVdpbmRvdy5mb3JFYWNoKGZ1bmN0aW9uICh3KSB7IHJldHVybiB3LmNsZWFyKCk7IH0pO1xyXG4gICAgICAgIGNvbnRleHQuaG9sZFdpbmRvdy5jbGVhcigpO1xyXG4gICAgfTtcclxuICAgIEdhbWVCZWhhdmlvclJlc29sdmVyLnJlbmRlclByZXBhcmVXaW5kb3cgPSBmdW5jdGlvbiAoY29udGV4dCkge1xyXG4gICAgICAgIGNvbnRleHQucHJlcGFyZVdpbmRvdy5mb3JFYWNoKGZ1bmN0aW9uICh3LCBpKSB7XHJcbiAgICAgICAgICAgIHcucmVuZGVyKFtjb250ZXh0LnByZXBhcmVUZXRyaXNlc1tpXV0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEdhbWVCZWhhdmlvclJlc29sdmVyLnVwQ3VyclRldHJpcyA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XHJcbiAgICAgICAgdmFyIGN1cnJUZXRyaXMgPSBjb250ZXh0LmN1cnJUZXRyaXM7XHJcbiAgICAgICAgdmFyIHNoYXBlID0gY3VyclRldHJpcy5jdXJyZW50U2hhcGU7XHJcbiAgICAgICAgdmFyIHdpZHRoID0gY3VyclRldHJpcy53aWR0aCwgaGVpZ2h0ID0gY3VyclRldHJpcy5oZWlnaHQ7XHJcbiAgICAgICAgLy/kuIrnp7vph48gPSBfY3VyclNoYXBl56ys5LiA6KGM6IiH5pyJ5a6a576p55qE56ys5LiA6KGM5LmL6Led6ZuiXHJcbiAgICAgICAgZm9yICh2YXIgciA9IDA7IHIgPCBoZWlnaHQ7IHIrKykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBjID0gMDsgYyA8IHdpZHRoOyBjKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChzaGFwZVtyXVtjXSA9PT0gdGV0cmlzXzIuU2hhcGVWYWx1ZS5ERUZJTkVEKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyclRldHJpcy5wb3MgPSBjdXJyVGV0cmlzLnBvcy5zdWJ0cmFjdFkocik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy/kuIrnp7tfY3VyclNoYXBl5LmL6auY5bqmIC0gMVxyXG4gICAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgaGVpZ2h0IC0gMTsgcisrKSB7XHJcbiAgICAgICAgICAgIGN1cnJUZXRyaXMudXAoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgR2FtZUJlaGF2aW9yUmVzb2x2ZXIuY3VyclRldHJpc0Rvd24gPSBmdW5jdGlvbiAoY29udGV4dCkge1xyXG4gICAgICAgIGNvbnRleHQuY3VyclRldHJpcy5kb3duKCk7XHJcbiAgICAgICAgY29udGV4dC5pc0Rvd24gPSB0cnVlO1xyXG4gICAgfTtcclxuICAgIEdhbWVCZWhhdmlvclJlc29sdmVyLm5leHRUaWNrID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcclxuICAgICAgICAvL+acqueZvOeUn+eisOaSnlxyXG4gICAgICAgIGlmICghY29udGV4dC5jb2xsaXNpb24uaXNDb2xsaXNpb24oY29udGV4dC5jdXJyVGV0cmlzLCBjb250ZXh0LnRldHJpc2VzKSkge1xyXG4gICAgICAgICAgICBjb250ZXh0LmN1cnJUZXRyaXMudXBkYXRlKCk7IC8v5pu05paw54++5Zyo5L2N572uXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9jb2xsaXNpb25cclxuICAgICAgICBpZiAoY29udGV4dC5pc0Rvd24pIHtcclxuICAgICAgICAgICAgLy/lvqnljp90aW1lcumWk+malFxyXG4gICAgICAgICAgICBjb250ZXh0LmRvd25UaW1lci5tcyA9IGNvbnRleHQuZG93bkludGVydmFsO1xyXG4gICAgICAgICAgICAvL2dhbWVvdmVyKOeZvOeUn+eisOaSnuS4lHRldHJpc+eahGN1YmVz55qEeemDveWwj+aWvDApXHJcbiAgICAgICAgICAgIGlmIChjb250ZXh0LmN1cnJUZXRyaXMuY3ViZXMuZmlsdGVyKGZ1bmN0aW9uIChjdWJlKSB7IHJldHVybiBjdWJlLnBvcy55ID49IDA7IH0pLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5nYW1lV2luZG93LnJlbmRlclRldHJpcyhjb250ZXh0LnRldHJpc2VzKTtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQuZ2FtZW92ZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v5raI6Zmk5pa55aGKXHJcbiAgICAgICAgICAgIEdhbWVCZWhhdmlvclJlc29sdmVyLmNsZWFyQ3ViZXMoY29udGV4dCk7XHJcbiAgICAgICAgICAgIC8v55Si55Sf5paw5pa55aGKXHJcbiAgICAgICAgICAgIEdhbWVCZWhhdmlvclJlc29sdmVyLnVwZGF0ZUN1cnJBbmRQcmVwYXJlKGNvbnRleHQpO1xyXG4gICAgICAgICAgICBjb250ZXh0LnNvZnREb3duID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGNvbnRleHQuY2FuSG9sZCA9IHRydWU7XHJcbiAgICAgICAgICAgIC8v5Ymb55Si55Sf5bCx55m855Sf56Kw5pKeXHJcbiAgICAgICAgICAgIGlmIChjb250ZXh0LmNvbGxpc2lvbi5pc0NvbGxpc2lvblRldHJpcyhjb250ZXh0LmN1cnJUZXRyaXMsIGNvbnRleHQudGV0cmlzZXMpKSB7XHJcbiAgICAgICAgICAgICAgICBHYW1lQmVoYXZpb3JSZXNvbHZlci51cEN1cnJUZXRyaXMoY29udGV4dCk7IC8v5LiK56e7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmN1cnJUZXRyaXMudXBkYXRlKCk7IC8v5pu05paw54++5Zyo5L2N572uXHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmdhbWVXaW5kb3cucmVuZGVyVGV0cmlzKGNvbnRleHQudGV0cmlzZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnRleHQuY3VyclRldHJpcy5iYWNrKCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEdhbWVCZWhhdmlvclJlc29sdmVyO1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBHYW1lQmVoYXZpb3JSZXNvbHZlcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5Cb3VuZGFyeVR5cGUgPSB2b2lkIDA7XHJcbnZhciBCb3VuZGFyeVR5cGU7XHJcbihmdW5jdGlvbiAoQm91bmRhcnlUeXBlKSB7XHJcbiAgICBCb3VuZGFyeVR5cGVbQm91bmRhcnlUeXBlW1wiVG9wXCJdID0gMF0gPSBcIlRvcFwiO1xyXG4gICAgQm91bmRhcnlUeXBlW0JvdW5kYXJ5VHlwZVtcIkJvdHRvbVwiXSA9IDFdID0gXCJCb3R0b21cIjtcclxuICAgIEJvdW5kYXJ5VHlwZVtCb3VuZGFyeVR5cGVbXCJMZWZ0XCJdID0gMl0gPSBcIkxlZnRcIjtcclxuICAgIEJvdW5kYXJ5VHlwZVtCb3VuZGFyeVR5cGVbXCJSaWdodFwiXSA9IDNdID0gXCJSaWdodFwiO1xyXG59KShCb3VuZGFyeVR5cGUgPSBleHBvcnRzLkJvdW5kYXJ5VHlwZSB8fCAoZXhwb3J0cy5Cb3VuZGFyeVR5cGUgPSB7fSkpO1xyXG52YXIgQ29sbGlzaW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQ29sbGlzaW9uKGJvdW5kYXJ5LCBpZ25vcmUpIHtcclxuICAgICAgICBpZiAoaWdub3JlID09PSB2b2lkIDApIHsgaWdub3JlID0gW107IH1cclxuICAgICAgICB0aGlzLl9ib3VuZGFyeSA9IGJvdW5kYXJ5O1xyXG4gICAgICAgIHRoaXMuX2lnbm9yZSA9IGlnbm9yZTtcclxuICAgIH1cclxuICAgIENvbGxpc2lvbi5wcm90b3R5cGUuaXNDb2xsaXNpb25UZXRyaXMgPSBmdW5jdGlvbiAodGFyZ2V0LCB0ZXRyaXNlcykge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGV0cmlzZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJUZXRyaXMgPSB0ZXRyaXNlc1tpXTtcclxuICAgICAgICAgICAgaWYgKGN1cnJUZXRyaXMgIT09IHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0YXJnZXQubmV4dEN1YmVzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJUZXRyaXMuZmluZEN1YmVCeVBvcyh0YXJnZXQubmV4dEN1YmVzW2pdLnBvcykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICBDb2xsaXNpb24ucHJvdG90eXBlLmlzQ29sbGlzaW9uQm91bmRhcnkgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgdmFyIF9hID0gdGhpcy5fYm91bmRhcnksIHRvcCA9IF9hLnRvcCwgYm90dG9tID0gX2EuYm90dG9tLCBsZWZ0ID0gX2EubGVmdCwgcmlnaHQgPSBfYS5yaWdodDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhcmdldC5uZXh0Q3ViZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIF9iID0gdGFyZ2V0Lm5leHRDdWJlc1tpXS5wb3MsIHggPSBfYi54LCB5ID0gX2IueTtcclxuICAgICAgICAgICAgaWYgKCh4IDwgbGVmdCAmJiAhdGhpcy5faWdub3JlLmluY2x1ZGVzKEJvdW5kYXJ5VHlwZS5MZWZ0KSkgfHxcclxuICAgICAgICAgICAgICAgICh4ID4gcmlnaHQgJiYgIXRoaXMuX2lnbm9yZS5pbmNsdWRlcyhCb3VuZGFyeVR5cGUuUmlnaHQpKSB8fFxyXG4gICAgICAgICAgICAgICAgKHkgPCB0b3AgJiYgIXRoaXMuX2lnbm9yZS5pbmNsdWRlcyhCb3VuZGFyeVR5cGUuVG9wKSkgfHxcclxuICAgICAgICAgICAgICAgICh5ID4gYm90dG9tICYmICF0aGlzLl9pZ25vcmUuaW5jbHVkZXMoQm91bmRhcnlUeXBlLkJvdHRvbSkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgQ29sbGlzaW9uLnByb3RvdHlwZS5pc0NvbGxpc2lvbiA9IGZ1bmN0aW9uICh0YXJnZXQsIHRldHJpc2VzKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNDb2xsaXNpb25Cb3VuZGFyeSh0YXJnZXQpIHx8IHRoaXMuaXNDb2xsaXNpb25UZXRyaXModGFyZ2V0LCB0ZXRyaXNlcyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvbGxpc2lvbjtcclxufSgpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gQ29sbGlzaW9uO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuLy8gaW1wb3J0IFRldHJpcyBmcm9tIFwiLi4vd2lkZ2V0cy90ZXRyaXNcIjtcclxudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pKTtcclxudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XHJcbn0pIDogZnVuY3Rpb24obywgdikge1xyXG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xyXG59KTtcclxudmFyIF9faW1wb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xyXG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn07XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuLy8gZXhwb3J0IGRlZmF1bHQgaW50ZXJmYWNlIEdhbWVDb250ZXh0IHtcclxuLy8gICAgIGN1cnJUZXRyaXMgOiBUZXRyaXM7XHJcbi8vICAgICB0ZXRyaXNlcyA6IFRldHJpc1tdIDtcclxuLy8gICAgIHByZXBhcmVUZXRyaXNlcyA6IFRldHJpc1tdO1xyXG4vLyAgICAgaG9sZFRldHJpcyA6IFRldHJpcyB8IG51bGwgO1xyXG4vLyAgICAgc29mdERvd24gOiBib29sZWFuO1xyXG4vLyAgICAgaXNEb3duIDogYm9vbGVhbjtcclxuLy8gICAgIGNhbkhvbGQgOiBib29sZWFuOyBcclxuLy8gICAgIGdhbWVvdmVyOiBib29sZWFuXHJcbi8vIH1cclxudmFyIHRldHJpc18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9mYWN0b3J5L3RldHJpc1wiKSk7XHJcbnZhciB0aW1lcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi91dGlsL3RpbWVyXCIpKTtcclxudmFyIGNvbGxpc2lvbl8xID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCIuL2NvbGxpc2lvblwiKSk7XHJcbnZhciBHYW1lQ29udGV4dCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEdhbWVDb250ZXh0KGdhbWVXaW5kb3csIHByZXBhcmVXaW5kb3csIGhvbGRXaW5kb3csIGRvd25VcGRhdGUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZG93bkludGVydmFsID0gNDUwO1xyXG4gICAgICAgIHRoaXMucmVuZGVySW50ZXJ2YWwgPSA1MDtcclxuICAgICAgICB0aGlzLnNwZWVkSW5jcmVhc2UgPSA0MDA7XHJcbiAgICAgICAgdGhpcy50ZXRyaXNlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMucHJlcGFyZVRldHJpc2VzID0gW107XHJcbiAgICAgICAgdGhpcy5ob2xkVGV0cmlzID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNvZnREb3duID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pc0Rvd24gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNhbkhvbGQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZ2FtZW92ZXIgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmdhbWVXaW5kb3cgPSBnYW1lV2luZG93O1xyXG4gICAgICAgIHRoaXMucHJlcGFyZVdpbmRvdyA9IHByZXBhcmVXaW5kb3c7XHJcbiAgICAgICAgdGhpcy5ob2xkV2luZG93ID0gaG9sZFdpbmRvdztcclxuICAgICAgICB0aGlzLmN1cnJUZXRyaXMgPSB0ZXRyaXNfMS5kZWZhdWx0LmNyZWF0ZVJhbmRvbSh0aGlzLmdhbWVXaW5kb3cud2lkdGgpO1xyXG4gICAgICAgIHRoaXMudGV0cmlzZXMucHVzaCh0aGlzLmN1cnJUZXRyaXMpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wcmVwYXJlV2luZG93Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJlcGFyZVRldHJpc2VzLnB1c2godGV0cmlzXzEuZGVmYXVsdC5jcmVhdGVSYW5kb20odGhpcy5nYW1lV2luZG93LndpZHRoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZG93blRpbWVyID0gbmV3IHRpbWVyXzEuZGVmYXVsdChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGRvd25VcGRhdGUoKTtcclxuICAgICAgICB9LCB0aGlzLmRvd25JbnRlcnZhbCk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJUaW1lciA9IG5ldyB0aW1lcl8xLmRlZmF1bHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICA7XHJcbiAgICAgICAgICAgIF90aGlzLmdhbWVXaW5kb3cucmVuZGVyKF90aGlzLnRldHJpc2VzKTtcclxuICAgICAgICB9LCB0aGlzLnJlbmRlckludGVydmFsKTtcclxuICAgICAgICB0aGlzLmNvbGxpc2lvbiA9IG5ldyBjb2xsaXNpb25fMS5kZWZhdWx0KHtcclxuICAgICAgICAgICAgdG9wOiAwLFxyXG4gICAgICAgICAgICBib3R0b206IGdhbWVXaW5kb3cuaGVpZ2h0IC0gMSxcclxuICAgICAgICAgICAgbGVmdDogMCxcclxuICAgICAgICAgICAgcmlnaHQ6IGdhbWVXaW5kb3cud2lkdGggLSAxXHJcbiAgICAgICAgfSwgW1xyXG4gICAgICAgICAgICBjb2xsaXNpb25fMS5Cb3VuZGFyeVR5cGUuVG9wXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gR2FtZUNvbnRleHQ7XHJcbn0oKSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IEdhbWVDb250ZXh0O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgYXJyYXlfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vaGVscGVyL2FycmF5XCIpKTtcclxudmFyIEN1YmVFbGltaW5hdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQ3ViZUVsaW1pbmF0b3IoKSB7XHJcbiAgICB9XHJcbiAgICBDdWJlRWxpbWluYXRvci5jbGVhciA9IGZ1bmN0aW9uIChzY2VuZVdpZHRoLCBzY2VuZUhlaWdodCwgdGV0cmlzZXMpIHtcclxuICAgICAgICB2YXIgY2xlYXJZID0gQ3ViZUVsaW1pbmF0b3IuY2xlYXJhYmxlQ3ViZXMoc2NlbmVXaWR0aCwgc2NlbmVIZWlnaHQsIHRldHJpc2VzKTtcclxuICAgICAgICBDdWJlRWxpbWluYXRvci5yZW1vdmVDbGVhcmFibGVUZXRyaXModGV0cmlzZXMpO1xyXG4gICAgICAgIHJldHVybiBjbGVhclk7XHJcbiAgICB9O1xyXG4gICAgLy/lm57lgrPpgJnmrKHmh4ljbGVhcueahHnluqfmqJlcclxuICAgIEN1YmVFbGltaW5hdG9yLmNsZWFyYWJsZUN1YmVzID0gZnVuY3Rpb24gKHNjZW5lV2lkdGgsIHNjZW5lSGVpZ2h0LCB0ZXRyaXNlcykge1xyXG4gICAgICAgIHZhciBjb3VudCA9IGFycmF5XzEuZGVmYXVsdC5jcmVhdGUyRChzY2VuZUhlaWdodCk7XHJcbiAgICAgICAgdmFyIGNsZWFyWSA9IFtdO1xyXG4gICAgICAgIHRldHJpc2VzLmZvckVhY2goZnVuY3Rpb24gKHRldHJpcykge1xyXG4gICAgICAgICAgICB0ZXRyaXMuY3ViZXMuZm9yRWFjaChmdW5jdGlvbiAoY3ViZSkge1xyXG4gICAgICAgICAgICAgICAgLy/oi6VjdWJl5rKS6KKr5riF6Zmk5YmH5Yqg5YWlXHJcbiAgICAgICAgICAgICAgICBpZiAoIWN1YmUuaXNDbGVhciAmJiBjdWJlLnBvcy55ID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudFtjdWJlLnBvcy55XS5wdXNoKGN1YmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb3VudC5mb3JFYWNoKGZ1bmN0aW9uIChyb3csIHIpIHtcclxuICAgICAgICAgICAgLy/oqbLliJfpg73mnInlhYPntKBcclxuICAgICAgICAgICAgaWYgKHJvdy5sZW5ndGggPT09IHNjZW5lV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIHJvdy5mb3JFYWNoKGZ1bmN0aW9uIChjdWJlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3ViZS5pc0NsZWFyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY2xlYXJZLnB1c2gocik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gY2xlYXJZO1xyXG4gICAgfTtcclxuICAgIEN1YmVFbGltaW5hdG9yLnJlbW92ZUNsZWFyYWJsZVRldHJpcyA9IGZ1bmN0aW9uICh0ZXRyaXNlcykge1xyXG4gICAgICAgIHRldHJpc2VzLmZvckVhY2goZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgICAgICAgICB2YXIgZXhpc3RDdWJlcyA9IHRhcmdldC5jdWJlcy5maWx0ZXIoZnVuY3Rpb24gKGN1YmUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjdWJlLmlzQ2xlYXIgPT09IGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy9jdWJlLmlzQ2xlYXIg5YWo5pivIGZhbHNlXHJcbiAgICAgICAgICAgIGlmIChleGlzdEN1YmVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy/np7vpmaToqbJ0ZXRyaXNcclxuICAgICAgICAgICAgICAgIHRldHJpc2VzID0gdGV0cmlzZXMuZmlsdGVyKGZ1bmN0aW9uICh0ZXRyaXMpIHsgcmV0dXJuIHRldHJpcyAhPT0gdGFyZ2V0OyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBDdWJlRWxpbWluYXRvcjtcclxufSgpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gQ3ViZUVsaW1pbmF0b3I7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjb250ZXh0XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vY29udGV4dFwiKSk7XHJcbnZhciBiZWhhdmlvclJlc29sdmVyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vYmVoYXZpb3JSZXNvbHZlclwiKSk7XHJcbnZhciBrZXlib2FyZF8xID0gcmVxdWlyZShcIi4vYWN0aW9uL2NvbmNyZXRlL2tleWJvYXJkXCIpO1xyXG52YXIgR2FtZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEdhbWUoZ2FtZVdpbmRvdywgcHJlcGFyZVdpbmRvdywgaG9sZFdpbmRvdykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy51c2VyS2V5RG93bkJlaGF2aW9yID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGtleWJvYXJkXzEuYWN0aW9ucy5rZXlkb3duLmZvckVhY2goZnVuY3Rpb24gKGFjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgYWN0aW9uKGV2ZW50LCBfdGhpcy5fY29udGV4dCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBiZWhhdmlvclJlc29sdmVyXzEuZGVmYXVsdC5uZXh0VGljayhfdGhpcy5fY29udGV4dCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnVzZXJLZXlVcEJlaGF2aW9yID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGtleWJvYXJkXzEuYWN0aW9ucy5rZXl1cC5mb3JFYWNoKGZ1bmN0aW9uIChhY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIGFjdGlvbihldmVudCwgX3RoaXMuX2NvbnRleHQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYmVoYXZpb3JSZXNvbHZlcl8xLmRlZmF1bHQubmV4dFRpY2soX3RoaXMuX2NvbnRleHQpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGJlaGF2aW9yUmVzb2x2ZXJfMS5kZWZhdWx0LmN1cnJUZXRyaXNEb3duKF90aGlzLl9jb250ZXh0KTtcclxuICAgICAgICAgICAgYmVoYXZpb3JSZXNvbHZlcl8xLmRlZmF1bHQubmV4dFRpY2soX3RoaXMuX2NvbnRleHQpO1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuX2NvbnRleHQuZ2FtZW92ZXIpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwiZ2FtZW92ZXJcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuX2NvbnRleHQuaXNEb3duID0gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLl9jb250ZXh0ID0gbmV3IGNvbnRleHRfMS5kZWZhdWx0KGdhbWVXaW5kb3csIHByZXBhcmVXaW5kb3csIGhvbGRXaW5kb3csIHRoaXMudXBkYXRlKTtcclxuICAgIH1cclxuICAgIEdhbWUucHJvdG90eXBlLnJlZ2lzdGVyVXNlckJlaGF2aW9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMudXNlcktleURvd25CZWhhdmlvcik7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMudXNlcktleVVwQmVoYXZpb3IpO1xyXG4gICAgfTtcclxuICAgIEdhbWUucHJvdG90eXBlLnJlbW92ZVVzZXJCZWhhdmlvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLnVzZXJLZXlEb3duQmVoYXZpb3IpO1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLnVzZXJLZXlVcEJlaGF2aW9yKTtcclxuICAgIH07XHJcbiAgICBHYW1lLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5fY29udGV4dC5nYW1lb3Zlcikge1xyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fY29udGV4dC5kb3duVGltZXIuc3RhcnQoKTtcclxuICAgICAgICB0aGlzLl9jb250ZXh0LnJlbmRlclRpbWVyLnN0YXJ0KCk7XHJcbiAgICAgICAgYmVoYXZpb3JSZXNvbHZlcl8xLmRlZmF1bHQucmVuZGVyUHJlcGFyZVdpbmRvdyh0aGlzLl9jb250ZXh0KTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyVXNlckJlaGF2aW9yKCk7XHJcbiAgICB9O1xyXG4gICAgR2FtZS5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9jb250ZXh0LmRvd25UaW1lci5zdG9wKCk7XHJcbiAgICAgICAgdGhpcy5fY29udGV4dC5yZW5kZXJUaW1lci5zdG9wKCk7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVVc2VyQmVoYXZpb3IoKTtcclxuICAgIH07XHJcbiAgICBHYW1lLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfYSA9IHRoaXMuX2NvbnRleHQsIGdhbWVXaW5kb3cgPSBfYS5nYW1lV2luZG93LCBwcmVwYXJlV2luZG93ID0gX2EucHJlcGFyZVdpbmRvdywgaG9sZFdpbmRvdyA9IF9hLmhvbGRXaW5kb3c7XHJcbiAgICAgICAgdGhpcy5fY29udGV4dCA9IG5ldyBjb250ZXh0XzEuZGVmYXVsdChnYW1lV2luZG93LCBwcmVwYXJlV2luZG93LCBob2xkV2luZG93LCB0aGlzLnVwZGF0ZSk7XHJcbiAgICAgICAgYmVoYXZpb3JSZXNvbHZlcl8xLmRlZmF1bHQud2luZG93SW5pdCh0aGlzLl9jb250ZXh0KTtcclxuICAgICAgICB0aGlzLnJlbW92ZVVzZXJCZWhhdmlvcigpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBHYW1lO1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBHYW1lO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlR5cGVzID0gZXhwb3J0cy5Ib2xkV2luZG93ID0gZXhwb3J0cy5QcmVwYXJlV2luZG93ID0gZXhwb3J0cy5NYWluV2luZG93ID0gdm9pZCAwO1xyXG52YXIgZ2FtZVdpbmRvd18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9nYW1lV2luZG93XCIpKTtcclxudmFyIE1haW5XaW5kb3cgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoTWFpbldpbmRvdywgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIE1haW5XaW5kb3coKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgTWFpbldpbmRvdy5wcm90b3R5cGUucmVuZGVyVGV0cmlzID0gZnVuY3Rpb24gKHRldHJpc2VzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLl9jb250ZXh0LnN0cm9rZVN0eWxlID0gXCIjNTU1NTU1XCI7XHJcbiAgICAgICAgdGV0cmlzZXMuZm9yRWFjaChmdW5jdGlvbiAodGV0cmlzKSB7XHJcbiAgICAgICAgICAgIHRldHJpcy5jdWJlcy5mb3JFYWNoKGZ1bmN0aW9uIChjdWJlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWN1YmUuaXNDbGVhcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwID0gY3ViZS5wb3M7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2NvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBwLnggKiBfdGhpcy5fdW5pdDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IHAueSAqIF90aGlzLl91bml0O1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLl9jb250ZXh0LnJlY3QoeCwgeSwgX3RoaXMuX3VuaXQsIF90aGlzLl91bml0KTtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fY29udGV4dC5maWxsU3R5bGUgPSB0ZXRyaXMuY29sb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2NvbnRleHQuZmlsbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLl9jb250ZXh0LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBNYWluV2luZG93LnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aCAqIHRoaXMuX3VuaXQ7XHJcbiAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0ICogdGhpcy5fdW5pdDtcclxuICAgICAgICB0aGlzLl9jYW52YXMuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgd2lkdGgudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgdGhpcy5fY2FudmFzLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCBoZWlnaHQudG9TdHJpbmcoKSk7XHJcbiAgICB9O1xyXG4gICAgTWFpbldpbmRvdy5wcm90b3R5cGUucmVuZGVyRGVmaW5lID0gZnVuY3Rpb24gKHRldHJpc2VzKSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJUZXRyaXModGV0cmlzZXMpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyR3JpZCgpO1xyXG4gICAgfTtcclxuICAgIE1haW5XaW5kb3cucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5yZXNpemUoKTtcclxuICAgICAgICB0aGlzLnJlbmRlckdyaWQoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTWFpbldpbmRvdztcclxufShnYW1lV2luZG93XzEuZGVmYXVsdCkpO1xyXG5leHBvcnRzLk1haW5XaW5kb3cgPSBNYWluV2luZG93O1xyXG52YXIgTm90R3JpZFdpbmRvdyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhOb3RHcmlkV2luZG93LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gTm90R3JpZFdpbmRvdyhjYW52YXMsIHVuaXQpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgY2FudmFzLCAwLCAwLCB1bml0KSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgTm90R3JpZFdpbmRvdy5wcm90b3R5cGUucmVuZGVyVGV0cmlzID0gZnVuY3Rpb24gKHRldHJpc2VzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgdGV0cmlzID0gdGV0cmlzZXNbMF07XHJcbiAgICAgICAgdGhpcy5fY29udGV4dC5zdHJva2VTdHlsZSA9IFwiIzU1NTU1NVwiO1xyXG4gICAgICAgIHRldHJpcy5jdWJlcy5mb3JFYWNoKGZ1bmN0aW9uIChjdWJlKSB7XHJcbiAgICAgICAgICAgIHZhciB0cCA9IHRldHJpcy5wb3M7XHJcbiAgICAgICAgICAgIHZhciBwID0gY3ViZS5wb3M7XHJcbiAgICAgICAgICAgIF90aGlzLl9jb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICAvL+WBj+enu1xyXG4gICAgICAgICAgICB2YXIgeCA9IChwLnggLSB0cC54KSAqIF90aGlzLl91bml0O1xyXG4gICAgICAgICAgICB2YXIgeSA9IChwLnkgLSB0cC55KSAqIF90aGlzLl91bml0O1xyXG4gICAgICAgICAgICBfdGhpcy5fY29udGV4dC5yZWN0KHgsIHksIF90aGlzLl91bml0LCBfdGhpcy5fdW5pdCk7XHJcbiAgICAgICAgICAgIF90aGlzLl9jb250ZXh0LmZpbGxTdHlsZSA9IHRldHJpcy5jb2xvcjtcclxuICAgICAgICAgICAgX3RoaXMuX2NvbnRleHQuZmlsbCgpO1xyXG4gICAgICAgICAgICBfdGhpcy5fY29udGV4dC5zdHJva2UoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBOb3RHcmlkV2luZG93LnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbiAodGV0cmlzKSB7XHJcbiAgICAgICAgdmFyIHdpZHRoID0gdGV0cmlzLm9yaWdpbldpZHRoICogdGhpcy5fdW5pdDtcclxuICAgICAgICB2YXIgaGVpZ2h0ID0gdGV0cmlzLm9yaWdpbkhlaWdodCAqIHRoaXMuX3VuaXQ7XHJcbiAgICAgICAgdGhpcy5fY2FudmFzLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIHdpZHRoLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIHRoaXMuX2NhbnZhcy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgaGVpZ2h0LnRvU3RyaW5nKCkpO1xyXG4gICAgfTtcclxuICAgIE5vdEdyaWRXaW5kb3cucHJvdG90eXBlLnJlbmRlckRlZmluZSA9IGZ1bmN0aW9uICh0ZXRyaXNlcykge1xyXG4gICAgICAgIHRoaXMucmVzaXplKHRldHJpc2VzWzBdKTtcclxuICAgICAgICB0aGlzLnJlbmRlclRldHJpcyh0ZXRyaXNlcyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE5vdEdyaWRXaW5kb3c7XHJcbn0oZ2FtZVdpbmRvd18xLmRlZmF1bHQpKTtcclxudmFyIFByZXBhcmVXaW5kb3cgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoUHJlcGFyZVdpbmRvdywgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFByZXBhcmVXaW5kb3coKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByZXBhcmVXaW5kb3c7XHJcbn0oTm90R3JpZFdpbmRvdykpO1xyXG5leHBvcnRzLlByZXBhcmVXaW5kb3cgPSBQcmVwYXJlV2luZG93O1xyXG52YXIgSG9sZFdpbmRvdyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhIb2xkV2luZG93LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gSG9sZFdpbmRvdygpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gSG9sZFdpbmRvdztcclxufShOb3RHcmlkV2luZG93KSk7XHJcbmV4cG9ydHMuSG9sZFdpbmRvdyA9IEhvbGRXaW5kb3c7XHJcbmV4cG9ydHMuVHlwZXMgPSB7IE1haW5XaW5kb3c6IE1haW5XaW5kb3csIFByZXBhcmVXaW5kb3c6IFByZXBhcmVXaW5kb3csIEhvbGRXaW5kb3c6IEhvbGRXaW5kb3cgfTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEdhbWVXaW5kb3cgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBHYW1lV2luZG93KGNhbnZhcywgd2lkdGgsIGhlaWdodCwgdW5pdCkge1xyXG4gICAgICAgIHRoaXMuX2NhbnZhcyA9IGNhbnZhcztcclxuICAgICAgICB0aGlzLl9jb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICB0aGlzLl93aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcclxuICAgICAgICB0aGlzLl91bml0ID0gdW5pdDtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShHYW1lV2luZG93LnByb3RvdHlwZSwgXCJ3aWR0aFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl93aWR0aDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoR2FtZVdpbmRvdy5wcm90b3R5cGUsIFwiaGVpZ2h0XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2hlaWdodDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBHYW1lV2luZG93LnByb3RvdHlwZS5yZW5kZXJHcmlkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlU3R5bGUgPSBcIiM3Nzc3NzdcIjtcclxuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IHRoaXMuaGVpZ2h0OyB5KyspIHtcclxuICAgICAgICAgICAgdGhpcy5fY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgdGhpcy5fY29udGV4dC5tb3ZlVG8oMCwgeSAqIHRoaXMuX3VuaXQgKyB0aGlzLl91bml0KTtcclxuICAgICAgICAgICAgdGhpcy5fY29udGV4dC5saW5lVG8odGhpcy53aWR0aCAqIHRoaXMuX3VuaXQsIHkgKiB0aGlzLl91bml0ICsgdGhpcy5fdW5pdCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQubW92ZVRvKHggKiB0aGlzLl91bml0ICsgdGhpcy5fdW5pdCwgMCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQubGluZVRvKHggKiB0aGlzLl91bml0ICsgdGhpcy5fdW5pdCwgdGhpcy5fY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEdhbWVXaW5kb3cucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICh0ZXRyaXNlcykge1xyXG4gICAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgICAgICB0aGlzLnJlbmRlckRlZmluZSh0ZXRyaXNlcyk7XHJcbiAgICB9O1xyXG4gICAgR2FtZVdpbmRvdy5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fY29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy5fY2FudmFzLndpZHRoLCB0aGlzLl9jYW52YXMuaGVpZ2h0KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gR2FtZVdpbmRvdztcclxufSgpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gR2FtZVdpbmRvdztcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEFycmF5SGVscGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQXJyYXlIZWxwZXIoKSB7XHJcbiAgICB9XHJcbiAgICBBcnJheUhlbHBlci5jcmVhdGUyRCA9IGZ1bmN0aW9uIChyb3csIGNvbCwgZmlsbCkge1xyXG4gICAgICAgIHZhciBhcnIgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciByID0gMDsgciA8IHJvdzsgcisrKSB7XHJcbiAgICAgICAgICAgIGFyci5wdXNoKFtdKTtcclxuICAgICAgICAgICAgaWYgKGNvbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcnJbcl0gPSBuZXcgQXJyYXkoY29sKS5maWxsKGZpbGwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcnI7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEFycmF5SGVscGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBBcnJheUhlbHBlcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGdhbWVXaW5kb3dfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9mYWN0b3J5L2dhbWVXaW5kb3dcIikpO1xyXG52YXIgZ2FtZVdpbmRvd18yID0gcmVxdWlyZShcIi4vZ2FtZS93aW5kb3cvY29uY3JldGUvZ2FtZVdpbmRvd1wiKTtcclxudmFyIGdhbWVfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9nYW1lL2dhbWVcIikpO1xyXG4vLyDnpoHmraLnibnlrprmjInpjbXop7jnmbzpoIHpnaLmu77li5Vcclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgdmFyIGRpc2FibGVLZXkgPSBbXCJBcnJvd1VwXCIsIFwiQXJyb3dEb3duXCIsIFwiQXJyb3dMZWZ0XCIsIFwiQXJyb3dSaWdodFwiLCBcIiBcIl07XHJcbiAgICBpZiAoZGlzYWJsZUtleS5pbmNsdWRlcyhldmVudC5rZXkpKSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH1cclxufSk7XHJcbnZhciBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2dhbWVXaW5kb3dcIik7XHJcbnZhciBwcmVwYXJlQ2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIiNuZXh0LWFyZWEgPiAuY2FudmFzLXdyYXBwZXIgPiBjYW52YXNcIik7XHJcbnZhciBob2xkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNob2xkXCIpO1xyXG52YXIgc3RhcnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3N0YXJ0XCIpO1xyXG52YXIgc3RvcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc3RvcFwiKTtcclxudmFyIHJlc2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNyZXNldFwiKTtcclxudmFyIHVuaXQgPSAyMDtcclxudmFyIHVuaXQyID0gMTM7XHJcbnZhciBnYW1lV2luZG93ID0gZ2FtZVdpbmRvd18xLmRlZmF1bHQuY3JlYXRlKGdhbWVXaW5kb3dfMi5NYWluV2luZG93Lm5hbWUsIGNhbnZhcywgMTQsIDI0LCB1bml0KTtcclxudmFyIHByZXBhcmVXaW5kb3dzID0gW107XHJcbnByZXBhcmVDYW52YXMuZm9yRWFjaChmdW5jdGlvbiAoYykge1xyXG4gICAgYy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgKHVuaXQyICogNCkudG9TdHJpbmcoKSk7XHJcbiAgICBjLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCAodW5pdDIgKiA0KS50b1N0cmluZygpKTtcclxuICAgIHByZXBhcmVXaW5kb3dzLnB1c2goZ2FtZVdpbmRvd18xLmRlZmF1bHQuY3JlYXRlKGdhbWVXaW5kb3dfMi5QcmVwYXJlV2luZG93Lm5hbWUsIGMsIHVuaXQyKSk7XHJcbn0pO1xyXG5ob2xkLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCAodW5pdDIgKiA0KS50b1N0cmluZygpKTtcclxuaG9sZC5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgKHVuaXQyICogNCkudG9TdHJpbmcoKSk7XHJcbnZhciBob2xkV2luZG93ID0gZ2FtZVdpbmRvd18xLmRlZmF1bHQuY3JlYXRlKGdhbWVXaW5kb3dfMi5Ib2xkV2luZG93Lm5hbWUsIGhvbGQsIHVuaXQyKTtcclxuZ2FtZVdpbmRvdy5pbml0aWFsaXplKCk7XHJcbnZhciBnYW1lID0gbmV3IGdhbWVfMS5kZWZhdWx0KGdhbWVXaW5kb3csIHByZXBhcmVXaW5kb3dzLCBob2xkV2luZG93KTtcclxuc3RhcnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgIGdhbWUuc3RhcnQoKTtcclxuICAgIHN0YXJ0LnN0eWxlLmNvbG9yID0gXCJ3aGl0ZVwiO1xyXG4gICAgc3RvcC5zdHlsZS5jb2xvciA9IFwiIzg4ODg4OFwiO1xyXG4gICAgcmVzZXQuc3R5bGUuY29sb3IgPSBcIiM4ODg4ODhcIjtcclxufSk7XHJcbnN0b3AuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgIGdhbWUuc3RvcCgpO1xyXG4gICAgc3RvcC5zdHlsZS5jb2xvciA9IFwid2hpdGVcIjtcclxuICAgIHN0YXJ0LnN0eWxlLmNvbG9yID0gXCIjODg4ODg4XCI7XHJcbiAgICByZXNldC5zdHlsZS5jb2xvciA9IFwiIzg4ODg4OFwiO1xyXG59KTtcclxucmVzZXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgZ2FtZS5zdG9wKCk7XHJcbiAgICBnYW1lLmluaXRpYWxpemUoKTtcclxuICAgIHJlc2V0LnN0eWxlLmNvbG9yID0gXCJ3aGl0ZVwiO1xyXG4gICAgc3RhcnQuc3R5bGUuY29sb3IgPSBcIiM4ODg4ODhcIjtcclxuICAgIHN0b3Auc3R5bGUuY29sb3IgPSBcIiM4ODg4ODhcIjtcclxufSk7XHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGlmIChldmVudC5rZXkgPT09IFwicFwiKSB7XHJcbiAgICAgICAgc3RvcC5jbGljaygpO1xyXG4gICAgfVxyXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFbnRlclwiKSB7XHJcbiAgICAgICAgc3RhcnQuY2xpY2soKTtcclxuICAgIH1cclxuICAgIGlmIChldmVudC5rZXkgPT09IFwiclwiKSB7XHJcbiAgICAgICAgcmVzZXQuY2xpY2soKTtcclxuICAgIH1cclxufSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBQb2ludCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFBvaW50KHgsIHkpIHtcclxuICAgICAgICB0aGlzLl94ID0geDtcclxuICAgICAgICB0aGlzLl95ID0geTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQb2ludC5wcm90b3R5cGUsIFwieFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl94O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIDtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQb2ludC5wcm90b3R5cGUsIFwieVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl95O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFBvaW50LnByb3RvdHlwZS5wbHVzID0gZnVuY3Rpb24gKHApIHtcclxuICAgICAgICB2YXIgeCA9IHRoaXMuX3ggKyBwLng7XHJcbiAgICAgICAgdmFyIHkgPSB0aGlzLl95ICsgcC55O1xyXG4gICAgICAgIHJldHVybiBuZXcgUG9pbnQoeCwgeSk7XHJcbiAgICB9O1xyXG4gICAgUG9pbnQucHJvdG90eXBlLnBsdXNXaXRoID0gZnVuY3Rpb24gKHgsIHkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBvaW50KHRoaXMuX3ggKyB4LCB0aGlzLl95ICsgeSk7XHJcbiAgICB9O1xyXG4gICAgUG9pbnQucHJvdG90eXBlLnN1YnRyYWN0ID0gZnVuY3Rpb24gKHApIHtcclxuICAgICAgICB2YXIgeCA9IHRoaXMuX3ggLSBwLng7XHJcbiAgICAgICAgdmFyIHkgPSB0aGlzLl95IC0gcC55O1xyXG4gICAgICAgIHJldHVybiBuZXcgUG9pbnQoeCwgeSk7XHJcbiAgICB9O1xyXG4gICAgUG9pbnQucHJvdG90eXBlLnN1YnRyYWN0V2l0aCA9IGZ1bmN0aW9uICh4LCB5KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQb2ludCh0aGlzLl94IC0geCwgdGhpcy5feSAtIHkpO1xyXG4gICAgfTtcclxuICAgIFBvaW50LnByb3RvdHlwZS5wbHVzWCA9IGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQb2ludCh0aGlzLl94ICsgeCwgdGhpcy55KTtcclxuICAgIH07XHJcbiAgICBQb2ludC5wcm90b3R5cGUucGx1c1kgPSBmdW5jdGlvbiAoeSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUG9pbnQodGhpcy54LCB0aGlzLl95ICsgeSk7XHJcbiAgICB9O1xyXG4gICAgUG9pbnQucHJvdG90eXBlLnN1YnRyYWN0WCA9IGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQb2ludCh0aGlzLl94IC0geCwgdGhpcy55KTtcclxuICAgIH07XHJcbiAgICBQb2ludC5wcm90b3R5cGUuc3VidHJhY3RZID0gZnVuY3Rpb24gKHkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBvaW50KHRoaXMueCwgdGhpcy5feSAtIHkpO1xyXG4gICAgfTtcclxuICAgIFBvaW50LnByb3RvdHlwZS5lcXVhbCA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMueCA9PT0gcC54ICYmIHRoaXMueSA9PT0gcC55O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBQb2ludDtcclxufSgpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gUG9pbnQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBUaW1lciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFRpbWVyKGhhbmRsZSwgbXMpIHtcclxuICAgICAgICB0aGlzLl90aW1lcklEID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9tcyA9IG1zO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZSA9IGhhbmRsZTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUaW1lci5wcm90b3R5cGUsIFwibXNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbXM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgdGhpcy5fbXMgPSB2YWw7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcCgpO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgVGltZXIucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fdGltZXJJRCkge1xyXG4gICAgICAgICAgICB0aGlzLl90aW1lcklEID0gc2V0SW50ZXJ2YWwodGhpcy5faGFuZGxlLCB0aGlzLl9tcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFRpbWVyLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl90aW1lcklEKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5fdGltZXJJRCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3RpbWVySUQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gVGltZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IFRpbWVyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlR5cGVzID0gZXhwb3J0cy5aVGV0cmlzID0gZXhwb3J0cy5UVGV0cmlzID0gZXhwb3J0cy5TVGV0cmlzID0gZXhwb3J0cy5PVGV0cmlzID0gZXhwb3J0cy5MVGV0cmlzID0gZXhwb3J0cy5KVGV0cmlzID0gZXhwb3J0cy5JVGV0cmlzID0gdm9pZCAwO1xyXG52YXIgdGV0cmlzXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL3RldHJpc1wiKSk7XHJcbnZhciBJVGV0cmlzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKElUZXRyaXMsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBJVGV0cmlzKCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIElUZXRyaXMucHJvdG90eXBlLmNvbG9yRGVmaW5lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBcIiM0MmIwZjVcIjtcclxuICAgIH07XHJcbiAgICBJVGV0cmlzLnByb3RvdHlwZS5zaGFwZURlZmluZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBbMCwgMCwgMCwgMF0sXHJcbiAgICAgICAgICAgIFsxLCAxLCAxLCAxXSxcclxuICAgICAgICAgICAgWzAsIDAsIDAsIDBdLFxyXG4gICAgICAgICAgICBbMCwgMCwgMCwgMF0sXHJcbiAgICAgICAgXTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSVRldHJpcztcclxufSh0ZXRyaXNfMS5kZWZhdWx0KSk7XHJcbmV4cG9ydHMuSVRldHJpcyA9IElUZXRyaXM7XHJcbnZhciBKVGV0cmlzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEpUZXRyaXMsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBKVGV0cmlzKCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIEpUZXRyaXMucHJvdG90eXBlLmNvbG9yRGVmaW5lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBcIiMzODc0ZmZcIjtcclxuICAgIH07XHJcbiAgICBKVGV0cmlzLnByb3RvdHlwZS5zaGFwZURlZmluZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBbMSwgMCwgMF0sXHJcbiAgICAgICAgICAgIFsxLCAxLCAxXSxcclxuICAgICAgICAgICAgWzAsIDAsIDBdLFxyXG4gICAgICAgIF07XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEpUZXRyaXM7XHJcbn0odGV0cmlzXzEuZGVmYXVsdCkpO1xyXG5leHBvcnRzLkpUZXRyaXMgPSBKVGV0cmlzO1xyXG52YXIgTFRldHJpcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhMVGV0cmlzLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gTFRldHJpcygpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBMVGV0cmlzLnByb3RvdHlwZS5jb2xvckRlZmluZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gXCIjZmY4ZTI0XCI7XHJcbiAgICB9O1xyXG4gICAgTFRldHJpcy5wcm90b3R5cGUuc2hhcGVEZWZpbmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgWzAsIDAsIDFdLFxyXG4gICAgICAgICAgICBbMSwgMSwgMV0sXHJcbiAgICAgICAgICAgIFswLCAwLCAwXSxcclxuICAgICAgICBdO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBMVGV0cmlzO1xyXG59KHRldHJpc18xLmRlZmF1bHQpKTtcclxuZXhwb3J0cy5MVGV0cmlzID0gTFRldHJpcztcclxudmFyIE9UZXRyaXMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoT1RldHJpcywgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIE9UZXRyaXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgT1RldHJpcy5wcm90b3R5cGUuY29sb3JEZWZpbmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiI2ZmZjI0MlwiO1xyXG4gICAgfTtcclxuICAgIE9UZXRyaXMucHJvdG90eXBlLnNoYXBlRGVmaW5lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIFsxLCAxXSxcclxuICAgICAgICAgICAgWzEsIDFdLFxyXG4gICAgICAgIF07XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE9UZXRyaXM7XHJcbn0odGV0cmlzXzEuZGVmYXVsdCkpO1xyXG5leHBvcnRzLk9UZXRyaXMgPSBPVGV0cmlzO1xyXG52YXIgU1RldHJpcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhTVGV0cmlzLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU1RldHJpcygpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBTVGV0cmlzLnByb3RvdHlwZS5jb2xvckRlZmluZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gXCIjMDBkZTNmXCI7XHJcbiAgICB9O1xyXG4gICAgU1RldHJpcy5wcm90b3R5cGUuc2hhcGVEZWZpbmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgWzAsIDEsIDFdLFxyXG4gICAgICAgICAgICBbMSwgMSwgMF0sXHJcbiAgICAgICAgICAgIFswLCAwLCAwXSxcclxuICAgICAgICBdO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTVGV0cmlzO1xyXG59KHRldHJpc18xLmRlZmF1bHQpKTtcclxuZXhwb3J0cy5TVGV0cmlzID0gU1RldHJpcztcclxudmFyIFRUZXRyaXMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoVFRldHJpcywgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFRUZXRyaXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgVFRldHJpcy5wcm90b3R5cGUuY29sb3JEZWZpbmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiI2U1NTdmN1wiO1xyXG4gICAgfTtcclxuICAgIFRUZXRyaXMucHJvdG90eXBlLnNoYXBlRGVmaW5lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIFswLCAxLCAwXSxcclxuICAgICAgICAgICAgWzEsIDEsIDFdLFxyXG4gICAgICAgICAgICBbMCwgMCwgMF0sXHJcbiAgICAgICAgXTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVFRldHJpcztcclxufSh0ZXRyaXNfMS5kZWZhdWx0KSk7XHJcbmV4cG9ydHMuVFRldHJpcyA9IFRUZXRyaXM7XHJcbnZhciBaVGV0cmlzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFpUZXRyaXMsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBaVGV0cmlzKCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIFpUZXRyaXMucHJvdG90eXBlLmNvbG9yRGVmaW5lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBcIiNmZjFmMWZcIjtcclxuICAgIH07XHJcbiAgICBaVGV0cmlzLnByb3RvdHlwZS5zaGFwZURlZmluZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBbMSwgMSwgMF0sXHJcbiAgICAgICAgICAgIFswLCAxLCAxXSxcclxuICAgICAgICAgICAgWzAsIDAsIDBdLFxyXG4gICAgICAgIF07XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFpUZXRyaXM7XHJcbn0odGV0cmlzXzEuZGVmYXVsdCkpO1xyXG5leHBvcnRzLlpUZXRyaXMgPSBaVGV0cmlzO1xyXG5leHBvcnRzLlR5cGVzID0ge1xyXG4gICAgSVRldHJpczogSVRldHJpcyxcclxuICAgIEpUZXRyaXM6IEpUZXRyaXMsXHJcbiAgICBMVGV0cmlzOiBMVGV0cmlzLFxyXG4gICAgT1RldHJpczogT1RldHJpcyxcclxuICAgIFNUZXRyaXM6IFNUZXRyaXMsXHJcbiAgICBUVGV0cmlzOiBUVGV0cmlzLFxyXG4gICAgWlRldHJpczogWlRldHJpc1xyXG59O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgQ3ViZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEN1YmUocmVsYXRpb25Qb3MsIHBvcykge1xyXG4gICAgICAgIHRoaXMuaXNDbGVhciA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucmVsYXRpb25Qb3MgPSByZWxhdGlvblBvcztcclxuICAgICAgICB0aGlzLnBvcyA9IHBvcztcclxuICAgIH1cclxuICAgIHJldHVybiBDdWJlO1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBDdWJlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlNoYXBlVmFsdWUgPSB2b2lkIDA7XHJcbnZhciBjdWJlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL2ZhY3RvcnkvY3ViZVwiKSk7XHJcbnZhciBwb2ludF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9mYWN0b3J5L3BvaW50XCIpKTtcclxudmFyIGFycmF5XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL2hlbHBlci9hcnJheVwiKSk7XHJcbnZhciBTaGFwZVZhbHVlO1xyXG4oZnVuY3Rpb24gKFNoYXBlVmFsdWUpIHtcclxuICAgIFNoYXBlVmFsdWVbU2hhcGVWYWx1ZVtcIlVOREVGSU5FRFwiXSA9IC0xXSA9IFwiVU5ERUZJTkVEXCI7XHJcbiAgICBTaGFwZVZhbHVlW1NoYXBlVmFsdWVbXCJERUZJTkVEXCJdID0gMV0gPSBcIkRFRklORURcIjtcclxuICAgIFNoYXBlVmFsdWVbU2hhcGVWYWx1ZVtcIkVNUFRZXCJdID0gMF0gPSBcIkVNUFRZXCI7XHJcbn0pKFNoYXBlVmFsdWUgPSBleHBvcnRzLlNoYXBlVmFsdWUgfHwgKGV4cG9ydHMuU2hhcGVWYWx1ZSA9IHt9KSk7XHJcbnZhciBUZXRyaXMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBUZXRyaXMoKSB7XHJcbiAgICAgICAgdGhpcy5fb3JpZ2luUG9zID0gcG9pbnRfMS5kZWZhdWx0LmNyZWF0ZU1pbigpO1xyXG4gICAgICAgIHRoaXMuX3BvcyA9IHBvaW50XzEuZGVmYXVsdC5jcmVhdGVNaW4oKTtcclxuICAgICAgICB0aGlzLl9uZXh0UG9zID0gcG9pbnRfMS5kZWZhdWx0LmNyZWF0ZU1pbigpO1xyXG4gICAgICAgIHRoaXMuX2N1YmVzID0gW107XHJcbiAgICAgICAgdGhpcy5fY29sb3IgPSB0aGlzLmNvbG9yRGVmaW5lKCk7XHJcbiAgICAgICAgdGhpcy5fb3JpZ2luU2hhcGUgPSB0aGlzLnNoYXBlRGVmaW5lKCk7XHJcbiAgICAgICAgdGhpcy5fbmV4dFNoYXBlID0gdGhpcy5fb3JpZ2luU2hhcGUuc2xpY2UoKTtcclxuICAgICAgICB0aGlzLl9jdXJyZW50U2hhcGUgPSB0aGlzLl9vcmlnaW5TaGFwZS5zbGljZSgpO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRldHJpcy5wcm90b3R5cGUsIFwid2lkdGhcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY3VycmVudFNoYXBlWzBdLmxlbmd0aDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGV0cmlzLnByb3RvdHlwZSwgXCJoZWlnaHRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY3VycmVudFNoYXBlLmxlbmd0aDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGV0cmlzLnByb3RvdHlwZSwgXCJwb3NcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcG9zO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fcG9zID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMuX2N1YmVzID0gdGhpcy5nZW5lcmF0ZUN1YmVzKHRoaXMucG9zLCB0aGlzLl9jdXJyZW50U2hhcGUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUZXRyaXMucHJvdG90eXBlLCBcIm9yaWdpblBvc1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vcmlnaW5Qb3M7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChwKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9yaWdpblBvcy54ID09PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUiAmJiB0aGlzLm9yaWdpblBvcy55ID09PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb3JpZ2luUG9zID0gcG9pbnRfMS5kZWZhdWx0LmNyZWF0ZUJ5UG9pbnQocCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvcyA9IHBvaW50XzEuZGVmYXVsdC5jcmVhdGVCeVBvaW50KHApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbmV4dFBvcyA9IHBvaW50XzEuZGVmYXVsdC5jcmVhdGVCeVBvaW50KHApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRldHJpcy5wcm90b3R5cGUsIFwib3JpZ2luV2lkdGhcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3JpZ2luU2hhcGVbMF0ubGVuZ3RoO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUZXRyaXMucHJvdG90eXBlLCBcIm9yaWdpbkhlaWdodFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vcmlnaW5TaGFwZS5sZW5ndGg7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRldHJpcy5wcm90b3R5cGUsIFwiY3ViZXNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY3ViZXM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRldHJpcy5wcm90b3R5cGUsIFwibmV4dEN1YmVzXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVDdWJlcyh0aGlzLl9uZXh0UG9zLCB0aGlzLl9uZXh0U2hhcGUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUZXRyaXMucHJvdG90eXBlLCBcImNvbG9yXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbG9yO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUZXRyaXMucHJvdG90eXBlLCBcImN1cnJlbnRTaGFwZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW50U2hhcGUuc2xpY2UoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBUZXRyaXMucHJvdG90eXBlLmdlbmVyYXRlQ3ViZXMgPSBmdW5jdGlvbiAocG9zLCBzaGFwZSkge1xyXG4gICAgICAgIHZhciBjdWJlcyA9IFtdO1xyXG4gICAgICAgIHNoYXBlLmZvckVhY2goZnVuY3Rpb24gKHJvdywgcikge1xyXG4gICAgICAgICAgICByb3cuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCwgYykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT09IFNoYXBlVmFsdWUuREVGSU5FRCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZWxhdGlvblBvcyA9IHBvaW50XzEuZGVmYXVsdC5jcmVhdGUoYywgcik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gcmVsYXRpb25Qb3MucGx1cyhwb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1YmVzLnB1c2goY3ViZV8xLmRlZmF1bHQuY3JlYXRlKHJlbGF0aW9uUG9zLCBwb3NpdGlvbikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gY3ViZXM7XHJcbiAgICB9O1xyXG4gICAgVGV0cmlzLnByb3RvdHlwZS5maW5kQ3ViZUJ5UG9zID0gZnVuY3Rpb24gKHBvcywgaXNDbGVhcikge1xyXG4gICAgICAgIGlmIChpc0NsZWFyID09PSB2b2lkIDApIHsgaXNDbGVhciA9IGZhbHNlOyB9XHJcbiAgICAgICAgdmFyIGN1YmUgPSB0aGlzLl9jdWJlcy5maW5kKGZ1bmN0aW9uIChjdWJlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjdWJlLnBvcy5lcXVhbChwb3MpICYmIGN1YmUuaXNDbGVhciA9PT0gaXNDbGVhcjtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gY3ViZTtcclxuICAgIH07XHJcbiAgICBUZXRyaXMucHJvdG90eXBlLmZpbmRDdWJlID0gZnVuY3Rpb24gKGN1YmUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3ViZXMuZmluZChmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsID09PSBjdWJlOyB9KTtcclxuICAgIH07XHJcbiAgICBUZXRyaXMucHJvdG90eXBlLnJhbmRvbVJvdGF0ZVNoYXBlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByb3RhdGVUaW1lcyA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDQpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcm90YXRlVGltZXM7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnJvdGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9jdXJyZW50U2hhcGUgPSB0aGlzLl9uZXh0U2hhcGUuc2xpY2UoKTtcclxuICAgIH07XHJcbiAgICBUZXRyaXMucHJvdG90eXBlLnJvdGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcm93ID0gdGhpcy5oZWlnaHQ7XHJcbiAgICAgICAgdmFyIGNvbCA9IHRoaXMud2lkdGg7XHJcbiAgICAgICAgdmFyIG5ld1NoYXBlID0gYXJyYXlfMS5kZWZhdWx0LmNyZWF0ZTJEKGNvbCwgcm93LCBTaGFwZVZhbHVlLkVNUFRZKTtcclxuICAgICAgICB2YXIgbmV3Um93ID0gMDtcclxuICAgICAgICBmb3IgKHZhciByID0gMDsgciA8IHJvdzsgcisrKSB7XHJcbiAgICAgICAgICAgIG5ld1JvdyA9IDA7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgY29sOyBjKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciB2YWwgPSB0aGlzLl9jdXJyZW50U2hhcGVbcl1bY107XHJcbiAgICAgICAgICAgICAgICBuZXdTaGFwZVtuZXdSb3ddW3JvdyAtIHIgLSAxXSA9IHZhbDtcclxuICAgICAgICAgICAgICAgIGlmICh2YWwgPT09IFNoYXBlVmFsdWUuREVGSU5FRCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvcmlnaW5DdWJlID0gdGhpcy5maW5kQ3ViZUJ5UG9zKHBvaW50XzEuZGVmYXVsdC5jcmVhdGUoYywgcikpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcmlnaW5DdWJlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdDdWJlID0gY3ViZV8xLmRlZmF1bHQuY3JlYXRlKHBvaW50XzEuZGVmYXVsdC5jcmVhdGUociwgbmV3Um93KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdGV0cmlz5bem5LiK6KeS5LmL5bqn5qiZICsg5YGP56e76YePXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0N1YmUucG9zID0gdGhpcy5wb3MucGx1c1dpdGgociwgYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbmV3Um93Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbmV4dFNoYXBlID0gbmV3U2hhcGU7XHJcbiAgICB9O1xyXG4gICAgVGV0cmlzLnByb3RvdHlwZS5sZWZ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX25leHRQb3MgPSB0aGlzLnBvcy5zdWJ0cmFjdFgoMSk7XHJcbiAgICB9O1xyXG4gICAgVGV0cmlzLnByb3RvdHlwZS5yaWdodCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9uZXh0UG9zID0gdGhpcy5wb3MucGx1c1goMSk7XHJcbiAgICB9O1xyXG4gICAgVGV0cmlzLnByb3RvdHlwZS51cCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9uZXh0UG9zID0gdGhpcy5wb3Muc3VidHJhY3RZKDEpO1xyXG4gICAgfTtcclxuICAgIFRldHJpcy5wcm90b3R5cGUuZG93biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9uZXh0UG9zID0gdGhpcy5wb3MucGx1c1koMSk7XHJcbiAgICB9O1xyXG4gICAgVGV0cmlzLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fY3VycmVudFNoYXBlID0gdGhpcy5fbmV4dFNoYXBlLnNsaWNlKCk7XHJcbiAgICAgICAgdGhpcy5wb3MgPSBwb2ludF8xLmRlZmF1bHQuY3JlYXRlQnlQb2ludCh0aGlzLl9uZXh0UG9zKTtcclxuICAgIH07XHJcbiAgICBUZXRyaXMucHJvdG90eXBlLmJhY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fbmV4dFNoYXBlID0gdGhpcy5fY3VycmVudFNoYXBlLnNsaWNlKCk7XHJcbiAgICAgICAgdGhpcy5fbmV4dFBvcyA9IHBvaW50XzEuZGVmYXVsdC5jcmVhdGVCeVBvaW50KHRoaXMucG9zKTtcclxuICAgIH07XHJcbiAgICBUZXRyaXMucHJvdG90eXBlLnBvc0luaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5wb3MgPSBwb2ludF8xLmRlZmF1bHQuY3JlYXRlQnlQb2ludCh0aGlzLm9yaWdpblBvcyk7XHJcbiAgICAgICAgdGhpcy5fbmV4dFBvcyA9IHBvaW50XzEuZGVmYXVsdC5jcmVhdGVCeVBvaW50KHRoaXMub3JpZ2luUG9zKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVGV0cmlzO1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBUZXRyaXM7XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdHZhciBleGVjT3B0aW9ucyA9IHsgaWQ6IG1vZHVsZUlkLCBtb2R1bGU6IG1vZHVsZSwgZmFjdG9yeTogX193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0sIHJlcXVpcmU6IF9fd2VicGFja19yZXF1aXJlX18gfTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5pLmZvckVhY2goZnVuY3Rpb24oaGFuZGxlcikgeyBoYW5kbGVyKGV4ZWNPcHRpb25zKTsgfSk7XG5cdG1vZHVsZSA9IGV4ZWNPcHRpb25zLm1vZHVsZTtcblx0ZXhlY09wdGlvbnMuZmFjdG9yeS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBleGVjT3B0aW9ucy5yZXF1aXJlKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4vLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuX193ZWJwYWNrX3JlcXVpcmVfXy5jID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fO1xuXG4vLyBleHBvc2UgdGhlIG1vZHVsZSBleGVjdXRpb24gaW50ZXJjZXB0b3Jcbl9fd2VicGFja19yZXF1aXJlX18uaSA9IFtdO1xuXG4iLCIvLyBUaGlzIGZ1bmN0aW9uIGFsbG93IHRvIHJlZmVyZW5jZSBhbGwgY2h1bmtzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmh1ID0gKGNodW5rSWQpID0+IHtcblx0Ly8gcmV0dXJuIHVybCBmb3IgZmlsZW5hbWVzIGJhc2VkIG9uIHRlbXBsYXRlXG5cdHJldHVybiBcIlwiICsgY2h1bmtJZCArIFwiLlwiICsgX193ZWJwYWNrX3JlcXVpcmVfXy5oKCkgKyBcIi5ob3QtdXBkYXRlLmpzXCI7XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uaG1yRiA9ICgpID0+IChcIm1haW4uXCIgKyBfX3dlYnBhY2tfcmVxdWlyZV9fLmgoKSArIFwiLmhvdC11cGRhdGUuanNvblwiKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCI3MDU1ZDlhNDJkOWNkY2I4ZTE2Y1wiKSIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsInZhciBpblByb2dyZXNzID0ge307XG52YXIgZGF0YVdlYnBhY2tQcmVmaXggPSBcIlRldHJpczpcIjtcbi8vIGxvYWRTY3JpcHQgZnVuY3Rpb24gdG8gbG9hZCBhIHNjcmlwdCB2aWEgc2NyaXB0IHRhZ1xuX193ZWJwYWNrX3JlcXVpcmVfXy5sID0gKHVybCwgZG9uZSwga2V5LCBjaHVua0lkKSA9PiB7XG5cdGlmKGluUHJvZ3Jlc3NbdXJsXSkgeyBpblByb2dyZXNzW3VybF0ucHVzaChkb25lKTsgcmV0dXJuOyB9XG5cdHZhciBzY3JpcHQsIG5lZWRBdHRhY2g7XG5cdGlmKGtleSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc2NyaXB0cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIHMgPSBzY3JpcHRzW2ldO1xuXHRcdFx0aWYocy5nZXRBdHRyaWJ1dGUoXCJzcmNcIikgPT0gdXJsIHx8IHMuZ2V0QXR0cmlidXRlKFwiZGF0YS13ZWJwYWNrXCIpID09IGRhdGFXZWJwYWNrUHJlZml4ICsga2V5KSB7IHNjcmlwdCA9IHM7IGJyZWFrOyB9XG5cdFx0fVxuXHR9XG5cdGlmKCFzY3JpcHQpIHtcblx0XHRuZWVkQXR0YWNoID0gdHJ1ZTtcblx0XHRzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblxuXHRcdHNjcmlwdC5jaGFyc2V0ID0gJ3V0Zi04Jztcblx0XHRzY3JpcHQudGltZW91dCA9IDEyMDtcblx0XHRpZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5uYykge1xuXHRcdFx0c2NyaXB0LnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIF9fd2VicGFja19yZXF1aXJlX18ubmMpO1xuXHRcdH1cblx0XHRzY3JpcHQuc2V0QXR0cmlidXRlKFwiZGF0YS13ZWJwYWNrXCIsIGRhdGFXZWJwYWNrUHJlZml4ICsga2V5KTtcblx0XHRzY3JpcHQuc3JjID0gdXJsO1xuXHR9XG5cdGluUHJvZ3Jlc3NbdXJsXSA9IFtkb25lXTtcblx0dmFyIG9uU2NyaXB0Q29tcGxldGUgPSAocHJldiwgZXZlbnQpID0+IHtcblx0XHQvLyBhdm9pZCBtZW0gbGVha3MgaW4gSUUuXG5cdFx0c2NyaXB0Lm9uZXJyb3IgPSBzY3JpcHQub25sb2FkID0gbnVsbDtcblx0XHRjbGVhclRpbWVvdXQodGltZW91dCk7XG5cdFx0dmFyIGRvbmVGbnMgPSBpblByb2dyZXNzW3VybF07XG5cdFx0ZGVsZXRlIGluUHJvZ3Jlc3NbdXJsXTtcblx0XHRzY3JpcHQucGFyZW50Tm9kZSAmJiBzY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY3JpcHQpO1xuXHRcdGRvbmVGbnMgJiYgZG9uZUZucy5mb3JFYWNoKChmbikgPT4gKGZuKGV2ZW50KSkpO1xuXHRcdGlmKHByZXYpIHJldHVybiBwcmV2KGV2ZW50KTtcblx0fVxuXHQ7XG5cdHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChvblNjcmlwdENvbXBsZXRlLmJpbmQobnVsbCwgdW5kZWZpbmVkLCB7IHR5cGU6ICd0aW1lb3V0JywgdGFyZ2V0OiBzY3JpcHQgfSksIDEyMDAwMCk7XG5cdHNjcmlwdC5vbmVycm9yID0gb25TY3JpcHRDb21wbGV0ZS5iaW5kKG51bGwsIHNjcmlwdC5vbmVycm9yKTtcblx0c2NyaXB0Lm9ubG9hZCA9IG9uU2NyaXB0Q29tcGxldGUuYmluZChudWxsLCBzY3JpcHQub25sb2FkKTtcblx0bmVlZEF0dGFjaCAmJiBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG59OyIsInZhciBjdXJyZW50TW9kdWxlRGF0YSA9IHt9O1xudmFyIGluc3RhbGxlZE1vZHVsZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmM7XG5cbi8vIG1vZHVsZSBhbmQgcmVxdWlyZSBjcmVhdGlvblxudmFyIGN1cnJlbnRDaGlsZE1vZHVsZTtcbnZhciBjdXJyZW50UGFyZW50cyA9IFtdO1xuXG4vLyBzdGF0dXNcbnZhciByZWdpc3RlcmVkU3RhdHVzSGFuZGxlcnMgPSBbXTtcbnZhciBjdXJyZW50U3RhdHVzID0gXCJpZGxlXCI7XG5cbi8vIHdoaWxlIGRvd25sb2FkaW5nXG52YXIgYmxvY2tpbmdQcm9taXNlcztcblxuLy8gVGhlIHVwZGF0ZSBpbmZvXG52YXIgY3VycmVudFVwZGF0ZUFwcGx5SGFuZGxlcnM7XG52YXIgcXVldWVkSW52YWxpZGF0ZWRNb2R1bGVzO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbl9fd2VicGFja19yZXF1aXJlX18uaG1yRCA9IGN1cnJlbnRNb2R1bGVEYXRhO1xuXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmkucHVzaChmdW5jdGlvbiAob3B0aW9ucykge1xuXHR2YXIgbW9kdWxlID0gb3B0aW9ucy5tb2R1bGU7XG5cdHZhciByZXF1aXJlID0gY3JlYXRlUmVxdWlyZShvcHRpb25zLnJlcXVpcmUsIG9wdGlvbnMuaWQpO1xuXHRtb2R1bGUuaG90ID0gY3JlYXRlTW9kdWxlSG90T2JqZWN0KG9wdGlvbnMuaWQsIG1vZHVsZSk7XG5cdG1vZHVsZS5wYXJlbnRzID0gY3VycmVudFBhcmVudHM7XG5cdG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRjdXJyZW50UGFyZW50cyA9IFtdO1xuXHRvcHRpb25zLnJlcXVpcmUgPSByZXF1aXJlO1xufSk7XG5cbl9fd2VicGFja19yZXF1aXJlX18uaG1yQyA9IHt9O1xuX193ZWJwYWNrX3JlcXVpcmVfXy5obXJJID0ge307XG5cbmZ1bmN0aW9uIGNyZWF0ZVJlcXVpcmUocmVxdWlyZSwgbW9kdWxlSWQpIHtcblx0dmFyIG1lID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XG5cdGlmICghbWUpIHJldHVybiByZXF1aXJlO1xuXHR2YXIgZm4gPSBmdW5jdGlvbiAocmVxdWVzdCkge1xuXHRcdGlmIChtZS5ob3QuYWN0aXZlKSB7XG5cdFx0XHRpZiAoaW5zdGFsbGVkTW9kdWxlc1tyZXF1ZXN0XSkge1xuXHRcdFx0XHR2YXIgcGFyZW50cyA9IGluc3RhbGxlZE1vZHVsZXNbcmVxdWVzdF0ucGFyZW50cztcblx0XHRcdFx0aWYgKHBhcmVudHMuaW5kZXhPZihtb2R1bGVJZCkgPT09IC0xKSB7XG5cdFx0XHRcdFx0cGFyZW50cy5wdXNoKG1vZHVsZUlkKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y3VycmVudFBhcmVudHMgPSBbbW9kdWxlSWRdO1xuXHRcdFx0XHRjdXJyZW50Q2hpbGRNb2R1bGUgPSByZXF1ZXN0O1xuXHRcdFx0fVxuXHRcdFx0aWYgKG1lLmNoaWxkcmVuLmluZGV4T2YocmVxdWVzdCkgPT09IC0xKSB7XG5cdFx0XHRcdG1lLmNoaWxkcmVuLnB1c2gocmVxdWVzdCk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnNvbGUud2Fybihcblx0XHRcdFx0XCJbSE1SXSB1bmV4cGVjdGVkIHJlcXVpcmUoXCIgK1xuXHRcdFx0XHRcdHJlcXVlc3QgK1xuXHRcdFx0XHRcdFwiKSBmcm9tIGRpc3Bvc2VkIG1vZHVsZSBcIiArXG5cdFx0XHRcdFx0bW9kdWxlSWRcblx0XHRcdCk7XG5cdFx0XHRjdXJyZW50UGFyZW50cyA9IFtdO1xuXHRcdH1cblx0XHRyZXR1cm4gcmVxdWlyZShyZXF1ZXN0KTtcblx0fTtcblx0dmFyIGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvciA9IGZ1bmN0aW9uIChuYW1lKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0cmV0dXJuIHJlcXVpcmVbbmFtZV07XG5cdFx0XHR9LFxuXHRcdFx0c2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcblx0XHRcdFx0cmVxdWlyZVtuYW1lXSA9IHZhbHVlO1xuXHRcdFx0fVxuXHRcdH07XG5cdH07XG5cdGZvciAodmFyIG5hbWUgaW4gcmVxdWlyZSkge1xuXHRcdGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocmVxdWlyZSwgbmFtZSkgJiYgbmFtZSAhPT0gXCJlXCIpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbiwgbmFtZSwgY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yKG5hbWUpKTtcblx0XHR9XG5cdH1cblx0Zm4uZSA9IGZ1bmN0aW9uIChjaHVua0lkKSB7XG5cdFx0cmV0dXJuIHRyYWNrQmxvY2tpbmdQcm9taXNlKHJlcXVpcmUuZShjaHVua0lkKSk7XG5cdH07XG5cdHJldHVybiBmbjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTW9kdWxlSG90T2JqZWN0KG1vZHVsZUlkLCBtZSkge1xuXHR2YXIgaG90ID0ge1xuXHRcdC8vIHByaXZhdGUgc3R1ZmZcblx0XHRfYWNjZXB0ZWREZXBlbmRlbmNpZXM6IHt9LFxuXHRcdF9kZWNsaW5lZERlcGVuZGVuY2llczoge30sXG5cdFx0X3NlbGZBY2NlcHRlZDogZmFsc2UsXG5cdFx0X3NlbGZEZWNsaW5lZDogZmFsc2UsXG5cdFx0X3NlbGZJbnZhbGlkYXRlZDogZmFsc2UsXG5cdFx0X2Rpc3Bvc2VIYW5kbGVyczogW10sXG5cdFx0X21haW46IGN1cnJlbnRDaGlsZE1vZHVsZSAhPT0gbW9kdWxlSWQsXG5cdFx0X3JlcXVpcmVTZWxmOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRjdXJyZW50UGFyZW50cyA9IG1lLnBhcmVudHMuc2xpY2UoKTtcblx0XHRcdGN1cnJlbnRDaGlsZE1vZHVsZSA9IG1vZHVsZUlkO1xuXHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCk7XG5cdFx0fSxcblxuXHRcdC8vIE1vZHVsZSBBUElcblx0XHRhY3RpdmU6IHRydWUsXG5cdFx0YWNjZXB0OiBmdW5jdGlvbiAoZGVwLCBjYWxsYmFjaykge1xuXHRcdFx0aWYgKGRlcCA9PT0gdW5kZWZpbmVkKSBob3QuX3NlbGZBY2NlcHRlZCA9IHRydWU7XG5cdFx0XHRlbHNlIGlmICh0eXBlb2YgZGVwID09PSBcImZ1bmN0aW9uXCIpIGhvdC5fc2VsZkFjY2VwdGVkID0gZGVwO1xuXHRcdFx0ZWxzZSBpZiAodHlwZW9mIGRlcCA9PT0gXCJvYmplY3RcIiAmJiBkZXAgIT09IG51bGwpXG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZGVwLmxlbmd0aDsgaSsrKVxuXHRcdFx0XHRcdGhvdC5fYWNjZXB0ZWREZXBlbmRlbmNpZXNbZGVwW2ldXSA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uICgpIHt9O1xuXHRcdFx0ZWxzZSBob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW2RlcF0gPSBjYWxsYmFjayB8fCBmdW5jdGlvbiAoKSB7fTtcblx0XHR9LFxuXHRcdGRlY2xpbmU6IGZ1bmN0aW9uIChkZXApIHtcblx0XHRcdGlmIChkZXAgPT09IHVuZGVmaW5lZCkgaG90Ll9zZWxmRGVjbGluZWQgPSB0cnVlO1xuXHRcdFx0ZWxzZSBpZiAodHlwZW9mIGRlcCA9PT0gXCJvYmplY3RcIiAmJiBkZXAgIT09IG51bGwpXG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZGVwLmxlbmd0aDsgaSsrKVxuXHRcdFx0XHRcdGhvdC5fZGVjbGluZWREZXBlbmRlbmNpZXNbZGVwW2ldXSA9IHRydWU7XG5cdFx0XHRlbHNlIGhvdC5fZGVjbGluZWREZXBlbmRlbmNpZXNbZGVwXSA9IHRydWU7XG5cdFx0fSxcblx0XHRkaXNwb3NlOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcblx0XHRcdGhvdC5fZGlzcG9zZUhhbmRsZXJzLnB1c2goY2FsbGJhY2spO1xuXHRcdH0sXG5cdFx0YWRkRGlzcG9zZUhhbmRsZXI6IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuXHRcdFx0aG90Ll9kaXNwb3NlSGFuZGxlcnMucHVzaChjYWxsYmFjayk7XG5cdFx0fSxcblx0XHRyZW1vdmVEaXNwb3NlSGFuZGxlcjogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG5cdFx0XHR2YXIgaWR4ID0gaG90Ll9kaXNwb3NlSGFuZGxlcnMuaW5kZXhPZihjYWxsYmFjayk7XG5cdFx0XHRpZiAoaWR4ID49IDApIGhvdC5fZGlzcG9zZUhhbmRsZXJzLnNwbGljZShpZHgsIDEpO1xuXHRcdH0sXG5cdFx0aW52YWxpZGF0ZTogZnVuY3Rpb24gKCkge1xuXHRcdFx0dGhpcy5fc2VsZkludmFsaWRhdGVkID0gdHJ1ZTtcblx0XHRcdHN3aXRjaCAoY3VycmVudFN0YXR1cykge1xuXHRcdFx0XHRjYXNlIFwiaWRsZVwiOlxuXHRcdFx0XHRcdGN1cnJlbnRVcGRhdGVBcHBseUhhbmRsZXJzID0gW107XG5cdFx0XHRcdFx0T2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5obXJJKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRcdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18uaG1ySVtrZXldKFxuXHRcdFx0XHRcdFx0XHRtb2R1bGVJZCxcblx0XHRcdFx0XHRcdFx0Y3VycmVudFVwZGF0ZUFwcGx5SGFuZGxlcnNcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0c2V0U3RhdHVzKFwicmVhZHlcIik7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJyZWFkeVwiOlxuXHRcdFx0XHRcdE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uaG1ySSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0XHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmhtcklba2V5XShcblx0XHRcdFx0XHRcdFx0bW9kdWxlSWQsXG5cdFx0XHRcdFx0XHRcdGN1cnJlbnRVcGRhdGVBcHBseUhhbmRsZXJzXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwicHJlcGFyZVwiOlxuXHRcdFx0XHRjYXNlIFwiY2hlY2tcIjpcblx0XHRcdFx0Y2FzZSBcImRpc3Bvc2VcIjpcblx0XHRcdFx0Y2FzZSBcImFwcGx5XCI6XG5cdFx0XHRcdFx0KHF1ZXVlZEludmFsaWRhdGVkTW9kdWxlcyA9IHF1ZXVlZEludmFsaWRhdGVkTW9kdWxlcyB8fCBbXSkucHVzaChcblx0XHRcdFx0XHRcdG1vZHVsZUlkXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHQvLyBpZ25vcmUgcmVxdWVzdHMgaW4gZXJyb3Igc3RhdGVzXG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdC8vIE1hbmFnZW1lbnQgQVBJXG5cdFx0Y2hlY2s6IGhvdENoZWNrLFxuXHRcdGFwcGx5OiBob3RBcHBseSxcblx0XHRzdGF0dXM6IGZ1bmN0aW9uIChsKSB7XG5cdFx0XHRpZiAoIWwpIHJldHVybiBjdXJyZW50U3RhdHVzO1xuXHRcdFx0cmVnaXN0ZXJlZFN0YXR1c0hhbmRsZXJzLnB1c2gobCk7XG5cdFx0fSxcblx0XHRhZGRTdGF0dXNIYW5kbGVyOiBmdW5jdGlvbiAobCkge1xuXHRcdFx0cmVnaXN0ZXJlZFN0YXR1c0hhbmRsZXJzLnB1c2gobCk7XG5cdFx0fSxcblx0XHRyZW1vdmVTdGF0dXNIYW5kbGVyOiBmdW5jdGlvbiAobCkge1xuXHRcdFx0dmFyIGlkeCA9IHJlZ2lzdGVyZWRTdGF0dXNIYW5kbGVycy5pbmRleE9mKGwpO1xuXHRcdFx0aWYgKGlkeCA+PSAwKSByZWdpc3RlcmVkU3RhdHVzSGFuZGxlcnMuc3BsaWNlKGlkeCwgMSk7XG5cdFx0fSxcblxuXHRcdC8vaW5oZXJpdCBmcm9tIHByZXZpb3VzIGRpc3Bvc2UgY2FsbFxuXHRcdGRhdGE6IGN1cnJlbnRNb2R1bGVEYXRhW21vZHVsZUlkXVxuXHR9O1xuXHRjdXJyZW50Q2hpbGRNb2R1bGUgPSB1bmRlZmluZWQ7XG5cdHJldHVybiBob3Q7XG59XG5cbmZ1bmN0aW9uIHNldFN0YXR1cyhuZXdTdGF0dXMpIHtcblx0Y3VycmVudFN0YXR1cyA9IG5ld1N0YXR1cztcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCByZWdpc3RlcmVkU3RhdHVzSGFuZGxlcnMubGVuZ3RoOyBpKyspXG5cdFx0cmVnaXN0ZXJlZFN0YXR1c0hhbmRsZXJzW2ldLmNhbGwobnVsbCwgbmV3U3RhdHVzKTtcbn1cblxuZnVuY3Rpb24gdHJhY2tCbG9ja2luZ1Byb21pc2UocHJvbWlzZSkge1xuXHRzd2l0Y2ggKGN1cnJlbnRTdGF0dXMpIHtcblx0XHRjYXNlIFwicmVhZHlcIjpcblx0XHRcdHNldFN0YXR1cyhcInByZXBhcmVcIik7XG5cdFx0XHRibG9ja2luZ1Byb21pc2VzLnB1c2gocHJvbWlzZSk7XG5cdFx0XHR3YWl0Rm9yQmxvY2tpbmdQcm9taXNlcyhmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHNldFN0YXR1cyhcInJlYWR5XCIpO1xuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gcHJvbWlzZTtcblx0XHRjYXNlIFwicHJlcGFyZVwiOlxuXHRcdFx0YmxvY2tpbmdQcm9taXNlcy5wdXNoKHByb21pc2UpO1xuXHRcdFx0cmV0dXJuIHByb21pc2U7XG5cdFx0ZGVmYXVsdDpcblx0XHRcdHJldHVybiBwcm9taXNlO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHdhaXRGb3JCbG9ja2luZ1Byb21pc2VzKGZuKSB7XG5cdGlmIChibG9ja2luZ1Byb21pc2VzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGZuKCk7XG5cdHZhciBibG9ja2VyID0gYmxvY2tpbmdQcm9taXNlcztcblx0YmxvY2tpbmdQcm9taXNlcyA9IFtdO1xuXHRyZXR1cm4gUHJvbWlzZS5hbGwoYmxvY2tlcikudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuIHdhaXRGb3JCbG9ja2luZ1Byb21pc2VzKGZuKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGhvdENoZWNrKGFwcGx5T25VcGRhdGUpIHtcblx0aWYgKGN1cnJlbnRTdGF0dXMgIT09IFwiaWRsZVwiKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiY2hlY2soKSBpcyBvbmx5IGFsbG93ZWQgaW4gaWRsZSBzdGF0dXNcIik7XG5cdH1cblx0c2V0U3RhdHVzKFwiY2hlY2tcIik7XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmhtck0oKS50aGVuKGZ1bmN0aW9uICh1cGRhdGUpIHtcblx0XHRpZiAoIXVwZGF0ZSkge1xuXHRcdFx0c2V0U3RhdHVzKGFwcGx5SW52YWxpZGF0ZWRNb2R1bGVzKCkgPyBcInJlYWR5XCIgOiBcImlkbGVcIik7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblx0XHRzZXRTdGF0dXMoXCJwcmVwYXJlXCIpO1xuXG5cdFx0dmFyIHVwZGF0ZWRNb2R1bGVzID0gW107XG5cdFx0YmxvY2tpbmdQcm9taXNlcyA9IFtdO1xuXHRcdGN1cnJlbnRVcGRhdGVBcHBseUhhbmRsZXJzID0gW107XG5cblx0XHRyZXR1cm4gUHJvbWlzZS5hbGwoXG5cdFx0XHRPYmplY3Qua2V5cyhfX3dlYnBhY2tfcmVxdWlyZV9fLmhtckMpLnJlZHVjZShmdW5jdGlvbiAoXG5cdFx0XHRcdHByb21pc2VzLFxuXHRcdFx0XHRrZXlcblx0XHRcdCkge1xuXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmhtckNba2V5XShcblx0XHRcdFx0XHR1cGRhdGUuYyxcblx0XHRcdFx0XHR1cGRhdGUucixcblx0XHRcdFx0XHR1cGRhdGUubSxcblx0XHRcdFx0XHRwcm9taXNlcyxcblx0XHRcdFx0XHRjdXJyZW50VXBkYXRlQXBwbHlIYW5kbGVycyxcblx0XHRcdFx0XHR1cGRhdGVkTW9kdWxlc1xuXHRcdFx0XHQpO1xuXHRcdFx0XHRyZXR1cm4gcHJvbWlzZXM7XG5cdFx0XHR9LFxuXHRcdFx0W10pXG5cdFx0KS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiB3YWl0Rm9yQmxvY2tpbmdQcm9taXNlcyhmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGlmIChhcHBseU9uVXBkYXRlKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGludGVybmFsQXBwbHkoYXBwbHlPblVwZGF0ZSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c2V0U3RhdHVzKFwicmVhZHlcIik7XG5cblx0XHRcdFx0XHRyZXR1cm4gdXBkYXRlZE1vZHVsZXM7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gaG90QXBwbHkob3B0aW9ucykge1xuXHRpZiAoY3VycmVudFN0YXR1cyAhPT0gXCJyZWFkeVwiKSB7XG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiYXBwbHkoKSBpcyBvbmx5IGFsbG93ZWQgaW4gcmVhZHkgc3RhdHVzXCIpO1xuXHRcdH0pO1xuXHR9XG5cdHJldHVybiBpbnRlcm5hbEFwcGx5KG9wdGlvbnMpO1xufVxuXG5mdW5jdGlvbiBpbnRlcm5hbEFwcGx5KG9wdGlvbnMpIHtcblx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cblx0YXBwbHlJbnZhbGlkYXRlZE1vZHVsZXMoKTtcblxuXHR2YXIgcmVzdWx0cyA9IGN1cnJlbnRVcGRhdGVBcHBseUhhbmRsZXJzLm1hcChmdW5jdGlvbiAoaGFuZGxlcikge1xuXHRcdHJldHVybiBoYW5kbGVyKG9wdGlvbnMpO1xuXHR9KTtcblx0Y3VycmVudFVwZGF0ZUFwcGx5SGFuZGxlcnMgPSB1bmRlZmluZWQ7XG5cblx0dmFyIGVycm9ycyA9IHJlc3VsdHNcblx0XHQubWFwKGZ1bmN0aW9uIChyKSB7XG5cdFx0XHRyZXR1cm4gci5lcnJvcjtcblx0XHR9KVxuXHRcdC5maWx0ZXIoQm9vbGVhbik7XG5cblx0aWYgKGVycm9ycy5sZW5ndGggPiAwKSB7XG5cdFx0c2V0U3RhdHVzKFwiYWJvcnRcIik7XG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHRcdFx0dGhyb3cgZXJyb3JzWzBdO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gTm93IGluIFwiZGlzcG9zZVwiIHBoYXNlXG5cdHNldFN0YXR1cyhcImRpc3Bvc2VcIik7XG5cblx0cmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uIChyZXN1bHQpIHtcblx0XHRpZiAocmVzdWx0LmRpc3Bvc2UpIHJlc3VsdC5kaXNwb3NlKCk7XG5cdH0pO1xuXG5cdC8vIE5vdyBpbiBcImFwcGx5XCIgcGhhc2Vcblx0c2V0U3RhdHVzKFwiYXBwbHlcIik7XG5cblx0dmFyIGVycm9yO1xuXHR2YXIgcmVwb3J0RXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdFx0aWYgKCFlcnJvcikgZXJyb3IgPSBlcnI7XG5cdH07XG5cblx0dmFyIG91dGRhdGVkTW9kdWxlcyA9IFtdO1xuXHRyZXN1bHRzLmZvckVhY2goZnVuY3Rpb24gKHJlc3VsdCkge1xuXHRcdGlmIChyZXN1bHQuYXBwbHkpIHtcblx0XHRcdHZhciBtb2R1bGVzID0gcmVzdWx0LmFwcGx5KHJlcG9ydEVycm9yKTtcblx0XHRcdGlmIChtb2R1bGVzKSB7XG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbW9kdWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdG91dGRhdGVkTW9kdWxlcy5wdXNoKG1vZHVsZXNbaV0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcblxuXHQvLyBoYW5kbGUgZXJyb3JzIGluIGFjY2VwdCBoYW5kbGVycyBhbmQgc2VsZiBhY2NlcHRlZCBtb2R1bGUgbG9hZFxuXHRpZiAoZXJyb3IpIHtcblx0XHRzZXRTdGF0dXMoXCJmYWlsXCIpO1xuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdHRocm93IGVycm9yO1xuXHRcdH0pO1xuXHR9XG5cblx0aWYgKHF1ZXVlZEludmFsaWRhdGVkTW9kdWxlcykge1xuXHRcdHJldHVybiBpbnRlcm5hbEFwcGx5KG9wdGlvbnMpLnRoZW4oZnVuY3Rpb24gKGxpc3QpIHtcblx0XHRcdG91dGRhdGVkTW9kdWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChtb2R1bGVJZCkge1xuXHRcdFx0XHRpZiAobGlzdC5pbmRleE9mKG1vZHVsZUlkKSA8IDApIGxpc3QucHVzaChtb2R1bGVJZCk7XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBsaXN0O1xuXHRcdH0pO1xuXHR9XG5cblx0c2V0U3RhdHVzKFwiaWRsZVwiKTtcblx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShvdXRkYXRlZE1vZHVsZXMpO1xufVxuXG5mdW5jdGlvbiBhcHBseUludmFsaWRhdGVkTW9kdWxlcygpIHtcblx0aWYgKHF1ZXVlZEludmFsaWRhdGVkTW9kdWxlcykge1xuXHRcdGlmICghY3VycmVudFVwZGF0ZUFwcGx5SGFuZGxlcnMpIGN1cnJlbnRVcGRhdGVBcHBseUhhbmRsZXJzID0gW107XG5cdFx0T2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5obXJJKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRcdHF1ZXVlZEludmFsaWRhdGVkTW9kdWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChtb2R1bGVJZCkge1xuXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmhtcklba2V5XShcblx0XHRcdFx0XHRtb2R1bGVJZCxcblx0XHRcdFx0XHRjdXJyZW50VXBkYXRlQXBwbHlIYW5kbGVyc1xuXHRcdFx0XHQpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdFx0cXVldWVkSW52YWxpZGF0ZWRNb2R1bGVzID0gdW5kZWZpbmVkO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG59IiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjXG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkgc2NyaXB0VXJsID0gc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdLnNyY1xuXHR9XG59XG4vLyBXaGVuIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2hlcmUgYW4gYXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCB5b3UgbXVzdCBzcGVjaWZ5IGFuIG91dHB1dC5wdWJsaWNQYXRoIG1hbnVhbGx5IHZpYSBjb25maWd1cmF0aW9uXG4vLyBvciBwYXNzIGFuIGVtcHR5IHN0cmluZyAoXCJcIikgYW5kIHNldCB0aGUgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gdmFyaWFibGUgZnJvbSB5b3VyIGNvZGUgdG8gdXNlIHlvdXIgb3duIGxvZ2ljLlxuaWYgKCFzY3JpcHRVcmwpIHRocm93IG5ldyBFcnJvcihcIkF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuc2NyaXB0VXJsID0gc2NyaXB0VXJsLnJlcGxhY2UoLyMuKiQvLCBcIlwiKS5yZXBsYWNlKC9cXD8uKiQvLCBcIlwiKS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sIFwiL1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18ucCA9IHNjcmlwdFVybDsiLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFByb21pc2UgPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHRcIm1haW5cIjogMFxufTtcblxuXG4vLyBubyBjaHVuayBvbiBkZW1hbmQgbG9hZGluZ1xuXG4vLyBubyBwcmVmZXRjaGluZ1xuXG4vLyBubyBwcmVsb2FkZWRcblxudmFyIGN1cnJlbnRVcGRhdGVkTW9kdWxlc0xpc3Q7XG52YXIgd2FpdGluZ1VwZGF0ZVJlc29sdmVzID0ge307XG5mdW5jdGlvbiBsb2FkVXBkYXRlQ2h1bmsoY2h1bmtJZCkge1xuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdHdhaXRpbmdVcGRhdGVSZXNvbHZlc1tjaHVua0lkXSA9IHJlc29sdmU7XG5cdFx0Ly8gc3RhcnQgdXBkYXRlIGNodW5rIGxvYWRpbmdcblx0XHR2YXIgdXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgX193ZWJwYWNrX3JlcXVpcmVfXy5odShjaHVua0lkKTtcblx0XHQvLyBjcmVhdGUgZXJyb3IgYmVmb3JlIHN0YWNrIHVud291bmQgdG8gZ2V0IHVzZWZ1bCBzdGFja3RyYWNlIGxhdGVyXG5cdFx0dmFyIGVycm9yID0gbmV3IEVycm9yKCk7XG5cdFx0dmFyIGxvYWRpbmdFbmRlZCA9IChldmVudCkgPT4ge1xuXHRcdFx0aWYod2FpdGluZ1VwZGF0ZVJlc29sdmVzW2NodW5rSWRdKSB7XG5cdFx0XHRcdHdhaXRpbmdVcGRhdGVSZXNvbHZlc1tjaHVua0lkXSA9IHVuZGVmaW5lZFxuXHRcdFx0XHR2YXIgZXJyb3JUeXBlID0gZXZlbnQgJiYgKGV2ZW50LnR5cGUgPT09ICdsb2FkJyA/ICdtaXNzaW5nJyA6IGV2ZW50LnR5cGUpO1xuXHRcdFx0XHR2YXIgcmVhbFNyYyA9IGV2ZW50ICYmIGV2ZW50LnRhcmdldCAmJiBldmVudC50YXJnZXQuc3JjO1xuXHRcdFx0XHRlcnJvci5tZXNzYWdlID0gJ0xvYWRpbmcgaG90IHVwZGF0ZSBjaHVuayAnICsgY2h1bmtJZCArICcgZmFpbGVkLlxcbignICsgZXJyb3JUeXBlICsgJzogJyArIHJlYWxTcmMgKyAnKSc7XG5cdFx0XHRcdGVycm9yLm5hbWUgPSAnQ2h1bmtMb2FkRXJyb3InO1xuXHRcdFx0XHRlcnJvci50eXBlID0gZXJyb3JUeXBlO1xuXHRcdFx0XHRlcnJvci5yZXF1ZXN0ID0gcmVhbFNyYztcblx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdF9fd2VicGFja19yZXF1aXJlX18ubCh1cmwsIGxvYWRpbmdFbmRlZCk7XG5cdH0pO1xufVxuXG5zZWxmW1wid2VicGFja0hvdFVwZGF0ZVRldHJpc1wiXSA9IChjaHVua0lkLCBtb3JlTW9kdWxlcywgcnVudGltZSkgPT4ge1xuXHRmb3IodmFyIG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcblx0XHRcdGN1cnJlbnRVcGRhdGVbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuXHRcdFx0aWYoY3VycmVudFVwZGF0ZWRNb2R1bGVzTGlzdCkgY3VycmVudFVwZGF0ZWRNb2R1bGVzTGlzdC5wdXNoKG1vZHVsZUlkKTtcblx0XHR9XG5cdH1cblx0aWYocnVudGltZSkgY3VycmVudFVwZGF0ZVJ1bnRpbWUucHVzaChydW50aW1lKTtcblx0aWYod2FpdGluZ1VwZGF0ZVJlc29sdmVzW2NodW5rSWRdKSB7XG5cdFx0d2FpdGluZ1VwZGF0ZVJlc29sdmVzW2NodW5rSWRdKCk7XG5cdFx0d2FpdGluZ1VwZGF0ZVJlc29sdmVzW2NodW5rSWRdID0gdW5kZWZpbmVkO1xuXHR9XG59O1xuXG52YXIgY3VycmVudFVwZGF0ZUNodW5rcztcbnZhciBjdXJyZW50VXBkYXRlO1xudmFyIGN1cnJlbnRVcGRhdGVSZW1vdmVkQ2h1bmtzO1xudmFyIGN1cnJlbnRVcGRhdGVSdW50aW1lO1xuZnVuY3Rpb24gYXBwbHlIYW5kbGVyKG9wdGlvbnMpIHtcblx0aWYgKF9fd2VicGFja19yZXF1aXJlX18uZikgZGVsZXRlIF9fd2VicGFja19yZXF1aXJlX18uZi5qc29ucEhtcjtcblx0Y3VycmVudFVwZGF0ZUNodW5rcyA9IHVuZGVmaW5lZDtcblx0ZnVuY3Rpb24gZ2V0QWZmZWN0ZWRNb2R1bGVFZmZlY3RzKHVwZGF0ZU1vZHVsZUlkKSB7XG5cdFx0dmFyIG91dGRhdGVkTW9kdWxlcyA9IFt1cGRhdGVNb2R1bGVJZF07XG5cdFx0dmFyIG91dGRhdGVkRGVwZW5kZW5jaWVzID0ge307XG5cblx0XHR2YXIgcXVldWUgPSBvdXRkYXRlZE1vZHVsZXMubWFwKGZ1bmN0aW9uIChpZCkge1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Y2hhaW46IFtpZF0sXG5cdFx0XHRcdGlkOiBpZFxuXHRcdFx0fTtcblx0XHR9KTtcblx0XHR3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuXHRcdFx0dmFyIHF1ZXVlSXRlbSA9IHF1ZXVlLnBvcCgpO1xuXHRcdFx0dmFyIG1vZHVsZUlkID0gcXVldWVJdGVtLmlkO1xuXHRcdFx0dmFyIGNoYWluID0gcXVldWVJdGVtLmNoYWluO1xuXHRcdFx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19yZXF1aXJlX18uY1ttb2R1bGVJZF07XG5cdFx0XHRpZiAoXG5cdFx0XHRcdCFtb2R1bGUgfHxcblx0XHRcdFx0KG1vZHVsZS5ob3QuX3NlbGZBY2NlcHRlZCAmJiAhbW9kdWxlLmhvdC5fc2VsZkludmFsaWRhdGVkKVxuXHRcdFx0KVxuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdGlmIChtb2R1bGUuaG90Ll9zZWxmRGVjbGluZWQpIHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHR0eXBlOiBcInNlbGYtZGVjbGluZWRcIixcblx0XHRcdFx0XHRjaGFpbjogY2hhaW4sXG5cdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0XHRpZiAobW9kdWxlLmhvdC5fbWFpbikge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHR5cGU6IFwidW5hY2NlcHRlZFwiLFxuXHRcdFx0XHRcdGNoYWluOiBjaGFpbixcblx0XHRcdFx0XHRtb2R1bGVJZDogbW9kdWxlSWRcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbW9kdWxlLnBhcmVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dmFyIHBhcmVudElkID0gbW9kdWxlLnBhcmVudHNbaV07XG5cdFx0XHRcdHZhciBwYXJlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmNbcGFyZW50SWRdO1xuXHRcdFx0XHRpZiAoIXBhcmVudCkgY29udGludWU7XG5cdFx0XHRcdGlmIChwYXJlbnQuaG90Ll9kZWNsaW5lZERlcGVuZGVuY2llc1ttb2R1bGVJZF0pIHtcblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJkZWNsaW5lZFwiLFxuXHRcdFx0XHRcdFx0Y2hhaW46IGNoYWluLmNvbmNhdChbcGFyZW50SWRdKSxcblx0XHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZCxcblx0XHRcdFx0XHRcdHBhcmVudElkOiBwYXJlbnRJZFxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG91dGRhdGVkTW9kdWxlcy5pbmRleE9mKHBhcmVudElkKSAhPT0gLTEpIGNvbnRpbnVlO1xuXHRcdFx0XHRpZiAocGFyZW50LmhvdC5fYWNjZXB0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdKSB7XG5cdFx0XHRcdFx0aWYgKCFvdXRkYXRlZERlcGVuZGVuY2llc1twYXJlbnRJZF0pXG5cdFx0XHRcdFx0XHRvdXRkYXRlZERlcGVuZGVuY2llc1twYXJlbnRJZF0gPSBbXTtcblx0XHRcdFx0XHRhZGRBbGxUb1NldChvdXRkYXRlZERlcGVuZGVuY2llc1twYXJlbnRJZF0sIFttb2R1bGVJZF0pO1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGRlbGV0ZSBvdXRkYXRlZERlcGVuZGVuY2llc1twYXJlbnRJZF07XG5cdFx0XHRcdG91dGRhdGVkTW9kdWxlcy5wdXNoKHBhcmVudElkKTtcblx0XHRcdFx0cXVldWUucHVzaCh7XG5cdFx0XHRcdFx0Y2hhaW46IGNoYWluLmNvbmNhdChbcGFyZW50SWRdKSxcblx0XHRcdFx0XHRpZDogcGFyZW50SWRcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHR5cGU6IFwiYWNjZXB0ZWRcIixcblx0XHRcdG1vZHVsZUlkOiB1cGRhdGVNb2R1bGVJZCxcblx0XHRcdG91dGRhdGVkTW9kdWxlczogb3V0ZGF0ZWRNb2R1bGVzLFxuXHRcdFx0b3V0ZGF0ZWREZXBlbmRlbmNpZXM6IG91dGRhdGVkRGVwZW5kZW5jaWVzXG5cdFx0fTtcblx0fVxuXG5cdGZ1bmN0aW9uIGFkZEFsbFRvU2V0KGEsIGIpIHtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGIubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gYltpXTtcblx0XHRcdGlmIChhLmluZGV4T2YoaXRlbSkgPT09IC0xKSBhLnB1c2goaXRlbSk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gYXQgYmVnaW4gYWxsIHVwZGF0ZXMgbW9kdWxlcyBhcmUgb3V0ZGF0ZWRcblx0Ly8gdGhlIFwib3V0ZGF0ZWRcIiBzdGF0dXMgY2FuIHByb3BhZ2F0ZSB0byBwYXJlbnRzIGlmIHRoZXkgZG9uJ3QgYWNjZXB0IHRoZSBjaGlsZHJlblxuXHR2YXIgb3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSB7fTtcblx0dmFyIG91dGRhdGVkTW9kdWxlcyA9IFtdO1xuXHR2YXIgYXBwbGllZFVwZGF0ZSA9IHt9O1xuXG5cdHZhciB3YXJuVW5leHBlY3RlZFJlcXVpcmUgPSBmdW5jdGlvbiB3YXJuVW5leHBlY3RlZFJlcXVpcmUobW9kdWxlKSB7XG5cdFx0Y29uc29sZS53YXJuKFxuXHRcdFx0XCJbSE1SXSB1bmV4cGVjdGVkIHJlcXVpcmUoXCIgKyBtb2R1bGUuaWQgKyBcIikgdG8gZGlzcG9zZWQgbW9kdWxlXCJcblx0XHQpO1xuXHR9O1xuXG5cdGZvciAodmFyIG1vZHVsZUlkIGluIGN1cnJlbnRVcGRhdGUpIHtcblx0XHRpZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGN1cnJlbnRVcGRhdGUsIG1vZHVsZUlkKSkge1xuXHRcdFx0dmFyIG5ld01vZHVsZUZhY3RvcnkgPSBjdXJyZW50VXBkYXRlW21vZHVsZUlkXTtcblx0XHRcdC8qKiBAdHlwZSB7VE9ET30gKi9cblx0XHRcdHZhciByZXN1bHQ7XG5cdFx0XHRpZiAobmV3TW9kdWxlRmFjdG9yeSkge1xuXHRcdFx0XHRyZXN1bHQgPSBnZXRBZmZlY3RlZE1vZHVsZUVmZmVjdHMobW9kdWxlSWQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVzdWx0ID0ge1xuXHRcdFx0XHRcdHR5cGU6IFwiZGlzcG9zZWRcIixcblx0XHRcdFx0XHRtb2R1bGVJZDogbW9kdWxlSWRcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdC8qKiBAdHlwZSB7RXJyb3J8ZmFsc2V9ICovXG5cdFx0XHR2YXIgYWJvcnRFcnJvciA9IGZhbHNlO1xuXHRcdFx0dmFyIGRvQXBwbHkgPSBmYWxzZTtcblx0XHRcdHZhciBkb0Rpc3Bvc2UgPSBmYWxzZTtcblx0XHRcdHZhciBjaGFpbkluZm8gPSBcIlwiO1xuXHRcdFx0aWYgKHJlc3VsdC5jaGFpbikge1xuXHRcdFx0XHRjaGFpbkluZm8gPSBcIlxcblVwZGF0ZSBwcm9wYWdhdGlvbjogXCIgKyByZXN1bHQuY2hhaW4uam9pbihcIiAtPiBcIik7XG5cdFx0XHR9XG5cdFx0XHRzd2l0Y2ggKHJlc3VsdC50eXBlKSB7XG5cdFx0XHRcdGNhc2UgXCJzZWxmLWRlY2xpbmVkXCI6XG5cdFx0XHRcdFx0aWYgKG9wdGlvbnMub25EZWNsaW5lZCkgb3B0aW9ucy5vbkRlY2xpbmVkKHJlc3VsdCk7XG5cdFx0XHRcdFx0aWYgKCFvcHRpb25zLmlnbm9yZURlY2xpbmVkKVxuXHRcdFx0XHRcdFx0YWJvcnRFcnJvciA9IG5ldyBFcnJvcihcblx0XHRcdFx0XHRcdFx0XCJBYm9ydGVkIGJlY2F1c2Ugb2Ygc2VsZiBkZWNsaW5lOiBcIiArXG5cdFx0XHRcdFx0XHRcdFx0cmVzdWx0Lm1vZHVsZUlkICtcblx0XHRcdFx0XHRcdFx0XHRjaGFpbkluZm9cblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJkZWNsaW5lZFwiOlxuXHRcdFx0XHRcdGlmIChvcHRpb25zLm9uRGVjbGluZWQpIG9wdGlvbnMub25EZWNsaW5lZChyZXN1bHQpO1xuXHRcdFx0XHRcdGlmICghb3B0aW9ucy5pZ25vcmVEZWNsaW5lZClcblx0XHRcdFx0XHRcdGFib3J0RXJyb3IgPSBuZXcgRXJyb3IoXG5cdFx0XHRcdFx0XHRcdFwiQWJvcnRlZCBiZWNhdXNlIG9mIGRlY2xpbmVkIGRlcGVuZGVuY3k6IFwiICtcblx0XHRcdFx0XHRcdFx0XHRyZXN1bHQubW9kdWxlSWQgK1xuXHRcdFx0XHRcdFx0XHRcdFwiIGluIFwiICtcblx0XHRcdFx0XHRcdFx0XHRyZXN1bHQucGFyZW50SWQgK1xuXHRcdFx0XHRcdFx0XHRcdGNoYWluSW5mb1xuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcInVuYWNjZXB0ZWRcIjpcblx0XHRcdFx0XHRpZiAob3B0aW9ucy5vblVuYWNjZXB0ZWQpIG9wdGlvbnMub25VbmFjY2VwdGVkKHJlc3VsdCk7XG5cdFx0XHRcdFx0aWYgKCFvcHRpb25zLmlnbm9yZVVuYWNjZXB0ZWQpXG5cdFx0XHRcdFx0XHRhYm9ydEVycm9yID0gbmV3IEVycm9yKFxuXHRcdFx0XHRcdFx0XHRcIkFib3J0ZWQgYmVjYXVzZSBcIiArIG1vZHVsZUlkICsgXCIgaXMgbm90IGFjY2VwdGVkXCIgKyBjaGFpbkluZm9cblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJhY2NlcHRlZFwiOlxuXHRcdFx0XHRcdGlmIChvcHRpb25zLm9uQWNjZXB0ZWQpIG9wdGlvbnMub25BY2NlcHRlZChyZXN1bHQpO1xuXHRcdFx0XHRcdGRvQXBwbHkgPSB0cnVlO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwiZGlzcG9zZWRcIjpcblx0XHRcdFx0XHRpZiAob3B0aW9ucy5vbkRpc3Bvc2VkKSBvcHRpb25zLm9uRGlzcG9zZWQocmVzdWx0KTtcblx0XHRcdFx0XHRkb0Rpc3Bvc2UgPSB0cnVlO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIlVuZXhjZXB0aW9uIHR5cGUgXCIgKyByZXN1bHQudHlwZSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoYWJvcnRFcnJvcikge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdGVycm9yOiBhYm9ydEVycm9yXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0XHRpZiAoZG9BcHBseSkge1xuXHRcdFx0XHRhcHBsaWVkVXBkYXRlW21vZHVsZUlkXSA9IG5ld01vZHVsZUZhY3Rvcnk7XG5cdFx0XHRcdGFkZEFsbFRvU2V0KG91dGRhdGVkTW9kdWxlcywgcmVzdWx0Lm91dGRhdGVkTW9kdWxlcyk7XG5cdFx0XHRcdGZvciAobW9kdWxlSWQgaW4gcmVzdWx0Lm91dGRhdGVkRGVwZW5kZW5jaWVzKSB7XG5cdFx0XHRcdFx0aWYgKF9fd2VicGFja19yZXF1aXJlX18ubyhyZXN1bHQub3V0ZGF0ZWREZXBlbmRlbmNpZXMsIG1vZHVsZUlkKSkge1xuXHRcdFx0XHRcdFx0aWYgKCFvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0pXG5cdFx0XHRcdFx0XHRcdG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSA9IFtdO1xuXHRcdFx0XHRcdFx0YWRkQWxsVG9TZXQoXG5cdFx0XHRcdFx0XHRcdG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSxcblx0XHRcdFx0XHRcdFx0cmVzdWx0Lm91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmIChkb0Rpc3Bvc2UpIHtcblx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWRNb2R1bGVzLCBbcmVzdWx0Lm1vZHVsZUlkXSk7XG5cdFx0XHRcdGFwcGxpZWRVcGRhdGVbbW9kdWxlSWRdID0gd2FyblVuZXhwZWN0ZWRSZXF1aXJlO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRjdXJyZW50VXBkYXRlID0gdW5kZWZpbmVkO1xuXG5cdC8vIFN0b3JlIHNlbGYgYWNjZXB0ZWQgb3V0ZGF0ZWQgbW9kdWxlcyB0byByZXF1aXJlIHRoZW0gbGF0ZXIgYnkgdGhlIG1vZHVsZSBzeXN0ZW1cblx0dmFyIG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlcyA9IFtdO1xuXHRmb3IgKHZhciBqID0gMDsgaiA8IG91dGRhdGVkTW9kdWxlcy5sZW5ndGg7IGorKykge1xuXHRcdHZhciBvdXRkYXRlZE1vZHVsZUlkID0gb3V0ZGF0ZWRNb2R1bGVzW2pdO1xuXHRcdGlmIChcblx0XHRcdF9fd2VicGFja19yZXF1aXJlX18uY1tvdXRkYXRlZE1vZHVsZUlkXSAmJlxuXHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jW291dGRhdGVkTW9kdWxlSWRdLmhvdC5fc2VsZkFjY2VwdGVkICYmXG5cdFx0XHQvLyByZW1vdmVkIHNlbGYtYWNjZXB0ZWQgbW9kdWxlcyBzaG91bGQgbm90IGJlIHJlcXVpcmVkXG5cdFx0XHRhcHBsaWVkVXBkYXRlW291dGRhdGVkTW9kdWxlSWRdICE9PSB3YXJuVW5leHBlY3RlZFJlcXVpcmUgJiZcblx0XHRcdC8vIHdoZW4gY2FsbGVkIGludmFsaWRhdGUgc2VsZi1hY2NlcHRpbmcgaXMgbm90IHBvc3NpYmxlXG5cdFx0XHQhX193ZWJwYWNrX3JlcXVpcmVfXy5jW291dGRhdGVkTW9kdWxlSWRdLmhvdC5fc2VsZkludmFsaWRhdGVkXG5cdFx0KSB7XG5cdFx0XHRvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXMucHVzaCh7XG5cdFx0XHRcdG1vZHVsZTogb3V0ZGF0ZWRNb2R1bGVJZCxcblx0XHRcdFx0cmVxdWlyZTogX193ZWJwYWNrX3JlcXVpcmVfXy5jW291dGRhdGVkTW9kdWxlSWRdLmhvdC5fcmVxdWlyZVNlbGYsXG5cdFx0XHRcdGVycm9ySGFuZGxlcjogX193ZWJwYWNrX3JlcXVpcmVfXy5jW291dGRhdGVkTW9kdWxlSWRdLmhvdC5fc2VsZkFjY2VwdGVkXG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHR2YXIgbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXM7XG5cblx0cmV0dXJuIHtcblx0XHRkaXNwb3NlOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRjdXJyZW50VXBkYXRlUmVtb3ZlZENodW5rcy5mb3JFYWNoKGZ1bmN0aW9uIChjaHVua0lkKSB7XG5cdFx0XHRcdGRlbGV0ZSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF07XG5cdFx0XHR9KTtcblx0XHRcdGN1cnJlbnRVcGRhdGVSZW1vdmVkQ2h1bmtzID0gdW5kZWZpbmVkO1xuXG5cdFx0XHR2YXIgaWR4O1xuXHRcdFx0dmFyIHF1ZXVlID0gb3V0ZGF0ZWRNb2R1bGVzLnNsaWNlKCk7XG5cdFx0XHR3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuXHRcdFx0XHR2YXIgbW9kdWxlSWQgPSBxdWV1ZS5wb3AoKTtcblx0XHRcdFx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19yZXF1aXJlX18uY1ttb2R1bGVJZF07XG5cdFx0XHRcdGlmICghbW9kdWxlKSBjb250aW51ZTtcblxuXHRcdFx0XHR2YXIgZGF0YSA9IHt9O1xuXG5cdFx0XHRcdC8vIENhbGwgZGlzcG9zZSBoYW5kbGVyc1xuXHRcdFx0XHR2YXIgZGlzcG9zZUhhbmRsZXJzID0gbW9kdWxlLmhvdC5fZGlzcG9zZUhhbmRsZXJzO1xuXHRcdFx0XHRmb3IgKGogPSAwOyBqIDwgZGlzcG9zZUhhbmRsZXJzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdFx0ZGlzcG9zZUhhbmRsZXJzW2pdLmNhbGwobnVsbCwgZGF0YSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5obXJEW21vZHVsZUlkXSA9IGRhdGE7XG5cblx0XHRcdFx0Ly8gZGlzYWJsZSBtb2R1bGUgKHRoaXMgZGlzYWJsZXMgcmVxdWlyZXMgZnJvbSB0aGlzIG1vZHVsZSlcblx0XHRcdFx0bW9kdWxlLmhvdC5hY3RpdmUgPSBmYWxzZTtcblxuXHRcdFx0XHQvLyByZW1vdmUgbW9kdWxlIGZyb20gY2FjaGVcblx0XHRcdFx0ZGVsZXRlIF9fd2VicGFja19yZXF1aXJlX18uY1ttb2R1bGVJZF07XG5cblx0XHRcdFx0Ly8gd2hlbiBkaXNwb3NpbmcgdGhlcmUgaXMgbm8gbmVlZCB0byBjYWxsIGRpc3Bvc2UgaGFuZGxlclxuXHRcdFx0XHRkZWxldGUgb3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdO1xuXG5cdFx0XHRcdC8vIHJlbW92ZSBcInBhcmVudHNcIiByZWZlcmVuY2VzIGZyb20gYWxsIGNoaWxkcmVuXG5cdFx0XHRcdGZvciAoaiA9IDA7IGogPCBtb2R1bGUuY2hpbGRyZW4ubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHR2YXIgY2hpbGQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmNbbW9kdWxlLmNoaWxkcmVuW2pdXTtcblx0XHRcdFx0XHRpZiAoIWNoaWxkKSBjb250aW51ZTtcblx0XHRcdFx0XHRpZHggPSBjaGlsZC5wYXJlbnRzLmluZGV4T2YobW9kdWxlSWQpO1xuXHRcdFx0XHRcdGlmIChpZHggPj0gMCkge1xuXHRcdFx0XHRcdFx0Y2hpbGQucGFyZW50cy5zcGxpY2UoaWR4LCAxKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gcmVtb3ZlIG91dGRhdGVkIGRlcGVuZGVuY3kgZnJvbSBtb2R1bGUgY2hpbGRyZW5cblx0XHRcdHZhciBkZXBlbmRlbmN5O1xuXHRcdFx0Zm9yICh2YXIgb3V0ZGF0ZWRNb2R1bGVJZCBpbiBvdXRkYXRlZERlcGVuZGVuY2llcykge1xuXHRcdFx0XHRpZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5vKG91dGRhdGVkRGVwZW5kZW5jaWVzLCBvdXRkYXRlZE1vZHVsZUlkKSkge1xuXHRcdFx0XHRcdG1vZHVsZSA9IF9fd2VicGFja19yZXF1aXJlX18uY1tvdXRkYXRlZE1vZHVsZUlkXTtcblx0XHRcdFx0XHRpZiAobW9kdWxlKSB7XG5cdFx0XHRcdFx0XHRtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcyA9XG5cdFx0XHRcdFx0XHRcdG91dGRhdGVkRGVwZW5kZW5jaWVzW291dGRhdGVkTW9kdWxlSWRdO1xuXHRcdFx0XHRcdFx0Zm9yIChqID0gMDsgaiA8IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdFx0XHRcdGRlcGVuZGVuY3kgPSBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llc1tqXTtcblx0XHRcdFx0XHRcdFx0aWR4ID0gbW9kdWxlLmNoaWxkcmVuLmluZGV4T2YoZGVwZW5kZW5jeSk7XG5cdFx0XHRcdFx0XHRcdGlmIChpZHggPj0gMCkgbW9kdWxlLmNoaWxkcmVuLnNwbGljZShpZHgsIDEpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0YXBwbHk6IGZ1bmN0aW9uIChyZXBvcnRFcnJvcikge1xuXHRcdFx0Ly8gaW5zZXJ0IG5ldyBjb2RlXG5cdFx0XHRmb3IgKHZhciB1cGRhdGVNb2R1bGVJZCBpbiBhcHBsaWVkVXBkYXRlKSB7XG5cdFx0XHRcdGlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLm8oYXBwbGllZFVwZGF0ZSwgdXBkYXRlTW9kdWxlSWQpKSB7XG5cdFx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tW3VwZGF0ZU1vZHVsZUlkXSA9IGFwcGxpZWRVcGRhdGVbdXBkYXRlTW9kdWxlSWRdO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIHJ1biBuZXcgcnVudGltZSBtb2R1bGVzXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGN1cnJlbnRVcGRhdGVSdW50aW1lLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGN1cnJlbnRVcGRhdGVSdW50aW1lW2ldKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBjYWxsIGFjY2VwdCBoYW5kbGVyc1xuXHRcdFx0Zm9yICh2YXIgb3V0ZGF0ZWRNb2R1bGVJZCBpbiBvdXRkYXRlZERlcGVuZGVuY2llcykge1xuXHRcdFx0XHRpZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5vKG91dGRhdGVkRGVwZW5kZW5jaWVzLCBvdXRkYXRlZE1vZHVsZUlkKSkge1xuXHRcdFx0XHRcdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmNbb3V0ZGF0ZWRNb2R1bGVJZF07XG5cdFx0XHRcdFx0aWYgKG1vZHVsZSkge1xuXHRcdFx0XHRcdFx0bW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMgPVxuXHRcdFx0XHRcdFx0XHRvdXRkYXRlZERlcGVuZGVuY2llc1tvdXRkYXRlZE1vZHVsZUlkXTtcblx0XHRcdFx0XHRcdHZhciBjYWxsYmFja3MgPSBbXTtcblx0XHRcdFx0XHRcdHZhciBkZXBlbmRlbmNpZXNGb3JDYWxsYmFja3MgPSBbXTtcblx0XHRcdFx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRcdFx0dmFyIGRlcGVuZGVuY3kgPSBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llc1tqXTtcblx0XHRcdFx0XHRcdFx0dmFyIGFjY2VwdENhbGxiYWNrID1cblx0XHRcdFx0XHRcdFx0XHRtb2R1bGUuaG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1tkZXBlbmRlbmN5XTtcblx0XHRcdFx0XHRcdFx0aWYgKGFjY2VwdENhbGxiYWNrKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGNhbGxiYWNrcy5pbmRleE9mKGFjY2VwdENhbGxiYWNrKSAhPT0gLTEpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0XHRcdGNhbGxiYWNrcy5wdXNoKGFjY2VwdENhbGxiYWNrKTtcblx0XHRcdFx0XHRcdFx0XHRkZXBlbmRlbmNpZXNGb3JDYWxsYmFja3MucHVzaChkZXBlbmRlbmN5KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Zm9yICh2YXIgayA9IDA7IGsgPCBjYWxsYmFja3MubGVuZ3RoOyBrKyspIHtcblx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRjYWxsYmFja3Nba10uY2FsbChudWxsLCBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcyk7XG5cdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChvcHRpb25zLm9uRXJyb3JlZCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0b3B0aW9ucy5vbkVycm9yZWQoe1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcImFjY2VwdC1lcnJvcmVkXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBvdXRkYXRlZE1vZHVsZUlkLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkZXBlbmRlbmN5SWQ6IGRlcGVuZGVuY2llc0ZvckNhbGxiYWNrc1trXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZXJyb3I6IGVyclxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGlmICghb3B0aW9ucy5pZ25vcmVFcnJvcmVkKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXBvcnRFcnJvcihlcnIpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBMb2FkIHNlbGYgYWNjZXB0ZWQgbW9kdWxlc1xuXHRcdFx0Zm9yICh2YXIgbyA9IDA7IG8gPCBvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXMubGVuZ3RoOyBvKyspIHtcblx0XHRcdFx0dmFyIGl0ZW0gPSBvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXNbb107XG5cdFx0XHRcdHZhciBtb2R1bGVJZCA9IGl0ZW0ubW9kdWxlO1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGl0ZW0ucmVxdWlyZShtb2R1bGVJZCk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgaXRlbS5lcnJvckhhbmRsZXIgPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0aXRlbS5lcnJvckhhbmRsZXIoZXJyKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycjIpIHtcblx0XHRcdFx0XHRcdFx0aWYgKG9wdGlvbnMub25FcnJvcmVkKSB7XG5cdFx0XHRcdFx0XHRcdFx0b3B0aW9ucy5vbkVycm9yZWQoe1xuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzZWxmLWFjY2VwdC1lcnJvci1oYW5kbGVyLWVycm9yZWRcIixcblx0XHRcdFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZCxcblx0XHRcdFx0XHRcdFx0XHRcdGVycm9yOiBlcnIyLFxuXHRcdFx0XHRcdFx0XHRcdFx0b3JpZ2luYWxFcnJvcjogZXJyXG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0aWYgKCFvcHRpb25zLmlnbm9yZUVycm9yZWQpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXBvcnRFcnJvcihlcnIyKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRyZXBvcnRFcnJvcihlcnIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5vbkVycm9yZWQpIHtcblx0XHRcdFx0XHRcdFx0b3B0aW9ucy5vbkVycm9yZWQoe1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic2VsZi1hY2NlcHQtZXJyb3JlZFwiLFxuXHRcdFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZCxcblx0XHRcdFx0XHRcdFx0XHRlcnJvcjogZXJyXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKCFvcHRpb25zLmlnbm9yZUVycm9yZWQpIHtcblx0XHRcdFx0XHRcdFx0cmVwb3J0RXJyb3IoZXJyKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG91dGRhdGVkTW9kdWxlcztcblx0XHR9XG5cdH07XG59XG5fX3dlYnBhY2tfcmVxdWlyZV9fLmhtckkuanNvbnAgPSBmdW5jdGlvbiAobW9kdWxlSWQsIGFwcGx5SGFuZGxlcnMpIHtcblx0aWYgKCFjdXJyZW50VXBkYXRlKSB7XG5cdFx0Y3VycmVudFVwZGF0ZSA9IHt9O1xuXHRcdGN1cnJlbnRVcGRhdGVSdW50aW1lID0gW107XG5cdFx0Y3VycmVudFVwZGF0ZVJlbW92ZWRDaHVua3MgPSBbXTtcblx0XHRhcHBseUhhbmRsZXJzLnB1c2goYXBwbHlIYW5kbGVyKTtcblx0fVxuXHRpZiAoIV9fd2VicGFja19yZXF1aXJlX18ubyhjdXJyZW50VXBkYXRlLCBtb2R1bGVJZCkpIHtcblx0XHRjdXJyZW50VXBkYXRlW21vZHVsZUlkXSA9IF9fd2VicGFja19yZXF1aXJlX18ubVttb2R1bGVJZF07XG5cdH1cbn07XG5fX3dlYnBhY2tfcmVxdWlyZV9fLmhtckMuanNvbnAgPSBmdW5jdGlvbiAoXG5cdGNodW5rSWRzLFxuXHRyZW1vdmVkQ2h1bmtzLFxuXHRyZW1vdmVkTW9kdWxlcyxcblx0cHJvbWlzZXMsXG5cdGFwcGx5SGFuZGxlcnMsXG5cdHVwZGF0ZWRNb2R1bGVzTGlzdFxuKSB7XG5cdGFwcGx5SGFuZGxlcnMucHVzaChhcHBseUhhbmRsZXIpO1xuXHRjdXJyZW50VXBkYXRlQ2h1bmtzID0ge307XG5cdGN1cnJlbnRVcGRhdGVSZW1vdmVkQ2h1bmtzID0gcmVtb3ZlZENodW5rcztcblx0Y3VycmVudFVwZGF0ZSA9IHJlbW92ZWRNb2R1bGVzLnJlZHVjZShmdW5jdGlvbiAob2JqLCBrZXkpIHtcblx0XHRvYmpba2V5XSA9IGZhbHNlO1xuXHRcdHJldHVybiBvYmo7XG5cdH0sIHt9KTtcblx0Y3VycmVudFVwZGF0ZVJ1bnRpbWUgPSBbXTtcblx0Y2h1bmtJZHMuZm9yRWFjaChmdW5jdGlvbiAoY2h1bmtJZCkge1xuXHRcdGlmIChcblx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmXG5cdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gIT09IHVuZGVmaW5lZFxuXHRcdCkge1xuXHRcdFx0cHJvbWlzZXMucHVzaChsb2FkVXBkYXRlQ2h1bmsoY2h1bmtJZCwgdXBkYXRlZE1vZHVsZXNMaXN0KSk7XG5cdFx0XHRjdXJyZW50VXBkYXRlQ2h1bmtzW2NodW5rSWRdID0gdHJ1ZTtcblx0XHR9XG5cdH0pO1xuXHRpZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5mKSB7XG5cdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5mLmpzb25wSG1yID0gZnVuY3Rpb24gKGNodW5rSWQsIHByb21pc2VzKSB7XG5cdFx0XHRpZiAoXG5cdFx0XHRcdGN1cnJlbnRVcGRhdGVDaHVua3MgJiZcblx0XHRcdFx0IV9fd2VicGFja19yZXF1aXJlX18ubyhjdXJyZW50VXBkYXRlQ2h1bmtzLCBjaHVua0lkKSAmJlxuXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSAmJlxuXHRcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gIT09IHVuZGVmaW5lZFxuXHRcdFx0KSB7XG5cdFx0XHRcdHByb21pc2VzLnB1c2gobG9hZFVwZGF0ZUNodW5rKGNodW5rSWQpKTtcblx0XHRcdFx0Y3VycmVudFVwZGF0ZUNodW5rc1tjaHVua0lkXSA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxufTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXy5obXJNID0gKCkgPT4ge1xuXHRpZiAodHlwZW9mIGZldGNoID09PSBcInVuZGVmaW5lZFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJObyBicm93c2VyIHN1cHBvcnQ6IG5lZWQgZmV0Y2ggQVBJXCIpO1xuXHRyZXR1cm4gZmV0Y2goX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgX193ZWJwYWNrX3JlcXVpcmVfXy5obXJGKCkpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG5cdFx0aWYocmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpIHJldHVybjsgLy8gbm8gdXBkYXRlIGF2YWlsYWJsZVxuXHRcdGlmKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGZldGNoIHVwZGF0ZSBtYW5pZmVzdCBcIiArIHJlc3BvbnNlLnN0YXR1c1RleHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5qc29uKCk7XG5cdH0pO1xufTtcblxuLy8gbm8gZGVmZXJyZWQgc3RhcnR1cFxuXG4vLyBubyBqc29ucCBmdW5jdGlvblxuXG4vLyBubyBkZWZlcnJlZCBzdGFydHVwIiwiLy8gbW9kdWxlIGNhY2hlIGFyZSB1c2VkIHNvIGVudHJ5IGlubGluaW5nIGlzIGRpc2FibGVkXG4vLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL3RzL21haW4udHNcIik7XG4iXSwic291cmNlUm9vdCI6IiJ9